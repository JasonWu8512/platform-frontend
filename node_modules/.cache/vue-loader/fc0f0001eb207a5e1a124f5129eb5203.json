{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/track/profile/TestProfile.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/track/profile/TestProfile.vue","mtime":1655949681806},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/css-loader/dist/cjs.js","mtime":1644298105513},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1644314988580},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js","mtime":1644298105780},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmNsZWFyZml4OmJlZm9yZQo="},{"version":3,"sources":["TestProfile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyMA","file":"TestProfile.vue","sourceRoot":"src/pages/track/profile","sourcesContent":["<template>\n  <el-container v-loading=\"loading\">\n\n    <el-aside v-if=\"!asideHidden\">\n      <div>\n        <el-input v-model=\"uid\" placeholder=\"UID(未登录时不用填写)\" size=\"small\" @change=\"getEventListByUser\">\n          <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getEventListByUser\"></el-button>\n        </el-input>\n      </div>\n      <div>\n\n        <el-timeline >\n          <el-timeline-item\n            @click.native=\"getPropertiesByEvent(activity)\"\n            v-for=\"activity in activities\"\n\n            :key=\"activity.row\"\n            :color=\"activity.color\"\n            :timestamp=\"activity.event_datetime\">\n            {{ activity.event_key }}\n          </el-timeline-item>\n        </el-timeline>\n\n      </div>\n\n\n    </el-aside>\n    <el-main >\n      <el-card>\n        <div slot=\"header\" class=\"clearfix\" >\n          <p align=\"left\" style=\"font-size: medium;font-weight: bolder\">事件属性\n<!--            <button type=\"button\" @click=\"doCopy('add me!')\" >Copy!</button>-->\n          </p>\n        </div>\n        <div>\n          <div v-if=\"JSON.stringify(eventProperties)==='{}'\" style=\"font-size: 14px; color: #909399; text-align: center;\">\n            <span>暂无数据</span>\n          </div>\n          <div v-for=\"(key, index) in eventProperties\" :key=\"index\" align=\"left\">\n              <span style=\"font-weight: bold;font-size: medium\">{{ index }}  </span>\n              <span style=\"font-size: medium\">: {{ key }}</span>\n              <p></p>\n\n            <!--          <json-viewer :value=\"prop\" :expand-depth=\"5\" copyable sort></json-viewer>-->\n\n          </div>\n\n<!--          <div v-for=\"prop in eventProperties\" :key=\"prop\" align=\"left\">-->\n<!--            <div v-for=\"(key, index) in prop\" :key=\"key\">-->\n<!--              <span style=\"font-weight: bold;font-size: medium\">{{ index }}  </span>-->\n<!--              <span style=\"font-size: medium\">: {{ key }}</span>-->\n<!--              <p></p>-->\n<!--            </div>-->\n<!--            &lt;!&ndash;          <json-viewer :value=\"prop\" :expand-depth=\"5\" copyable sort></json-viewer>&ndash;&gt;-->\n\n<!--          </div>-->\n        </div>\n\n      </el-card>\n      <el-card>\n        <div slot=\"header\" class=\"clearfix\">\n          <p align=\"left\" style=\"font-size: medium;font-weight: bolder\">用户属性</p>\n        </div>\n        <div v-if=\"JSON.stringify(userProperties)==='{}'\" style=\"font-size: 14px; color: #909399; text-align: center;\">\n          <span>暂无数据</span>\n        </div>\n        <div v-for=\"(key, index) in userProperties\" :key=\"index\" align=\"left\">\n            <span style=\"font-weight: bold;font-size: medium\">{{ index }}  </span>\n            <span style=\"font-size: medium\">: {{ key }}</span>\n          <p></p>\n        </div>\n      </el-card>\n      <el-card>\n        <div slot=\"header\" class=\"clearfix\" >\n          <p align=\"left\" style=\"font-size: medium;font-weight: bolder\">公共属性</p>\n        </div>\n        <div>\n          <div v-if=\"JSON.stringify(commonProperties)==='{}'\" style=\"font-size: 14px; color: #909399; text-align: center;\">\n            <span>暂无数据</span>\n          </div>\n          <div v-for=\"prop in commonProperties\" :key=\"prop\" align=\"left\">\n            <div v-for=\"(key, index) in prop\" :key=\"index\">\n              <span style=\"font-weight: bold;font-size: medium\">{{ index }}  </span>\n              <span style=\"font-size: medium\">: {{ key }}</span>\n              <p></p>\n            </div>\n            <!--          <json-viewer :value=\"prop\" :expand-depth=\"5\" copyable sort></json-viewer>-->\n\n          </div>\n        </div>\n\n      </el-card>\n    </el-main>\n\n  </el-container>\n</template>\n\n<script lang=\"ts\">\n\nimport apiBuriedAmp from \"@/api/testBuriedAmp\"\n// import TablePagination from \"@/common/components/pagination/TablePagination.vue\"\n\n\n// import {PAGINATION_SIZE} from \"@/constant\"\n\n// import TableHeader from \"@/pages/track/buried/components/TableHeader.vue\"\n\nexport default {\n  name: \"TestBuried\",\n  components: {\n\n  },\n  data() {\n    return {\n      loading: false,\n      asideHidden: false,\n      uid: '',\n      selectEvent: '',\n      eventProperties: {},\n      userProperties: {},\n      commonProperties: {},\n      activities: []\n    }\n  },\n  computed: {\n\n  },\n  mounted() {\n    this.initPageParams()\n    // this.getEventListByUser()\n  },\n  methods: {\n    initPageParams(){\n      this.getEventListByUser()\n    },\n    getEventListByUser() {\n      this.loading = true\n      console.log('getEventListByUser', this.uid)\n      apiBuriedAmp.GetEventByUser({uid: this.uid, eventKeys: this.selectEvent}).then(res => {\n\n        this.activities = []\n        for (let event of res.data.data){\n          this.activities.push(\n            {event_key: event.eventKey, uuid:event.uuid, row:event.row,\n            user_properties: event.userProperties, event_datetime: event.eventDatetime,\n          event_properties: event.eventProperties})\n        }\n        this.loading = false\n        if (this.activities.length > 0) { // 初始化页面\n          // this.selectEvent = this.activities[0].uuid\n          this.eventProperties = this.activities[0].event_properties\n          this.userProperties = this.activities[0].user_properties\n          this.activities[0].color = '#0bbd87'\n        }\n\n        console.log('this.activities', this.activities, res)\n      }).catch(res =>{\n        console.log(res)\n        this.loading = false\n      })\n    },\n\n    getPropertiesByEvent(activity: any) {\n      console.log('getPropertiesByEvent', this.uid, activity)\n      this.eventProperties = {}\n      this.userProperties = {}\n      this.commonProperties = {}\n      console.log('getPropertiesByEvent', this.eventProperties, activity)\n      // console.log(JSON.stringify(activity.event_properties))\n      // let tmp_event = JSON.stringify(activity.event_properties)\n      // let tmp_user = JSON.stringify(activity.user_properties)\n      // console.log(JSON.parse(tmp_event), 'JSON.parse(tmp)', typeof (JSON.parse(JSON.parse(tmp_event))))\n      // this.eventProperties.push(JSON.parse(JSON.parse(tmp_event)))\n      if (activity && activity.event_properties){\n        this.eventProperties = activity.event_properties\n      }\n\n      if (activity && activity.user_properties){\n        this.userProperties = activity.user_properties\n      }\n\n      // this.userProperties.push(JSON.parse(JSON.parse(tmp_user)))\n      this.changeColor(activity)\n    },\n    changeColor(activity: any){\n      // 更新选中状态\n      for (let act of this.activities){\n        if (activity.uuid == act.uuid){\n          act.color = '#0bbd87'\n        }else{\n          act.color = '#909399'\n        }\n      }\n    }\n\n  }\n}\n</script>\n\n<style lang=\"css\">\n\n.clearfix:before\n</style>\n\n<style lang=\"scss\" scoped>\n.el-row {\n  margin-bottom: 20px;\n  &:last-child {\n    margin-bottom: 0;\n  }\n}\n.el-col {\n  border-radius: 4px;\n}\n.el-card {\n  margin-top: 20px;\n}\n.el-timeline {\n  margin-top: 10px;\n  margin-left: 10px;\n  padding: 20px;\n}\n\n\n.el-table .warning-row {\n  background-color: #8f1e45;\n}\n//.bg-purple-dark {\n//  background: #99a9bf;\n//}\n//.bg-purple {\n//  background: #d3dce6;\n//}\n//.bg-purple-light {\n//  background: #e5e9f2;\n//}\n.grid-content {\n  border-radius: 4px;\n  min-height: 36px;\n}\n.row-bg {\n  padding: 5px 0;\n  background-color: #f9fafc;\n  margin-right: 0;\n}\n.tableBox {\n  th{\n    height: 30px;\n  }\n  td {\n    height: 30px;\n  }\n}\n\n\n\n</style>\n\n"]}]}
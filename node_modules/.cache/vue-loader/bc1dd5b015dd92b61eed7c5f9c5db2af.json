{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/track/plan/view/comonents/report/components/BaseInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/track/plan/view/comonents/report/components/BaseInfo.vue","mtime":1655949681805},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js","mtime":1644314985388},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7dGVzdFBsYW5BcGl9IGZyb20gIkAvYXBpIgppbXBvcnQgRGlhbG9nRm9vdGVyIGZyb20gIkAvY29tbW9uL2NvbXBvbmVudHMvRGlhbG9nRm9vdGVyLnZ1ZSIKaW1wb3J0IHtwbGFuU3RhZ2VFbnVtfSBmcm9tICJAL2NvbnN0YW50L1Rlc3RQbGFuIgppbXBvcnQge2Nsb25lRGVlcH0gZnJvbSAibG9kYXNoIgppbXBvcnQgQ29tbW9uQ29tcG9uZW50IGZyb20gIi4vQ29tbW9uQ29tcG9uZW50IgoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJCYXNlSW5mb0NvbXBvbmVudCIsCiAgY29tcG9uZW50czoge0NvbW1vbkNvbXBvbmVudCwgRGlhbG9nRm9vdGVyfSwKICBwcm9wczogewogICAgYmFzZUluZm86IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgfSwKICAgIHBsYW5JZDogewogICAgICB0eXBlOiBTdHJpbmcKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwbGFuU3RhZ2VFbnVtOiBwbGFuU3RhZ2VFbnVtLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgaWZFZGl0OiBmYWxzZSwKICAgICAgY2xvbmVCYXNlSW5mbzogY2xvbmVEZWVwKHRoaXMuYmFzZUluZm8pLAogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGJhc2VJbmZvKCkgewogICAgICB0aGlzLmNsb25lQmFzZUluZm8gPSAgY2xvbmVEZWVwKHRoaXMuYmFzZUluZm8pCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzdGFydFRpbWVDaGFuZ2UoKSB7CiAgICAgIGlmICghIXRoaXMuYmFzZUluZm8uZW5kICYmIHRoaXMuYmFzZUluZm8uZW5kIC0gdGhpcy5iYXNlSW5mby5zdGFydCA8IDApIHsKICAgICAgICB0aGlzLmJhc2VJbmZvLnN0YXJ0ID0gdW5kZWZpbmVkOwogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn5byA5aeL5pel5pyf5LiN6IO95aSn5LqO57uT5p2f5pel5pyfJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGVzdFBsYW5BcGkudXBkYXRlVGVzdENhc2VQbGFuKHRoaXMucGxhbklkLCB7YWN0dWFsU3RhcnQ6IHRoaXMuYmFzZUluZm8uc3RhcnR9KQogICAgICB9CiAgICB9LAogICAgZW5kVGltZUNoYW5nZSgpIHsKICAgICAgaWYgKCEhdGhpcy5iYXNlSW5mby5zdGFydCAmJiB0aGlzLmJhc2VJbmZvLmVuZCAtIHRoaXMuYmFzZUluZm8uc3RhcnQgPCAwKSB7CiAgICAgICAgdGhpcy5iYXNlSW5mby5lbmQgPSB1bmRlZmluZWQ7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCflvIDlp4vml6XmnJ/kuI3og73lpKfkuo7nu5PmnZ/ml6XmnJ8nKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0ZXN0UGxhbkFwaS51cGRhdGVUZXN0Q2FzZVBsYW4odGhpcy5wbGFuSWQsIHthY3R1YWxFbmQ6IHRoaXMuYmFzZUluZm8uZW5kfSkKICAgICAgfQogICAgfSwKICAgIHN1Ym1pdCgpIHsKICAgICAgdGVzdFBsYW5BcGkudXBkYXRlVGVzdENhc2VQbGFuKHRoaXMucGxhbklkLCB7aXNzdWVKcWw6IHRoaXMuY2xvbmVCYXNlSW5mby5qcWx9KS50aGVuKAogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwogICAgICAgIHJlcyA9PiB7CiAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJGVtaXQoImZhdGhlck1ldGhvZCIpCiAgICAgICAgfQogICAgICApCiAgICB9LAogICAgZWRpdEhpc3RvcnlJZCgpIHsKICAgICAgdGVzdFBsYW5BcGkudXBkYXRlVGVzdENhc2VQbGFuKHRoaXMucGxhbklkLCB7aGlzdG9yeUlkOiB0aGlzLmNsb25lQmFzZUluZm8uaGlzdG9yeUlkfSkudGhlbigKICAgICAgICAoKSA9PiB7CiAgICAgICAgICB0aGlzLiRlbWl0KCJmYXRoZXJNZXRob2QiKQogICAgICAgIH0KICAgICAgKQogICAgfSwKICAgIGVkaXRQbGFuRGVzY3JpcHRpb24oKSB7CiAgICAgIHRlc3RQbGFuQXBpLnVwZGF0ZVRlc3RDYXNlUGxhbih0aGlzLnBsYW5JZCwge2Rlc2NyaXB0aW9uOiB0aGlzLmNsb25lQmFzZUluZm8uZGVzY3JpcHRpb259KS50aGVuKAogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwogICAgICAgIHJlcyA9PiB7CiAgICAgICAgICB0aGlzLmlmRWRpdCA9IGZhbHNlCiAgICAgICAgICB0aGlzLiRlbWl0KCJmYXRoZXJNZXRob2QiKQogICAgICAgIH0KICAgICAgKQogICAgfSwKICAgIGNhbmNsZUVkaXQoKXsKICAgICAgdGhpcy5pZkVkaXQgPSBmYWxzZQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZQogICAgICB0aGlzLmNsb25lQmFzZUluZm8gPSBjbG9uZURlZXAodGhpcy5iYXNlSW5mbykKICAgIH0KICB9Cn0K"},{"version":3,"sources":["BaseInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BaseInfo.vue","sourceRoot":"src/pages/track/plan/view/comonents/report/components","sourcesContent":["<template>\n\n  <common-component title=\"基础信息\">\n\n    <template class=\"text\">\n\n      <el-row justify=\"space-between\" type=\"flex\">\n        <el-col :span=\"12\" style=\"text-align: left\">\n          <span>所属项目：</span>\n          <span v-for=\"proj in baseInfo.projNames\" :key=\"proj\" class=\"item-value\">{{ proj }}</span>\n        </el-col>\n        <el-col :span=\"12\" style=\"text-align: left\">\n          <span>负责人：</span>\n          <span class=\"item-value\">{{ baseInfo.owner }}</span>\n        </el-col>\n      </el-row>\n\n      <el-row class=\"select-time\" justify=\"space-between\" type=\"flex\">\n        <el-col :span=\"12\" style=\"text-align: left\">\n          <span>开始时间：</span>\n          <el-date-picker\n            v-model=\"baseInfo.start\"\n            format=\"yyyy 年 MM 月 dd 日\"\n            placeholder=\"请选择开始时间\"\n            type=\"date\"\n            value-format=\"yyyy-MM-dd\"\n            @change=\"startTimeChange\"\n          />\n        </el-col>\n        <el-col :span=\"12\" style=\"text-align: left\">\n          <span>结束时间：</span>\n          <el-date-picker\n            v-model=\"baseInfo.end\"\n            format=\"yyyy 年 MM 月 dd 日\"\n            placeholder=\"请选择结束时间\"\n            type=\"date\"\n            value-format=\"yyyy-MM-dd\"\n            @change=\"endTimeChange\"\n          />\n        </el-col>\n      </el-row>\n\n      <el-row justify=\"space-between\" type=\"flex\" class=\"baseInfo\">\n        <el-col :span=\"12\" style=\"text-align: left\">\n          <span>执行人：</span>\n          <span v-for=\"item in baseInfo.executors\" :key=\"item\">{{ item }}</span>\n        </el-col>\n        <el-col :span=\"12\" style=\"text-align: left\" v-if=\"baseInfo.stage !== planStageEnum.SMOKE\">\n          <span>自动化构建号：</span>\n          <el-input v-model=\"cloneBaseInfo.historyId\" style=\"width: 180px\" @change=\"editHistoryId\">\n            <i\n              class=\"el-icon-edit el-input__icon\"\n              slot=\"suffix\">\n            </i>\n          </el-input>\n        </el-col>\n      </el-row>\n      <el-row justify=\"space-between\" type=\"flex\" v-if=\"baseInfo.stage !== planStageEnum.SMOKE\">\n        <el-col :span=\"12\" style=\"text-align: left\">\n          <span>缺陷筛选器：</span>\n          <el-button type=\"text\" @click=\"dialogVisible = true\">点击此处查看/更新jql</el-button>\n        </el-col>\n      </el-row>\n      <el-row justify=\"space-between\" type=\"flex\">\n        <el-col :span=\"12\" style=\"text-align: left\">\n          <span style=\"color: red\">备注：</span>\n          <span> {{cloneBaseInfo.description}} </span>\n          <el-button @click=\"ifEdit = true\" class=\"el-icon-edit\" type=\"text\" v-if=\"!ifEdit\"></el-button>\n        </el-col>\n      </el-row>\n      <el-dialog\n        :visible.sync=\"dialogVisible\"\n        class=\"dialog-title\"\n        title=\"缺陷筛选jql\">\n        <el-input v-model=\"cloneBaseInfo.jql\" placeholder=\"请输入jql\"></el-input>\n        <template slot=\"footer\">\n          <dialog-footer @cancel=\"cancleEdit\" @confirm=\"submit\"/>\n        </template>\n      </el-dialog>\n      <el-dialog\n        :visible.sync=\"ifEdit\"\n        class=\"dialog-title\"\n        title=\"备注\">\n        <el-input v-model=\"cloneBaseInfo.description\" placeholder=\"请输入备注说明\"></el-input>\n        <template slot=\"footer\">\n          <dialog-footer @cancel=\"cancleEdit\" @confirm=\"editPlanDescription\"/>\n        </template>\n      </el-dialog>\n\n    </template>\n\n  </common-component>\n\n</template>\n\n<script>\nimport {testPlanApi} from \"@/api\"\nimport DialogFooter from \"@/common/components/DialogFooter.vue\"\nimport {planStageEnum} from \"@/constant/TestPlan\"\nimport {cloneDeep} from \"lodash\"\nimport CommonComponent from \"./CommonComponent\"\n\nexport default {\n  name: \"BaseInfoComponent\",\n  components: {CommonComponent, DialogFooter},\n  props: {\n    baseInfo: {\n      type: Object,\n    },\n    planId: {\n      type: String\n    }\n  },\n  data() {\n    return {\n      planStageEnum: planStageEnum,\n      dialogVisible: false,\n      ifEdit: false,\n      cloneBaseInfo: cloneDeep(this.baseInfo),\n    }\n  },\n  watch: {\n    baseInfo() {\n      this.cloneBaseInfo =  cloneDeep(this.baseInfo)\n    }\n  },\n  methods: {\n    startTimeChange() {\n      if (!!this.baseInfo.end && this.baseInfo.end - this.baseInfo.start < 0) {\n        this.baseInfo.start = undefined;\n        this.$message.warning('开始日期不能大于结束日期');\n      } else {\n        testPlanApi.updateTestCasePlan(this.planId, {actualStart: this.baseInfo.start})\n      }\n    },\n    endTimeChange() {\n      if (!!this.baseInfo.start && this.baseInfo.end - this.baseInfo.start < 0) {\n        this.baseInfo.end = undefined;\n        this.$message.warning('开始日期不能大于结束日期');\n      } else {\n        testPlanApi.updateTestCasePlan(this.planId, {actualEnd: this.baseInfo.end})\n      }\n    },\n    submit() {\n      testPlanApi.updateTestCasePlan(this.planId, {issueJql: this.cloneBaseInfo.jql}).then(\n        // eslint-disable-next-line no-unused-vars\n        res => {\n          this.dialogVisible = false;\n          this.$emit(\"fatherMethod\")\n        }\n      )\n    },\n    editHistoryId() {\n      testPlanApi.updateTestCasePlan(this.planId, {historyId: this.cloneBaseInfo.historyId}).then(\n        () => {\n          this.$emit(\"fatherMethod\")\n        }\n      )\n    },\n    editPlanDescription() {\n      testPlanApi.updateTestCasePlan(this.planId, {description: this.cloneBaseInfo.description}).then(\n        // eslint-disable-next-line no-unused-vars\n        res => {\n          this.ifEdit = false\n          this.$emit(\"fatherMethod\")\n        }\n      )\n    },\n    cancleEdit(){\n      this.ifEdit = false\n      this.dialogVisible = false\n      this.cloneBaseInfo = cloneDeep(this.baseInfo)\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n.baseInfo .el-input__inner {\n  border-top-width: 0px;\n  border-left-width: 0px;\n  border-right-width: 0px;\n  border-bottom-width: 1px;\n  border-radius: 0;\n  /*outline: medium;*/\n}\n</style>\n\n<style lang=\"scss\" scoped>\n@import \"src/assets/css/font\";\n@import \"src/assets/css/utils\";\n\n.dialog-title {\n  @extend %dialog-title\n}\n\n.text {\n  @extend %font-14\n}\n\nspan {\n  margin-right: 5px;\n  display: inline-block;\n}\n\n.el-col span:first-child {\n  font-weight: bold;\n  width: 100px;\n}\n\n.el-row {\n  height: 60px;\n}\n\n.select-time span {\n  display: inline-block;\n}\n\n\n//.el-date-editor {\n//  width: 220px;\n//}\n\n</style>\n"]}]}
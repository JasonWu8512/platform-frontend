{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/jira/DepartmentMonthReport.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/jira/DepartmentMonthReport.vue","mtime":1668136108910},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js","mtime":1644314985388},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBqaXJhQXBpIGZyb20gJ0AvYXBpL2ppcmEnCi8vIGltcG9ydCBidWdJdGVtcyBmcm9tICJAL2NvbW1vbi9jb21wb25lbnRzL2J1Z0l0ZW1zLnZ1ZSIKLy8gaW1wb3J0IG15UGllQ2hhcnQgZnJvbSAiQC9jb21tb24vY29tcG9uZW50cy9teVBpZUNoYXJ0LnZ1ZSIKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRGVwYXJ0bWVudE1vbnRoUmVwb3J0IiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGNoYXJ0U2V0dGluZ3M6IHsKICAgICAgICByb3NlVHlwZTogJ3JhZGl1cycKICAgICAgfSwKICAgICAgc3VtbWFyeURhdGE6IHt9LAogICAgICBsZXZlbHM6IFsnUDAnLCAnUDEnLCAnUDInLCAnUDMnLCAnUzAnLCAnUzEnLCAnUzInLCAnUzMnXSwKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgY29sdW1uczogW3sKICAgICAgICBsYWJlbDogJ+e7hOe7h+mDqOmXqCcsCiAgICAgICAgcHJvcHM6ICdkZXBhcnROYW1lJywKICAgICAgICBzb3J0YWJsZTogZmFsc2UsCiAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICflvIDlj5HkurrmlbAnLAogICAgICAgICAgcHJvcHM6ICdwZW9wbGVDb3VudCcsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogJ+W8gOWPkeS6uuWkqScsCiAgICAgICAgICBwcm9wczogJ2RheScsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogJ+aAu2J1Z+aVsCcsCiAgICAgICAgICBwcm9wczogJ2NvdW50JywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAn57q/5LiKUDAnLAogICAgICAgICAgcHJvcHM6ICdQMCcsCiAgICAgICAgfSx7CiAgICAgICAgICBsYWJlbDogJ+e6v+S4ilAxJywKICAgICAgICAgIHByb3BzOiAnUDEnLAogICAgICAgIH0sewogICAgICAgICAgbGFiZWw6ICfnur/kuIpQMicsCiAgICAgICAgICBwcm9wczogJ1AyJywKICAgICAgICB9LHsKICAgICAgICAgIGxhYmVsOiAn57q/5LiKUDMnLAogICAgICAgICAgcHJvcHM6ICdQMycsCiAgICAgICAgfSx7CiAgICAgICAgICBsYWJlbDogJ+e6v+S4i1MwJywKICAgICAgICAgIHByb3BzOiAnUzAnLAogICAgICAgIH0sewogICAgICAgICAgbGFiZWw6ICfnur/kuItTMScsCiAgICAgICAgICBwcm9wczogJ1MxJywKICAgICAgICB9LHsKICAgICAgICAgIGxhYmVsOiAn57q/5LiLUzInLAogICAgICAgICAgcHJvcHM6ICdTMicsCiAgICAgICAgfSx7CiAgICAgICAgICBsYWJlbDogJ+e6v+S4i1MzJywKICAgICAgICAgIHByb3BzOiAnUzMnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICfnur/kuItidWfmjIfmlbAnLAogICAgICAgICAgcHJvcHM6ICdvZmZsaW5lQnVnUmF0ZScsCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAnUDB+UzEg5bmz5Z2H6Kej5Yaz5pe26ZW/KOWwj+aXtiknLAogICAgICAgICAgcHJvcHM6ICdhdmdGaXhUaW1lJywKICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICdQMH5TMSBmaXgtPmNsb3Nl5pe26Ze0KOWwj+aXtiknLAogICAgICAgICAgcHJvcHM6ICdhdmdDbG9zZVRpbWUnLAogICAgICAgICAgc29ydGFibGU6dHJ1ZQogICAgICAgIH0KICAgICAgXSwKICAgIH0KICB9LAogIHByb3BzOiB7CiAgICBtb250aDoge3R5cGU6IFN0cmluZ30KICB9LAogIHdhdGNoOiB7CiAgICBtb250aCgpIHsKICAgICAgdGhpcy5nZXREZXBhcnRNb250aFJlcG9ydCgpOwoKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGNlbGxTdHlsZSgpewogICAgICByZXR1cm4gJ2ZvbnQ6IDEzcHggQXJpYWw7Zm9udC13ZWlnaHQ6IDUwMDsgY29sb3I6ICM2MDYyNjY7JwogICAgfSwKICAgIHRhZ1R5cGUodmFsdWUpewogICAgICBpZihbJ1AwJywgJ1AxJywgJ1AyJywgJ1AzJ10uaW5kZXhPZih2YWx1ZSkgPiAtMSkgewogICAgICAgIHJldHVybiAiZGFuZ2VyIgogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIHJldHVybiAid2FybmluZyIKICAgICAgfQoKICAgIH0sCiAgICBtYXJnaW4oaW5kZXgpIHsKICAgICAgbGV0IG1yID0gewogICAgICAgICJwYWRkaW5nIjogIjEwcHggMCAxMHB4IDEwcHgiCiAgICAgIH0KICAgICAgaWYgKGluZGV4ICUgMiA9PT0gMCkgewogICAgICAgIG1yWyJwYWRkaW5nIl0gPSAiMTBweCAxMHB4IDEwcHggMCIKICAgICAgfQogICAgICByZXR1cm4gbXIKICAgIH0sCiAgICB0YWJsZVJvd0NsYXNzTmFtZShyb3cpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ3JvdycsIHJvdykKICAgICAgaWYgKHJvdy5yb3cuYnVnTGV2ZWwgPT09ICfnur/kuIonKSB7CiAgICAgICAgcmV0dXJuICdidWctcm93JzsKICAgICAgfSBlbHNlIGlmIChyb3cucm93LmJ1Z0xldmVsID09PSAn57q/5LiLJykgewogICAgICAgIHJldHVybiAndGFzay1yb3cnOwogICAgICB9CiAgICAgIHJldHVybiAnJzsKICAgIH0sCiAgICBnZXREZXBhcnRNb250aFJlcG9ydCgpIHsKICAgICAgdGhpcy50YWJsZURhdGEgPSBbXQogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlCiAgICAgIGppcmFBcGkuZ2V0VGVzdERlcGFydG1lbnRNb250aFJlcG9ydCh7bW9udGg6IHRoaXMubW9udGh9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5zdW1tYXJ5RGF0YSA9IHJlcy5kYXRhLnN1bW1hcnk7CiAgICAgICAgdGhpcy5zdW1tYXJ5RGF0YS5kZXBhcnROYW1lID0gJ+WFqOmDqCcKICAgICAgICByZXMuZGF0YS5zdW1tYXJ5LmJ1Z3MuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgIGxldCBrZXkgPSBpdGVtLnN1YkJ1Z0xldmVsCiAgICAgICAgICBjb25zb2xlLmxvZygncHBwJywga2V5KQogICAgICAgICAgdGhpcy5zdW1tYXJ5RGF0YVtrZXldID0gaXRlbS5jb3VudAogICAgICAgIH0pCiAgICAgICAgdGhpcy50YWJsZURhdGEucHVzaCh0aGlzLnN1bW1hcnlEYXRhKQogICAgICAgIHJlcy5kYXRhLmRldGFpbHMuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICBkZXBhcnROYW1lOiBpdGVtLmRlcGFydE5hbWUsCiAgICAgICAgICAgIHBlb3BsZUNvdW50OiBpdGVtLnBlb3BsZUNvdW50ID09PSBudWxsID8gMCA6IGl0ZW0ucGVvcGxlQ291bnQsCiAgICAgICAgICAgIGNvdW50OiBpdGVtLmNvdW50ID09PSBudWxsID8gMCA6IGl0ZW0uY291bnQsCiAgICAgICAgICAgIGRheTogaXRlbS5kYXksCiAgICAgICAgICAgIHBvaW50OiBpdGVtLnBvaW50ID09PSBudWxsID8gMCA6IGl0ZW0ucG9pbnQsCiAgICAgICAgICAgIG9ubGluZVBvaW50OiBpdGVtLm9ubGluZVBvaW50ID09PSBudWxsID8gMCA6IGl0ZW0ub25saW5lUG9pbnQsCiAgICAgICAgICAgIG9mZmxpbmVQb2ludDogaXRlbS5vZmZsaW5lUG9pbnQgPT09IG51bGwgPyAwIDogaXRlbS5vZmZsaW5lUG9pbnQsCiAgICAgICAgICAgIG9mZmxpbmVCdWdSYXRlOiBpdGVtLm9mZmxpbmVCdWdSYXRlLAogICAgICAgICAgICBhdmdGaXhUaW1lOiBpdGVtLmF2Z0ZpeFRpbWUsCiAgICAgICAgICAgIGF2Z0Nsb3NlVGltZTogaXRlbS5hdmdDbG9zZVRpbWUsCiAgICAgICAgICB9OwogICAgICAgICAgaWYgKGl0ZW0uYnVncyAhPSBudWxsKSB7CiAgICAgICAgICAgIGl0ZW0uYnVncy5mb3JFYWNoKHZhbHVlID0+IHsKICAgICAgICAgICAgICBsZXQga2V5ID0gdmFsdWUuc3ViQnVnTGV2ZWwKICAgICAgICAgICAgICBkYXRhW2tleV0gPSB2YWx1ZS5jb3VudAogICAgICAgICAgICB9KQogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMudGFibGVEYXRhLnB1c2goZGF0YSk7CiAgICAgICAgfSkKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICAgIC8vIGNvbnNvbGUubG9nKCdkZGRkZCcsIHRoaXMudGFibGVEYXRhKQogICAgICB9KQogICAgfSwKICB9LAp9Cg=="},{"version":3,"sources":["DepartmentMonthReport.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DepartmentMonthReport.vue","sourceRoot":"src/pages/jira","sourcesContent":["<template>\n  <el-table :data=\"tableData\"\n            :row-class-name=\"tableRowClassName\"\n            :cell-style=\"cellStyle\"\n            size=\"medium\"\n            row-key=\"id\"\n            v-loading=\"loading\">\n    <template v-for=\"col in columns\">\n      <el-table-column :key=\"col.props\" :label=\"col.label\" :prop=\"col.props\" :sortable=\"col.sortable\">\n        <template slot-scope=\"scope\" style=\" vertical-align: text-bottom\">\n          <div v-if=\"levels.indexOf(col.props) > -1 && scope.row[col.props]\">\n            <el-tag :type=\"tagType(col.props)\"\n                    effect=\"dark\">\n              {{scope.row[col.props]}}\n            </el-tag>\n          </div>\n          <div v-else-if=\"scope.row[col.props] !== 0\"><span>{{ scope.row[col.props]}}</span></div>\n<!--          <div v-else>-->\n<!--            -->\n<!--          </div>-->\n        </template>\n      </el-table-column>\n    </template>\n  </el-table>\n</template>\n\n<script>\nimport jiraApi from '@/api/jira'\n// import bugItems from \"@/common/components/bugItems.vue\"\n// import myPieChart from \"@/common/components/myPieChart.vue\"\n\nexport default {\n  name: \"DepartmentMonthReport\",\n  data() {\n    return {\n      loading: false,\n      chartSettings: {\n        roseType: 'radius'\n      },\n      summaryData: {},\n      levels: ['P0', 'P1', 'P2', 'P3', 'S0', 'S1', 'S2', 'S3'],\n      tableData: [],\n      columns: [{\n        label: '组织部门',\n        props: 'departName',\n        sortable: false,\n      },\n        {\n          label: '开发人数',\n          props: 'peopleCount',\n        },\n        {\n          label: '开发人天',\n          props: 'day',\n        },\n        {\n          label: '总bug数',\n          props: 'count',\n        },\n        {\n          label: '线上P0',\n          props: 'P0',\n        },{\n          label: '线上P1',\n          props: 'P1',\n        },{\n          label: '线上P2',\n          props: 'P2',\n        },{\n          label: '线上P3',\n          props: 'P3',\n        },{\n          label: '线下S0',\n          props: 'S0',\n        },{\n          label: '线下S1',\n          props: 'S1',\n        },{\n          label: '线下S2',\n          props: 'S2',\n        },{\n          label: '线下S3',\n          props: 'S3',\n        },\n        {\n          label: '线下bug指数',\n          props: 'offlineBugRate',\n          sortable: true,\n        },\n        {\n          label: 'P0~S1 平均解决时长(小时)',\n          props: 'avgFixTime',\n          sortable: true,\n        },\n        {\n          label: 'P0~S1 fix->close时间(小时)',\n          props: 'avgCloseTime',\n          sortable:true\n        }\n      ],\n    }\n  },\n  props: {\n    month: {type: String}\n  },\n  watch: {\n    month() {\n      this.getDepartMonthReport();\n\n    }\n  },\n  methods: {\n    cellStyle(){\n      return 'font: 13px Arial;font-weight: 500; color: #606266;'\n    },\n    tagType(value){\n      if(['P0', 'P1', 'P2', 'P3'].indexOf(value) > -1) {\n        return \"danger\"\n      }\n      else {\n        return \"warning\"\n      }\n\n    },\n    margin(index) {\n      let mr = {\n        \"padding\": \"10px 0 10px 10px\"\n      }\n      if (index % 2 === 0) {\n        mr[\"padding\"] = \"10px 10px 10px 0\"\n      }\n      return mr\n    },\n    tableRowClassName(row) {\n      // console.log('row', row)\n      if (row.row.bugLevel === '线上') {\n        return 'bug-row';\n      } else if (row.row.bugLevel === '线下') {\n        return 'task-row';\n      }\n      return '';\n    },\n    getDepartMonthReport() {\n      this.tableData = []\n      this.loading = true\n      jiraApi.getTestDepartmentMonthReport({month: this.month}).then(res => {\n        this.summaryData = res.data.summary;\n        this.summaryData.departName = '全部'\n        res.data.summary.bugs.forEach(item => {\n          let key = item.subBugLevel\n          console.log('ppp', key)\n          this.summaryData[key] = item.count\n        })\n        this.tableData.push(this.summaryData)\n        res.data.details.forEach(item => {\n          var data = {\n            departName: item.departName,\n            peopleCount: item.peopleCount === null ? 0 : item.peopleCount,\n            count: item.count === null ? 0 : item.count,\n            day: item.day,\n            point: item.point === null ? 0 : item.point,\n            onlinePoint: item.onlinePoint === null ? 0 : item.onlinePoint,\n            offlinePoint: item.offlinePoint === null ? 0 : item.offlinePoint,\n            offlineBugRate: item.offlineBugRate,\n            avgFixTime: item.avgFixTime,\n            avgCloseTime: item.avgCloseTime,\n          };\n          if (item.bugs != null) {\n            item.bugs.forEach(value => {\n              let key = value.subBugLevel\n              data[key] = value.count\n            })\n          }\n\n          this.tableData.push(data);\n        })\n        this.loading = false\n        // console.log('ddddd', this.tableData)\n      })\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"src/assets/css/utils\";\n\n.dashboard-header {\n  width: 100%;\n  margin: 0 auto;\n  //position: fixed;\n  //position: absolute;\n  top: 50px;\n  background-color: #fff;\n  text-align: left;\n  padding: 5px;\n  z-index: $header-z-index - 1;\n}\n\n.card-title {\n  font-size: 16px;\n  font-weight: 700;\n  text-align: left;\n}\n\n</style>\n"]}]}
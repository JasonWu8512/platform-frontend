{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/Team/components/MonthResourceReport.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/Team/components/MonthResourceReport.vue","mtime":1655949681769},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js","mtime":1644314985388},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7amlyYUFwaX0gZnJvbSAiQC9hcGkiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJNb250aFJlc291cmNlUmVwb3J0IiwKICBkYXRhKCkgewogICAgcmV0dXJuewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgbW9udGg6ICcnLAogICAgICB0YWJsZURhdGE6IFtdLAogICAgICBjb2x1bW5zOiBbCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICLpg6jpl6giLAogICAgICAgICAgcHJvcDogImRlcGFydE5hbWUiLAogICAgICAgICAgZWRpdGFibGU6IGZhbHNlLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICLotJ/otKPkuroiLAogICAgICAgICAgcHJvcDogImxlYWRlciIsCiAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogIuS6uuaVsCIsCiAgICAgICAgICBwcm9wOiAicGVvcGxlQ291bnQiLAogICAgICAgICAgZWRpdGFibGU6IGZhbHNlLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICLlt6XkvZzml6UiLAogICAgICAgICAgcHJvcDogIndvcmtEYXlzIiwKICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAi5oC75bel5pe2IiwKICAgICAgICAgIHByb3A6ICJ0b3RhbFdvcmtpbmdEYXlzIiwKICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAi5LiK5pyI5byA5aeLLOacrOaciOWujOaIkCIsCiAgICAgICAgICBwcm9wOiAicHJlRGVwYXJ0bWVudERheXMiLAogICAgICAgICAgZWRpdGFibGU6IGZhbHNlLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICLmnKzmnIjlvIDlp4ss5pys5pyI5a6M5oiQIiwKICAgICAgICAgIHByb3A6ICJjdXJyZW50RGVwYXJ0bWVudERheXMiLAogICAgICAgICAgZWRpdGFibGU6IGZhbHNlLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICLmnKzmnIjlvIDlp4ss5LiL5pyI5a6M5oiQIiwKICAgICAgICAgIHByb3A6ICJuZXh0RGVwYXJ0bWVudERheXMiLAogICAgICAgICAgZWRpdGFibGU6IGZhbHNlLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICLlt6Xml7blt67lgLwiLAogICAgICAgICAgcHJvcDogInRhcmdldERheXNEaWZmIiwKICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAi6aWx5ZKM5bqmIiwKICAgICAgICAgIHByb3A6ICJwcm9kdWN0aXZpdHkiLAogICAgICAgICAgZWRpdGFibGU6IGZhbHNlLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICLlpIfms6giLAogICAgICAgICAgcHJvcDogIm1hcmsiLAogICAgICAgICAgZWRpdGFibGU6IHRydWUsCiAgICAgICAgfQogICAgICBdCiAgICB9CgogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0ZGF0YXRpbWUoKQogIH0sCiAgd2F0Y2g6IHsKICAgIG1vbnRoKCkgewogICAgICB0aGlzLmdldE1vbnRoUmVwb3J0KCkKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldGRhdGF0aW1lKCl7CiAgICAgIHRoaXMubW9udGggPSBuZXcgRGF0ZSgpLmZvcm1hdCgieXl5eS1NTSIpOwogICAgfSwKICAgIGdldE1vbnRoUmVwb3J0KCl7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWUKICAgICAgamlyYUFwaS5nZXRNb250aFJlc291cmNlUmVwb3J0KHttb250aDogdGhpcy5tb250aH0pLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhLm1hcChpdGVtID0+IHsKICAgICAgICAgIHJldHVybnsKICAgICAgICAgICAgaWQ6IGl0ZW0uaWQsCiAgICAgICAgICAgIGRlcGFydE5hbWU6IGl0ZW0uZGVwYXJ0TmFtZSwKICAgICAgICAgICAgbGVhZGVyOiBpdGVtLmxlYWRlciwKICAgICAgICAgICAgcGVvcGxlQ291bnQ6IGl0ZW0ucGVvcGxlQ291bnQsCiAgICAgICAgICAgIHdvcmtEYXlzOiBpdGVtLndvcmtEYXlzLAogICAgICAgICAgICB0b3RhbFdvcmtpbmdEYXlzOiBpdGVtLnRvdGFsV29ya2luZ0RheXMsCiAgICAgICAgICAgIHByZURlcGFydG1lbnREYXlzOiBpdGVtLnByZURlcGFydG1lbnREYXlzLAogICAgICAgICAgICBjdXJyZW50RGVwYXJ0bWVudERheXM6IGl0ZW0uY3VycmVudERlcGFydG1lbnREYXlzLAogICAgICAgICAgICBuZXh0RGVwYXJ0bWVudERheXM6IGl0ZW0ubmV4dERlcGFydG1lbnREYXlzLAogICAgICAgICAgICB0YXJnZXREYXlzRGlmZjogaXRlbS50YXJnZXREYXlzRGlmZiwKICAgICAgICAgICAgcHJvZHVjdGl2aXR5OiBpdGVtLnByb2R1Y3Rpdml0eSwKICAgICAgICAgICAgbWFyazogaXRlbS5tYXJrLAogICAgICAgICAgICBlZGl0YWJsZTogaXRlbS5lZGl0YWJsZQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgfSkKCiAgICB9LAogICAgY2hhbmdlTWFyayhyb3cpIHsKICAgICAgamlyYUFwaS5lZGl0TW9udGhSZXNvdXJjZVJlcG9ydChyb3cuaWQsIHJvdykudGhlbigKICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMKICAgICAgICByZXMgPT4gewogICAgICAgICAgdGhpcy5nZXRNb250aFJlcG9ydCgpCiAgICAgICAgfQogICAgICApCiAgICB9LAogIH0KfQo="},{"version":3,"sources":["MonthResourceReport.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MonthResourceReport.vue","sourceRoot":"src/pages/Team/components","sourcesContent":["<template>\n  <div>\n    <el-card style=\"margin-top: 20px\">\n      <div slot=\"header\" class=\"title\">\n        <span>月度资源报告</span>\n        <el-date-picker\n          v-model=\"month\"\n          :clearable=\"false\"\n          placeholder=\"选择月\"\n          type=\"month\"\n          value-format=\"yyyy-MM\"\n          style=\"width: 200px;float: right; padding: 3px 0; border: 0;\"\n        />\n      </div>\n      <el-table :data=\"tableData\"\n                row-key=\"id\"\n                size=\"medium\"\n                v-loading=\"loading\" style=\"margin-top: -10px\">\n        <template v-for=\"col in columns\">\n          <el-table-column :prop=\"col.prop\" :label=\"col.label\" :key=\"col.prop\" :width=\"col.width\">\n            <template slot-scope=\"scope\">\n              <el-input v-if=\"col.editable\" style=\"width: 60%\"\n                        @change=\"changeMark(scope.row)\"\n                        @keyup.enter.native=\"$event.target.blur\"\n                        v-model=\"scope.row[col.prop]\"></el-input>\n              <span v-else>{{scope.row[col.prop]}}</span>\n            </template>\n          </el-table-column>\n        </template>\n      </el-table>\n    </el-card>\n  </div>\n\n</template>\n\n<script>\nimport {jiraApi} from \"@/api\";\n\nexport default {\n  name: \"MonthResourceReport\",\n  data() {\n    return{\n      loading: false,\n      month: '',\n      tableData: [],\n      columns: [\n        {\n          label: \"部门\",\n          prop: \"departName\",\n          editable: false,\n        },\n        {\n          label: \"负责人\",\n          prop: \"leader\",\n          editable: false,\n        },\n        {\n          label: \"人数\",\n          prop: \"peopleCount\",\n          editable: false,\n        },\n        {\n          label: \"工作日\",\n          prop: \"workDays\",\n          editable: false,\n        },\n        {\n          label: \"总工时\",\n          prop: \"totalWorkingDays\",\n          editable: false,\n        },\n        {\n          label: \"上月开始,本月完成\",\n          prop: \"preDepartmentDays\",\n          editable: false,\n        },\n        {\n          label: \"本月开始,本月完成\",\n          prop: \"currentDepartmentDays\",\n          editable: false,\n        },\n        {\n          label: \"本月开始,下月完成\",\n          prop: \"nextDepartmentDays\",\n          editable: false,\n        },\n        {\n          label: \"工时差值\",\n          prop: \"targetDaysDiff\",\n          editable: false,\n        },\n        {\n          label: \"饱和度\",\n          prop: \"productivity\",\n          editable: false,\n        },\n        {\n          label: \"备注\",\n          prop: \"mark\",\n          editable: true,\n        }\n      ]\n    }\n\n  },\n  mounted() {\n    this.getdatatime()\n  },\n  watch: {\n    month() {\n      this.getMonthReport()\n    }\n  },\n  methods: {\n    getdatatime(){\n      this.month = new Date().format(\"yyyy-MM\");\n    },\n    getMonthReport(){\n      this.loading = true\n      jiraApi.getMonthResourceReport({month: this.month}).then(res => {\n        this.tableData = res.data.map(item => {\n          return{\n            id: item.id,\n            departName: item.departName,\n            leader: item.leader,\n            peopleCount: item.peopleCount,\n            workDays: item.workDays,\n            totalWorkingDays: item.totalWorkingDays,\n            preDepartmentDays: item.preDepartmentDays,\n            currentDepartmentDays: item.currentDepartmentDays,\n            nextDepartmentDays: item.nextDepartmentDays,\n            targetDaysDiff: item.targetDaysDiff,\n            productivity: item.productivity,\n            mark: item.mark,\n            editable: item.editable\n          }\n        })\n        this.loading = false\n      })\n\n    },\n    changeMark(row) {\n      jiraApi.editMonthResourceReport(row.id, row).then(\n        // eslint-disable-next-line no-unused-vars\n        res => {\n          this.getMonthReport()\n        }\n      )\n    },\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.title {\n  font-size: 20px;\n  font-weight: 700;\n  margin-left: 5px;\n  line-height: 35px;\n  text-align: left;\n}\n</style>\n"]}]}
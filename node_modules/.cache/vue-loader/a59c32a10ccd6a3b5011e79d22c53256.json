{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/Team/components/SprintTestPlan.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/Team/components/SprintTestPlan.vue","mtime":1655949681770},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js","mtime":1644314985388},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7amlyYUFwaX0gZnJvbSAiQC9hcGkiOwppbXBvcnQgQ29tbW9uQ29tcG9uZW50IGZyb20gIkAvcGFnZXMvdHJhY2svcGxhbi92aWV3L2NvbW9uZW50cy9yZXBvcnQvY29tcG9uZW50cy9Db21tb25Db21wb25lbnQudnVlIgpleHBvcnQgZGVmYXVsdCB7Cm5hbWU6ICJTcHJpbnRUZXN0UGxhbiIsCiAgY29tcG9uZW50czoge0NvbW1vbkNvbXBvbmVudH0sCiAgcHJvcHM6IHsKICBzcHJpbnRJZDogU3RyaW5nLAogIH0sCiAgd2F0Y2g6IHsKICAgIHNwcmludElkKCkgewogICAgICB0aGlzLmdldFNwcmludFN0b3J5VGVzdFBsYW4oKQogICAgfSwKICB9LAogIGRhdGEoKSB7CiAgcmV0dXJuIHsKICAgIGxvYWRpbmc6IGZhbHNlLAogICAgaW5SZWZyZXNoOiBmYWxzZSwKICAgIHNwVmFsdWVzOiBbXSwKICAgIG9wdGlvblByb3BzOiB7CiAgICAgIHZhbHVlOiAnaWQnLAogICAgICBsYWJlbDogJ25hbWUnLAogICAgICBjaGlsZHJlbjogJ3NwcmludHMnCiAgICB9LAogICAgb3B0aW9uOnsKICAgICAgbGVnZW5kOiB7CiAgICAgICAgZGF0YTogW3tuYW1lOiAn5q2j5bi4JywgdGV4dFN0eWxlOiB7Y29sb3I6ICcjNzJhOTJmJywgZm9udFdlaWdodDogJ2JvbGQnfX0sCiAgICAgICAgICB7bmFtZTogJ+W7tuacnycsIHRleHRTdHlsZToge2NvbG9yOiAnI0U2QTIzQycsIGZvbnRXZWlnaHQ6ICdib2xkJ319LAogICAgICAgICAge25hbWU6ICfmnKrmj5DmtYsnLCB0ZXh0U3R5bGU6IHtjb2xvcjogJyM4MWNiZjMnLCBmb250V2VpZ2h0OiAnYm9sZCd9fV0KICAgICAgfSwKICAgICAgY29sb3I6IFsndHJhbnNwYXJlbnQnXSwKICAgICAgdG9vbHRpcDogewogICAgICAgIHRyaWdnZXI6ICdpdGVtJywKICAgICAgICAvLyBheGlzUG9pbnRlcjogeyAgICAgICAgICAgIC8vIOWdkOagh+i9tOaMh+ekuuWZqO+8jOWdkOagh+i9tOinpuWPkeacieaViAogICAgICAgIC8vICAgdHlwZTogJ3NoYWRvdycgICAgICAgIC8vIOm7mOiupOS4uuebtOe6v++8jOWPr+mAieS4uu+8midsaW5lJyB8ICdzaGFkb3cnCiAgICAgICAgLy8gfSwKICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgIHJldHVybiBwYXJhbXMubmFtZTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHhBeGlzOiB7CiAgICAgICAgdHlwZTogJ2NhdGVnb3J5JywKICAgICAgICBkYXRhOltdLAogICAgICAgIGF4aXNMYWJlbDp7CiAgICAgICAgICBpbnRlcnZhbDogMCwKICAgICAgICAgIHJvdGF0ZTogMzAsCiAgICAgICAgfX0sCiAgICAgIHlBeGlzOiB7CiAgICAgICAgdHlwZTogJ3ZhbHVlJywKICAgICAgfSwKCiAgICAgIHNlcmllczogW10KICAgIH0KICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBvcGVuSmlyYShwYXJhbXMpIHsKICAgICAgd2luZG93Lm9wZW4ocGFyYW1zLmRhdGEua2V5KQogICAgfSwKICBnZXRTcHJpbnRTdG9yeVRlc3RQbGFuKCkgewogICAgdGhpcy5vcHRpb24uc2VyaWVzID0gW10KICAgIHRoaXMub3B0aW9uLnhBeGlzLmRhdGEgPSBbXQogICAgamlyYUFwaS5nZXRTcHJpbnRTdG9yeVRlc3RQbGFuKHtzcHJpbnRJZDogdGhpcy5zcHJpbnRJZH0pLnRoZW4ocmVzID0+IHsKICAgICAgdGhpcy5vcHRpb24ueEF4aXMuZGF0YSA9IHJlcy5kYXRhLmRhdGVzCiAgICAgIHRoaXMub3B0aW9uLnNlcmllcyA9IHJlcy5kYXRhLnN0b3JpZXMubWFwKGl0ZW0gPT4gewogICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBpdGVtLCB7ImxhYmVsIjogewogICAgICAgICAgICAibm9ybWFsIjp7CiAgICAgICAgICAgICAgInNob3ciOiB0cnVlLAogICAgICAgICAgICAgICJwb3NpdGlvbiI6ICdpbnNpZGUnLAogICAgICAgICAgICAgICJmb3JtYXR0ZXIiOiBmdW5jdGlvbihwYXJhbXMpIHsKICAgICAgICAgICAgICAgIGlmIChwYXJhbXMudmFsdWUgPiAwKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJhbXMudmFsdWU7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICByZXR1cm4gJyAnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gICAgICAgICAgICB9fSwKICAgICAgICAgICJpdGVtU3R5bGUiOnsKICAgICAgICAgICAgImNvbG9yIjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGlmKGl0ZW0ubmFtZSA9PT0gJ+ato+W4uCcpIHsKICAgICAgICAgICAgICAgIHJldHVybiAiIzcyYTkyZiIKICAgICAgICAgICAgICB9IGVsc2UgaWYoaXRlbS5uYW1lID09PSAn5bu25pyfJykgewogICAgICAgICAgICAgICAgcmV0dXJuICIjRTZBMjNDIgogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIiM4MWNiZjMiCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICAiYmFyQm9yZGVyQ29sb3IiOiAnI2ZmZicsCiAgICAgICAgICAgICJiYXJCb3JkZXJSYWRpdXMiOiAyfSx9KQogICAgICB9KQogICAgfSkuZmluYWxseSgoKSA9PiB7CiAgICAgIC8vIOW8uuWItuWIt+aWsOWbvuihqO+8jOa4hemZpOWbvuihqOaYvuekuue8k+WtmAogICAgICB0aGlzLmluUmVmcmVzaCA9IGZhbHNlOwogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy5pblJlZnJlc2ggPSB0cnVlOwogICAgICB9KTsKICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICB9KTsKICB9LAogIH0sCn0K"},{"version":3,"sources":["SprintTestPlan.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SprintTestPlan.vue","sourceRoot":"src/pages/Team/components","sourcesContent":["<template>\n    <div>\n      <common-component title=\"提测规划图\" v-loading=\"loading\">\n        <div v-if=\"option.series.length === 0\" style=\"font-size: 14px; color: #909399; text-align: center;\">-->\n                <span>暂无数据</span>\n              </div>\n        <div v-else>\n          <chart :autoresize=\"true\" :options=\"option\" class=\"e-chart\" v-if=\"inRefresh\" @click=\"openJira\"></chart>\n        </div>\n\n      </common-component>\n    </div>\n</template>\n\n<script>\nimport {jiraApi} from \"@/api\";\nimport CommonComponent from \"@/pages/track/plan/view/comonents/report/components/CommonComponent.vue\"\nexport default {\nname: \"SprintTestPlan\",\n  components: {CommonComponent},\n  props: {\n  sprintId: String,\n  },\n  watch: {\n    sprintId() {\n      this.getSprintStoryTestPlan()\n    },\n  },\n  data() {\n  return {\n    loading: false,\n    inRefresh: false,\n    spValues: [],\n    optionProps: {\n      value: 'id',\n      label: 'name',\n      children: 'sprints'\n    },\n    option:{\n      legend: {\n        data: [{name: '正常', textStyle: {color: '#72a92f', fontWeight: 'bold'}},\n          {name: '延期', textStyle: {color: '#E6A23C', fontWeight: 'bold'}},\n          {name: '未提测', textStyle: {color: '#81cbf3', fontWeight: 'bold'}}]\n      },\n      color: ['transparent'],\n      tooltip: {\n        trigger: 'item',\n        // axisPointer: {            // 坐标轴指示器，坐标轴触发有效\n        //   type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'\n        // },\n        formatter: function (params) {\n          return params.name;\n        }\n      },\n      xAxis: {\n        type: 'category',\n        data:[],\n        axisLabel:{\n          interval: 0,\n          rotate: 30,\n        }},\n      yAxis: {\n        type: 'value',\n      },\n\n      series: []\n    }\n  }\n  },\n  methods: {\n    openJira(params) {\n      window.open(params.data.key)\n    },\n  getSprintStoryTestPlan() {\n    this.option.series = []\n    this.option.xAxis.data = []\n    jiraApi.getSprintStoryTestPlan({sprintId: this.sprintId}).then(res => {\n      this.option.xAxis.data = res.data.dates\n      this.option.series = res.data.stories.map(item => {\n        return Object.assign({}, item, {\"label\": {\n            \"normal\":{\n              \"show\": true,\n              \"position\": 'inside',\n              \"formatter\": function(params) {\n                if (params.value > 0) {\n                  return params.value;\n                } else {\n                  return ' ';\n                }\n              }            }},\n          \"itemStyle\":{\n            \"color\": function () {\n              if(item.name === '正常') {\n                return \"#72a92f\"\n              } else if(item.name === '延期') {\n                return \"#E6A23C\"\n              } else {\n                return \"#81cbf3\"\n              }\n            },\n            \"barBorderColor\": '#fff',\n            \"barBorderRadius\": 2},})\n      })\n    }).finally(() => {\n      // 强制刷新图表，清除图表显示缓存\n      this.inRefresh = false;\n      this.$nextTick(() => {\n        this.inRefresh = true;\n      });\n      this.loading = false;\n    });\n  },\n  },\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.e-chart {\n  width: 100%;\n  height: 300px;\n  margin: 0 auto\n}\n\n</style>\n"]}]}
{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/track/profile/TestProfile.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/track/profile/TestProfile.vue","mtime":1655949681806},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js","mtime":1644314985388},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/ts-loader/index.js","mtime":1644314987889},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IGFwaUJ1cmllZEFtcCBmcm9tICJAL2FwaS90ZXN0QnVyaWVkQW1wIgovLyBpbXBvcnQgVGFibGVQYWdpbmF0aW9uIGZyb20gIkAvY29tbW9uL2NvbXBvbmVudHMvcGFnaW5hdGlvbi9UYWJsZVBhZ2luYXRpb24udnVlIgoKCi8vIGltcG9ydCB7UEFHSU5BVElPTl9TSVpFfSBmcm9tICJAL2NvbnN0YW50IgoKLy8gaW1wb3J0IFRhYmxlSGVhZGVyIGZyb20gIkAvcGFnZXMvdHJhY2svYnVyaWVkL2NvbXBvbmVudHMvVGFibGVIZWFkZXIudnVlIgoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJUZXN0QnVyaWVkIiwKICBjb21wb25lbnRzOiB7CgogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBhc2lkZUhpZGRlbjogZmFsc2UsCiAgICAgIHVpZDogJycsCiAgICAgIHNlbGVjdEV2ZW50OiAnJywKICAgICAgZXZlbnRQcm9wZXJ0aWVzOiB7fSwKICAgICAgdXNlclByb3BlcnRpZXM6IHt9LAogICAgICBjb21tb25Qcm9wZXJ0aWVzOiB7fSwKICAgICAgYWN0aXZpdGllczogW10KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CgogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdFBhZ2VQYXJhbXMoKQogICAgLy8gdGhpcy5nZXRFdmVudExpc3RCeVVzZXIoKQogIH0sCiAgbWV0aG9kczogewogICAgaW5pdFBhZ2VQYXJhbXMoKXsKICAgICAgdGhpcy5nZXRFdmVudExpc3RCeVVzZXIoKQogICAgfSwKICAgIGdldEV2ZW50TGlzdEJ5VXNlcigpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICBjb25zb2xlLmxvZygnZ2V0RXZlbnRMaXN0QnlVc2VyJywgdGhpcy51aWQpCiAgICAgIGFwaUJ1cmllZEFtcC5HZXRFdmVudEJ5VXNlcih7dWlkOiB0aGlzLnVpZCwgZXZlbnRLZXlzOiB0aGlzLnNlbGVjdEV2ZW50fSkudGhlbihyZXMgPT4gewoKICAgICAgICB0aGlzLmFjdGl2aXRpZXMgPSBbXQogICAgICAgIGZvciAobGV0IGV2ZW50IG9mIHJlcy5kYXRhLmRhdGEpewogICAgICAgICAgdGhpcy5hY3Rpdml0aWVzLnB1c2goCiAgICAgICAgICAgIHtldmVudF9rZXk6IGV2ZW50LmV2ZW50S2V5LCB1dWlkOmV2ZW50LnV1aWQsIHJvdzpldmVudC5yb3csCiAgICAgICAgICAgIHVzZXJfcHJvcGVydGllczogZXZlbnQudXNlclByb3BlcnRpZXMsIGV2ZW50X2RhdGV0aW1lOiBldmVudC5ldmVudERhdGV0aW1lLAogICAgICAgICAgZXZlbnRfcHJvcGVydGllczogZXZlbnQuZXZlbnRQcm9wZXJ0aWVzfSkKICAgICAgICB9CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICBpZiAodGhpcy5hY3Rpdml0aWVzLmxlbmd0aCA+IDApIHsgLy8g5Yid5aeL5YyW6aG16Z2iCiAgICAgICAgICAvLyB0aGlzLnNlbGVjdEV2ZW50ID0gdGhpcy5hY3Rpdml0aWVzWzBdLnV1aWQKICAgICAgICAgIHRoaXMuZXZlbnRQcm9wZXJ0aWVzID0gdGhpcy5hY3Rpdml0aWVzWzBdLmV2ZW50X3Byb3BlcnRpZXMKICAgICAgICAgIHRoaXMudXNlclByb3BlcnRpZXMgPSB0aGlzLmFjdGl2aXRpZXNbMF0udXNlcl9wcm9wZXJ0aWVzCiAgICAgICAgICB0aGlzLmFjdGl2aXRpZXNbMF0uY29sb3IgPSAnIzBiYmQ4NycKICAgICAgICB9CgogICAgICAgIGNvbnNvbGUubG9nKCd0aGlzLmFjdGl2aXRpZXMnLCB0aGlzLmFjdGl2aXRpZXMsIHJlcykKICAgICAgfSkuY2F0Y2gocmVzID0+ewogICAgICAgIGNvbnNvbGUubG9nKHJlcykKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICB9KQogICAgfSwKCiAgICBnZXRQcm9wZXJ0aWVzQnlFdmVudChhY3Rpdml0eTogYW55KSB7CiAgICAgIGNvbnNvbGUubG9nKCdnZXRQcm9wZXJ0aWVzQnlFdmVudCcsIHRoaXMudWlkLCBhY3Rpdml0eSkKICAgICAgdGhpcy5ldmVudFByb3BlcnRpZXMgPSB7fQogICAgICB0aGlzLnVzZXJQcm9wZXJ0aWVzID0ge30KICAgICAgdGhpcy5jb21tb25Qcm9wZXJ0aWVzID0ge30KICAgICAgY29uc29sZS5sb2coJ2dldFByb3BlcnRpZXNCeUV2ZW50JywgdGhpcy5ldmVudFByb3BlcnRpZXMsIGFjdGl2aXR5KQogICAgICAvLyBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShhY3Rpdml0eS5ldmVudF9wcm9wZXJ0aWVzKSkKICAgICAgLy8gbGV0IHRtcF9ldmVudCA9IEpTT04uc3RyaW5naWZ5KGFjdGl2aXR5LmV2ZW50X3Byb3BlcnRpZXMpCiAgICAgIC8vIGxldCB0bXBfdXNlciA9IEpTT04uc3RyaW5naWZ5KGFjdGl2aXR5LnVzZXJfcHJvcGVydGllcykKICAgICAgLy8gY29uc29sZS5sb2coSlNPTi5wYXJzZSh0bXBfZXZlbnQpLCAnSlNPTi5wYXJzZSh0bXApJywgdHlwZW9mIChKU09OLnBhcnNlKEpTT04ucGFyc2UodG1wX2V2ZW50KSkpKQogICAgICAvLyB0aGlzLmV2ZW50UHJvcGVydGllcy5wdXNoKEpTT04ucGFyc2UoSlNPTi5wYXJzZSh0bXBfZXZlbnQpKSkKICAgICAgaWYgKGFjdGl2aXR5ICYmIGFjdGl2aXR5LmV2ZW50X3Byb3BlcnRpZXMpewogICAgICAgIHRoaXMuZXZlbnRQcm9wZXJ0aWVzID0gYWN0aXZpdHkuZXZlbnRfcHJvcGVydGllcwogICAgICB9CgogICAgICBpZiAoYWN0aXZpdHkgJiYgYWN0aXZpdHkudXNlcl9wcm9wZXJ0aWVzKXsKICAgICAgICB0aGlzLnVzZXJQcm9wZXJ0aWVzID0gYWN0aXZpdHkudXNlcl9wcm9wZXJ0aWVzCiAgICAgIH0KCiAgICAgIC8vIHRoaXMudXNlclByb3BlcnRpZXMucHVzaChKU09OLnBhcnNlKEpTT04ucGFyc2UodG1wX3VzZXIpKSkKICAgICAgdGhpcy5jaGFuZ2VDb2xvcihhY3Rpdml0eSkKICAgIH0sCiAgICBjaGFuZ2VDb2xvcihhY3Rpdml0eTogYW55KXsKICAgICAgLy8g5pu05paw6YCJ5Lit54q25oCBCiAgICAgIGZvciAobGV0IGFjdCBvZiB0aGlzLmFjdGl2aXRpZXMpewogICAgICAgIGlmIChhY3Rpdml0eS51dWlkID09IGFjdC51dWlkKXsKICAgICAgICAgIGFjdC5jb2xvciA9ICcjMGJiZDg3JwogICAgICAgIH1lbHNlewogICAgICAgICAgYWN0LmNvbG9yID0gJyM5MDkzOTknCiAgICAgICAgfQogICAgICB9CiAgICB9CgogIH0KfQo="},{"version":3,"sources":["TestProfile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmGA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"TestProfile.vue","sourceRoot":"src/pages/track/profile","sourcesContent":["<template>\n  <el-container v-loading=\"loading\">\n\n    <el-aside v-if=\"!asideHidden\">\n      <div>\n        <el-input v-model=\"uid\" placeholder=\"UID(未登录时不用填写)\" size=\"small\" @change=\"getEventListByUser\">\n          <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getEventListByUser\"></el-button>\n        </el-input>\n      </div>\n      <div>\n\n        <el-timeline >\n          <el-timeline-item\n            @click.native=\"getPropertiesByEvent(activity)\"\n            v-for=\"activity in activities\"\n\n            :key=\"activity.row\"\n            :color=\"activity.color\"\n            :timestamp=\"activity.event_datetime\">\n            {{ activity.event_key }}\n          </el-timeline-item>\n        </el-timeline>\n\n      </div>\n\n\n    </el-aside>\n    <el-main >\n      <el-card>\n        <div slot=\"header\" class=\"clearfix\" >\n          <p align=\"left\" style=\"font-size: medium;font-weight: bolder\">事件属性\n<!--            <button type=\"button\" @click=\"doCopy('add me!')\" >Copy!</button>-->\n          </p>\n        </div>\n        <div>\n          <div v-if=\"JSON.stringify(eventProperties)==='{}'\" style=\"font-size: 14px; color: #909399; text-align: center;\">\n            <span>暂无数据</span>\n          </div>\n          <div v-for=\"(key, index) in eventProperties\" :key=\"index\" align=\"left\">\n              <span style=\"font-weight: bold;font-size: medium\">{{ index }}  </span>\n              <span style=\"font-size: medium\">: {{ key }}</span>\n              <p></p>\n\n            <!--          <json-viewer :value=\"prop\" :expand-depth=\"5\" copyable sort></json-viewer>-->\n\n          </div>\n\n<!--          <div v-for=\"prop in eventProperties\" :key=\"prop\" align=\"left\">-->\n<!--            <div v-for=\"(key, index) in prop\" :key=\"key\">-->\n<!--              <span style=\"font-weight: bold;font-size: medium\">{{ index }}  </span>-->\n<!--              <span style=\"font-size: medium\">: {{ key }}</span>-->\n<!--              <p></p>-->\n<!--            </div>-->\n<!--            &lt;!&ndash;          <json-viewer :value=\"prop\" :expand-depth=\"5\" copyable sort></json-viewer>&ndash;&gt;-->\n\n<!--          </div>-->\n        </div>\n\n      </el-card>\n      <el-card>\n        <div slot=\"header\" class=\"clearfix\">\n          <p align=\"left\" style=\"font-size: medium;font-weight: bolder\">用户属性</p>\n        </div>\n        <div v-if=\"JSON.stringify(userProperties)==='{}'\" style=\"font-size: 14px; color: #909399; text-align: center;\">\n          <span>暂无数据</span>\n        </div>\n        <div v-for=\"(key, index) in userProperties\" :key=\"index\" align=\"left\">\n            <span style=\"font-weight: bold;font-size: medium\">{{ index }}  </span>\n            <span style=\"font-size: medium\">: {{ key }}</span>\n          <p></p>\n        </div>\n      </el-card>\n      <el-card>\n        <div slot=\"header\" class=\"clearfix\" >\n          <p align=\"left\" style=\"font-size: medium;font-weight: bolder\">公共属性</p>\n        </div>\n        <div>\n          <div v-if=\"JSON.stringify(commonProperties)==='{}'\" style=\"font-size: 14px; color: #909399; text-align: center;\">\n            <span>暂无数据</span>\n          </div>\n          <div v-for=\"prop in commonProperties\" :key=\"prop\" align=\"left\">\n            <div v-for=\"(key, index) in prop\" :key=\"index\">\n              <span style=\"font-weight: bold;font-size: medium\">{{ index }}  </span>\n              <span style=\"font-size: medium\">: {{ key }}</span>\n              <p></p>\n            </div>\n            <!--          <json-viewer :value=\"prop\" :expand-depth=\"5\" copyable sort></json-viewer>-->\n\n          </div>\n        </div>\n\n      </el-card>\n    </el-main>\n\n  </el-container>\n</template>\n\n<script lang=\"ts\">\n\nimport apiBuriedAmp from \"@/api/testBuriedAmp\"\n// import TablePagination from \"@/common/components/pagination/TablePagination.vue\"\n\n\n// import {PAGINATION_SIZE} from \"@/constant\"\n\n// import TableHeader from \"@/pages/track/buried/components/TableHeader.vue\"\n\nexport default {\n  name: \"TestBuried\",\n  components: {\n\n  },\n  data() {\n    return {\n      loading: false,\n      asideHidden: false,\n      uid: '',\n      selectEvent: '',\n      eventProperties: {},\n      userProperties: {},\n      commonProperties: {},\n      activities: []\n    }\n  },\n  computed: {\n\n  },\n  mounted() {\n    this.initPageParams()\n    // this.getEventListByUser()\n  },\n  methods: {\n    initPageParams(){\n      this.getEventListByUser()\n    },\n    getEventListByUser() {\n      this.loading = true\n      console.log('getEventListByUser', this.uid)\n      apiBuriedAmp.GetEventByUser({uid: this.uid, eventKeys: this.selectEvent}).then(res => {\n\n        this.activities = []\n        for (let event of res.data.data){\n          this.activities.push(\n            {event_key: event.eventKey, uuid:event.uuid, row:event.row,\n            user_properties: event.userProperties, event_datetime: event.eventDatetime,\n          event_properties: event.eventProperties})\n        }\n        this.loading = false\n        if (this.activities.length > 0) { // 初始化页面\n          // this.selectEvent = this.activities[0].uuid\n          this.eventProperties = this.activities[0].event_properties\n          this.userProperties = this.activities[0].user_properties\n          this.activities[0].color = '#0bbd87'\n        }\n\n        console.log('this.activities', this.activities, res)\n      }).catch(res =>{\n        console.log(res)\n        this.loading = false\n      })\n    },\n\n    getPropertiesByEvent(activity: any) {\n      console.log('getPropertiesByEvent', this.uid, activity)\n      this.eventProperties = {}\n      this.userProperties = {}\n      this.commonProperties = {}\n      console.log('getPropertiesByEvent', this.eventProperties, activity)\n      // console.log(JSON.stringify(activity.event_properties))\n      // let tmp_event = JSON.stringify(activity.event_properties)\n      // let tmp_user = JSON.stringify(activity.user_properties)\n      // console.log(JSON.parse(tmp_event), 'JSON.parse(tmp)', typeof (JSON.parse(JSON.parse(tmp_event))))\n      // this.eventProperties.push(JSON.parse(JSON.parse(tmp_event)))\n      if (activity && activity.event_properties){\n        this.eventProperties = activity.event_properties\n      }\n\n      if (activity && activity.user_properties){\n        this.userProperties = activity.user_properties\n      }\n\n      // this.userProperties.push(JSON.parse(JSON.parse(tmp_user)))\n      this.changeColor(activity)\n    },\n    changeColor(activity: any){\n      // 更新选中状态\n      for (let act of this.activities){\n        if (activity.uuid == act.uuid){\n          act.color = '#0bbd87'\n        }else{\n          act.color = '#909399'\n        }\n      }\n    }\n\n  }\n}\n</script>\n\n<style lang=\"css\">\n\n.clearfix:before\n</style>\n\n<style lang=\"scss\" scoped>\n.el-row {\n  margin-bottom: 20px;\n  &:last-child {\n    margin-bottom: 0;\n  }\n}\n.el-col {\n  border-radius: 4px;\n}\n.el-card {\n  margin-top: 20px;\n}\n.el-timeline {\n  margin-top: 10px;\n  margin-left: 10px;\n  padding: 20px;\n}\n\n\n.el-table .warning-row {\n  background-color: #8f1e45;\n}\n//.bg-purple-dark {\n//  background: #99a9bf;\n//}\n//.bg-purple {\n//  background: #d3dce6;\n//}\n//.bg-purple-light {\n//  background: #e5e9f2;\n//}\n.grid-content {\n  border-radius: 4px;\n  min-height: 36px;\n}\n.row-bg {\n  padding: 5px 0;\n  background-color: #f9fafc;\n  margin-right: 0;\n}\n.tableBox {\n  th{\n    height: 30px;\n  }\n  td {\n    height: 30px;\n  }\n}\n\n\n\n</style>\n\n"]}]}
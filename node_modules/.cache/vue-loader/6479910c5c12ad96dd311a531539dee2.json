{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/track/review/components/TestCaseReviewEdit.vue?vue&type=style&index=0&id=582f57e4&lang=scss&scoped=true&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/track/review/components/TestCaseReviewEdit.vue","mtime":1655949681807},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/css-loader/dist/cjs.js","mtime":1644298105513},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1644314988580},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js","mtime":1644298105780},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/sass-loader/dist/cjs.js","mtime":1644314983366},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCkBpbXBvcnQgInNyYy9hc3NldHMvY3NzL2Rpc3BsYXkiOwpAaW1wb3J0ICJzcmMvYXNzZXRzL2Nzcy91dGlscyI7CgouZGlhbG9nLXRpdGxlIHsKICBAZXh0ZW5kICVkaWFsb2ctdGl0bGUKfQoKLnJvdy1jb250ZW50IHsKICBtYXJnaW4tdG9wOiAxMHB4OwogIEBleHRlbmQgJWZsZXgtbGVmdC1jZW50ZXItcm93Owp9Cg=="},{"version":3,"sources":["TestCaseReviewEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuMA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"TestCaseReviewEdit.vue","sourceRoot":"src/pages/track/review/components","sourcesContent":["<template>\n  <div>\n    <el-dialog\n      :close-on-click-modal=\"false\"\n      :visible.sync=\"dialogFormVisible\"\n      class=\"dialog-title\"\n      title=\"编辑用例评审\"\n      width=\"65%\"\n      @close=\"close\"\n    >\n\n      <el-form ref=\"reviewForm\" :model=\"form\" :rules=\"rules\">\n\n        <el-row>\n          <el-col :offset=\"1\" :span=\"10\">\n            <el-form-item\n              :label-width=\"formLabelWidth\"\n              label=\"评审名称\"\n              placeholder=\"请输入评审名称\"\n              prop=\"name\"\n            >\n              <el-input v-model=\"form.name\"/>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"10\">\n            <el-form-item :label-width=\"formLabelWidth\" label=\"所属项目\" prop=\"projKey\">\n              <el-select\n                v-model=\"form.projKey\"\n                :disabled=\"true\"\n                filterable\n                placeholder=\"请选择所属项目\"\n                style=\"width: 100%\"\n              >\n                <el-option\n                  v-for=\"item in projects\"\n                  :key=\"item.key\"\n                  :label=\"item.name\"\n                  :value=\"item.key\"\n                >\n                </el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n        </el-row>\n\n        <el-row>\n          <el-col :offset=\"1\" :span=\"10\">\n            <el-form-item :label-width=\"formLabelWidth\" label=\"评审人\" prop=\"reviewer\">\n              <el-select\n                v-model=\"form.reviewerList\"\n                filterable\n                multiple\n                placeholder=\"请选择评审人\"\n              >\n                <el-option\n                  v-for=\"item in reviewerOptions\"\n                  :key=\"item.value\"\n                  :label=\"item.text\"\n                  :value=\"item.value\"\n                >\n                </el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"10\">\n            <el-form-item :label-width=\"formLabelWidth\" label=\"截止时间\" prop=\"targetEnd\">\n              <el-date-picker\n                v-model=\"form.targetEnd\"\n                :picker-options=\"pickerOptionsStart\"\n                placeholder=\"选择日期\"\n                type=\"datetime\"\n                value-format=\"yyyy-MM-dd HH:mm:ss\"\n              />\n            </el-form-item>\n          </el-col>\n        </el-row>\n\n\n        <el-row class=\"row-content\">\n          <el-col :offset=\"1\" :span=\"20\">\n            <el-form-item :label-width=\"formLabelWidth\" label=\"描述\" prop=\"description\">\n              <el-input\n                v-model=\"form.description\"\n                :autosize=\"{ minRows: 2, maxRows: 4}\"\n                :rows=\"2\"\n                placeholder=\"请输入内容\"\n                type=\"textarea\"\n              />\n            </el-form-item>\n          </el-col>\n        </el-row>\n\n        <el-row v-if=\"operation === operationEnum.EDIT\" class=\"row-content\">\n          <el-col :offset=\"1\" :span=\"20\">\n            <el-form-item :label-width=\"formLabelWidth\" label=\"当前状态\" prop=\"status\">\n              <test-review-status-button :status=\"form.status\" @statusChange=\"statusChange\"/>\n            </el-form-item>\n          </el-col>\n        </el-row>\n\n      </el-form>\n\n      <template slot=\"footer\">\n        <dialog-footer @cancel=\"dialogFormVisible = false\" @confirm=\"saveReview\"/>\n      </template>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {testReviewApi} from \"@/api\"\nimport {RequestUpdateTestCaseReview} from \"@/api/types/testReview\"\nimport {typeReviewData} from \"@/api/types/testReviewType\"\nimport variables from \"@/assets/css/utils.scss\"\nimport DialogFooter from \"@/common/components/DialogFooter.vue\"\nimport {datePickerOptionsStart} from \"@/common/utils\"\nimport {operationEnum} from \"@/constant/TestCase\"\nimport {reviewStatusEnum} from \"@/constant/TestReivew\"\nimport TestReviewStatusButton from \"@/pages/track/review/commom/TestReviewStatusButton.vue\"\nimport {reviewForm, reviewFormRules} from \"@/pages/track/review/forms\"\nimport {cloneDeep} from \"lodash\"\n\nexport default {\n  name: \"TestCaseReviewEdit\",\n  components: {DialogFooter, TestReviewStatusButton},\n  data() {\n    return {\n      operationEnum: operationEnum,\n      projects: this.projects,\n      dialogFormVisible: false,\n      form: reviewForm,\n      rules: reviewFormRules,\n      operation: '',\n      reviewerOptions: [],\n      pickerOptionsStart: {},\n    }\n  },\n  props: {\n    condition: Object,\n  },\n  inject: ['projects'],\n  computed: {\n    formLabelWidth() {\n      return variables['formLabelWidth']\n    },\n  },\n  mounted() {\n    this.$eventBus.$on(\"caseReviewEdit\", (caseReview: typeReviewData) => {\n      this.open(caseReview)\n    })\n  },\n  methods: {\n    initOptions() {\n      this.reviewerOptions = this.condition.reviewerOptions\n    },\n    initDateOptions() {\n      this.pickerOptionsStart = datePickerOptionsStart()\n    },\n    open(caseReview: typeReviewData) {\n      this.initOptions()\n      this.initDateOptions()\n      //修改\n      if (caseReview) {\n        this.form = cloneDeep(caseReview)\n        this.operation = operationEnum.EDIT\n      }\n      // console.log(this.form)\n      this.dialogFormVisible = true\n    },\n    saveReview() {\n      this.$refs['reviewForm'].validate((valid: boolean) => {\n        if (valid) {\n          let reviewBody: RequestUpdateTestCaseReview = {\n            name: this.form.name,\n            targetEnd: this.form.targetEnd || null,\n            reviewer: this.form.reviewerList,\n            status: this.form.status,\n          }\n          testReviewApi.updateTestCaseReview(this.form.id, reviewBody)\n            .then(() => {\n              this.$emit(\"refresh\")\n              this.close()\n            })\n        }\n      })\n    },\n    statusChange(status: reviewStatusEnum) {\n      this.form.status = status\n      this.$forceUpdate()\n    },\n    close() {\n      this.dialogFormVisible = false\n    },\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"src/assets/css/display\";\n@import \"src/assets/css/utils\";\n\n.dialog-title {\n  @extend %dialog-title\n}\n\n.row-content {\n  margin-top: 10px;\n  @extend %flex-left-center-row;\n}\n</style>\n\n"]}]}
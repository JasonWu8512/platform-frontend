{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/testTools/prMergeConfig.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/testTools/prMergeConfig.vue","mtime":1655949681779},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js","mtime":1644314985388},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/ts-loader/index.js","mtime":1644314987889},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHtnaXRsYWJDaGF0QXBpfSBmcm9tICJAL2FwaSIKaW1wb3J0IHsKICBSZXF1ZXN0Q3JlYXRlR2l0bGFiQ2hhdENvbmZpZywKICBSZXF1ZXN0R2V0R2l0bGFiQ2hhdENvbmZpZ0xpc3QsCiAgUmVxdWVzdFVwZGF0ZUdpdGxhYkNoYXRDb25maWcKfSBmcm9tICJAL2FwaS90eXBlcy9naXRsYWIiCmltcG9ydCB7dHlwZUdpdGxhYkNoYXREYXRhfSBmcm9tICJAL2FwaS90eXBlcy9naXRsYWJUeXBlIgppbXBvcnQgdmFyaWFibGVzIGZyb20gIkAvYXNzZXRzL2Nzcy91dGlscy5zY3NzIgppbXBvcnQgRGlhbG9nRm9vdGVyIGZyb20gJ0AvY29tbW9uL2NvbXBvbmVudHMvRGlhbG9nRm9vdGVyLnZ1ZScKaW1wb3J0IFRhYmxlUGFnaW5hdGlvbiBmcm9tICJAL2NvbW1vbi9jb21wb25lbnRzL3BhZ2luYXRpb24vVGFibGVQYWdpbmF0aW9uLnZ1ZSIKaW1wb3J0IFRhYmxlSGVhZGVyIGZyb20gIkAvY29tbW9uL2NvbXBvbmVudHMvVGFibGVIZWFkZXIudnVlIgppbXBvcnQgVGFibGVPcGVyYXRvciBmcm9tICJAL2NvbW1vbi9jb21wb25lbnRzL1RhYmxlT3BlcmF0b3IudnVlIgppbXBvcnQge19maWx0ZXJ9IGZyb20gIkAvY29tbW9uL3V0aWxzIgppbXBvcnQge1BBR0lOQVRJT05fU0laRX0gZnJvbSAiQC9jb25zdGFudCIKaW1wb3J0IHtvcGVyYXRpb25FbnVtfSBmcm9tICJAL2NvbnN0YW50L0dpdGxhYiIKaW1wb3J0IHtwbGFuU3RhZ2VFbnVtfSBmcm9tICJAL2NvbnN0YW50L1Rlc3RQbGFuIgppbXBvcnQge3ByTWVyZ2VkTm90aWZ5UnVsZXMsIHByTWVyZ2VkUFJGb3JtfSBmcm9tICJAL3BhZ2VzL3Rlc3RUb29scy9mb3JtIgppbXBvcnQge2Nsb25lRGVlcH0gZnJvbSAibG9kYXNoIgoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJwck1lcmdlQ29uZmlnIiwKICBjb21wb25lbnRzOiB7CiAgICBUYWJsZU9wZXJhdG9yLAogICAgVGFibGVIZWFkZXIsCiAgICBUYWJsZVBhZ2luYXRpb24sCiAgICBEaWFsb2dGb290ZXIsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY29uZGl0aW9uOiB7fSwKICAgICAgb3BlcmF0aW9uRW51bTogb3BlcmF0aW9uRW51bSwKICAgICAgcGxhblN0YWdlRW51bTogcGxhblN0YWdlRW51bSwKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgIHBhZ2VTaXplOiBQQUdJTkFUSU9OX1NJWkUuTEFSR0UsCiAgICAgIHRvdGFsOiAwLAogICAgICBmb3JtOiBwck1lcmdlZFBSRm9ybSwKICAgICAgcnVsZXM6IHByTWVyZ2VkTm90aWZ5UnVsZXMsCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOiBmYWxzZSwKICAgICAgb3BlcmF0aW9uOiAnJywKICAgICAgcHJvamVjdFBhdGhPcHRpb25zOiBbXSwKICAgICAgaXNKaXJhQWN0aXZlOiAxLAogICAgICBzdGF0dXM6ICcnCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgZm9ybUxhYmVsV2lkdGgoKSB7CiAgICAgIHJldHVybiAnODBweCcKICAgIH0sCiAgICBsb2FkaW5nKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUubG9hZGluZwogICAgfSwKICAgIHRhYmxlMkJ0bldpZHRoKCkgewogICAgICByZXR1cm4gdmFyaWFibGVzWyd0YWJsZTJCdG5XaWR0aCddCiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5pbml0VGFibGVEYXRhKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXRUYWJsZURhdGEoKSB7CiAgICAgIHRoaXMuc2V0UHJvamVjdFBhdGhPcHRpb25zKCkKICAgICAgdGhpcy5nZXREYXRhKCkKICAgIH0sCiAgICBzZXRQcm9qZWN0UGF0aE9wdGlvbnMoKSB7CiAgICAgIGdpdGxhYkNoYXRBcGkuZ2V0QWxsR2l0bGFiUHJvamVjdHMoKQogICAgICAgIC50aGVuKCh7ZGF0YX0pID0+IHsKICAgICAgICAgIHRoaXMucHJvamVjdFBhdGhPcHRpb25zID0gZGF0YS5kYXRhCiAgICAgICAgfSkKICAgIH0sCiAgICBidWlsZFBhcmFtcygpIHsKICAgICAgbGV0IGJvZHk6IFJlcXVlc3RDcmVhdGVHaXRsYWJDaGF0Q29uZmlnIHwgUmVxdWVzdFVwZGF0ZUdpdGxhYkNoYXRDb25maWcgPSB7CiAgICAgICAgcHJvamVjdDogdGhpcy5mb3JtLnByb2plY3QsCiAgICAgICAgaXNKaXJhQWN0aXZlOiB0aGlzLmZvcm0uaXNKaXJhQWN0aXZlLAogICAgICB9CiAgICAgIHJldHVybiBib2R5CiAgICB9LAogICAgZ2V0RGF0YSh2YWx1ZT86IHN0cmluZykgewogICAgICBjb25zdCBwYXJhbXM6IFJlcXVlc3RHZXRHaXRsYWJDaGF0Q29uZmlnTGlzdCA9IHsKICAgICAgICBvZmZzZXQ6IHRoaXMucGFnZVNpemUgKiAodGhpcy5jdXJyZW50UGFnZSAtIDEpLAogICAgICAgIGxpbWl0OiB0aGlzLnBhZ2VTaXplLAogICAgICAgIHByb2plY3Q6IHZhbHVlCiAgICAgIH0KCiAgICAgIHRoaXMuY29uZmlnRmlsdGVyID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSh0aGlzLiRyb3V0ZS5wYXRoKQogICAgICB0aGlzLmNvbmZpZ0ZpbHRlciA9IHRoaXMuY29uZmlnRmlsdGVyID8gSlNPTi5wYXJzZSh0aGlzLmNvbmZpZ0ZpbHRlcikgOiB7fQogICAgICBpZiAoSlNPTi5zdHJpbmdpZnkodGhpcy5jb25maWdGaWx0ZXIpICE9PSAie30iKSB7CiAgICAgICAgT2JqZWN0LmFzc2lnbihwYXJhbXMsIHRoaXMuY29uZmlnRmlsdGVyKQogICAgICAgIHRoaXMuJHJlZnMudGFibGUuY29sdW1ucy5mb3JFYWNoKChpdGVtOiBhbnkpID0+IHsKICAgICAgICAgIGl0ZW0uZmlsdGVyZWRWYWx1ZSA9IHRoaXMuY29uZmlnRmlsdGVyW2l0ZW0uY29sdW1uS2V5XQogICAgICAgIH0pCiAgICAgIH0KCiAgICAgIGdpdGxhYkNoYXRBcGkuZ2V0R2l0bGFiUFJDb25maWdMaXN0KHBhcmFtcykKICAgICAgICAudGhlbigoe2RhdGF9KSA9PiB7CiAgICAgICAgICB0aGlzLnRvdGFsID0gZGF0YS50b3RhbAogICAgICAgICAgdGhpcy50YWJsZURhdGEgPSBkYXRhLmRhdGEKICAgICAgICAgIHRoaXMudGFibGVEYXRhLmZvckVhY2goKGl0ZW06IHR5cGVHaXRsYWJDaGF0RGF0YSkgPT4gewogICAgICAgICAgICBpZihpdGVtLmlzSmlyYUFjdGl2ZSA9PT0gMSkgewogICAgICAgICAgICAgIGl0ZW0uc3RhdHVzID0gIuW3sua/gOa0uyIKICAgICAgICAgICAgfWVsc2UgewogICAgICAgICAgICAgIGl0ZW0uc3RhdHVzID0gIuacqua/gOa0uyIKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICB9KQogICAgfSwKICAgIHNhdmVDb25maWcoKSB7CiAgICAgIHRoaXMuJHJlZnMucHJNZXJnZWRQUkZvcm0udmFsaWRhdGUoKHZhbGlkOiBib29sZWFuKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBpZiAodGhpcy5vcGVyYXRpb24gPT09IG9wZXJhdGlvbkVudW0uQUREKSB7CiAgICAgICAgICAgIGNvbnN0IGJvZHk6IFJlcXVlc3RDcmVhdGVHaXRsYWJDaGF0Q29uZmlnID0gdGhpcy5idWlsZFBhcmFtcygpCiAgICAgICAgICAgIGdpdGxhYkNoYXRBcGkuY3JlYXRlR2l0bGFiUFJDb25maWcoYm9keSkKICAgICAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKQogICAgICAgICAgICAgIH0pCiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMub3BlcmF0aW9uID09PSBvcGVyYXRpb25FbnVtLkVESVQpIHsKICAgICAgICAgICAgY29uc3QgYm9keTogUmVxdWVzdFVwZGF0ZUdpdGxhYkNoYXRDb25maWcgPSB0aGlzLmJ1aWxkUGFyYW1zKCkKICAgICAgICAgICAgZ2l0bGFiQ2hhdEFwaS51cGRhdGVHaXRsYWJQUkNvbmZpZyh0aGlzLmZvcm0uaWQsIGJvZHkpCiAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCkKICAgICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBoYW5kbGVBZGRPckVkaXQoZ2l0bGFiQ2hhdENvbmZpZz86IHR5cGVHaXRsYWJDaGF0RGF0YSkgewogICAgICBjb25zb2xlLmxvZyhnaXRsYWJDaGF0Q29uZmlnKQogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgaWYgKHRoaXMuJHJlZnMucHJNZXJnZWRQUkZvcm0pIHsKICAgICAgICAgIHRoaXMuJHJlZnMucHJNZXJnZWRQUkZvcm0ucmVzZXRGaWVsZHMoKQogICAgICAgIH0KICAgICAgICB0aGlzLm9wZXJhdGlvbiA9IG9wZXJhdGlvbkVudW0uQURECiAgICAgICAgLy/kv67mlLkKICAgICAgICBpZiAoZ2l0bGFiQ2hhdENvbmZpZykgewogICAgICAgICAgdGhpcy5vcGVyYXRpb24gPSBvcGVyYXRpb25FbnVtLkVESVQKICAgICAgICAgIHRoaXMuZm9ybSA9IGNsb25lRGVlcChnaXRsYWJDaGF0Q29uZmlnKQogICAgICAgICAgdGhpcy5mb3JtLmlzSmlyYUFjdGl2ZSA9IFN0cmluZyh0aGlzLmZvcm0uaXNKaXJhQWN0aXZlKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmZvcm0gPSBwck1lcmdlZFBSRm9ybQogICAgICAgIH0KICAgICAgICB0aGlzLnNldFByb2plY3RQYXRoT3B0aW9ucygpCiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlRGVsZXRlKGdpdGxhYkNoYXRDb25maWc6IHR5cGVHaXRsYWJDaGF0RGF0YSkgewogICAgICB0aGlzLiRhbGVydCgn56Gu6K6k5Yig6Zmk6K+l6YWN572uPycsICcnLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgY2FsbGJhY2s6IChhY3Rpb246IHN0cmluZykgPT4gewogICAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ2NvbmZpcm0nKSB7CiAgICAgICAgICAgIGdpdGxhYkNoYXRBcGkuZGVsZXRlR2l0bGFiUFJDb25maWcoZ2l0bGFiQ2hhdENvbmZpZy5pZCkKICAgICAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKQogICAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGhhbmRsZVNlYXJjaCh2YWx1ZT86IHN0cmluZykgewogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gMQogICAgICB0aGlzLmdldERhdGEodmFsdWUpCiAgICB9LAogICAgcmVmcmVzaCgpIHsKICAgICAgdGhpcy5pbml0VGFibGVEYXRhKCkKICAgIH0sCiAgICBmaWx0ZXIoZmlsdGVyczogYW55KSB7CiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSAxCiAgICAgIF9maWx0ZXIoZmlsdGVycywgdGhpcy5jb25maWdGaWx0ZXIsIHRoaXMuJHJvdXRlLnBhdGgpCiAgICAgIHRoaXMuaW5pdFRhYmxlRGF0YSgpCiAgICB9LAogIH0sCn0K"},{"version":3,"sources":["prMergeConfig.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"prMergeConfig.vue","sourceRoot":"src/pages/testTools","sourcesContent":["<template>\n  <div>\n    <el-card class=\"card-content\">\n      <template slot=\"header\">\n        <table-header\n          :condition=\"condition\"\n          create-tip=\"创建jira联动PR配置\"\n          placeholder=\"根据项目名称搜索\"\n          @create=\"handleAddOrEdit\"\n          @search=\"handleSearch\"\n        >\n          <template slot=\"title\">\n            <div>jira联动PR配置</div>\n          </template>\n        </table-header>\n      </template>\n      <el-table ref=\"table\" v-loading=\"loading\" :data=\"tableData\" @filter-change=\"filter\">\n\n        <!--  项目名称  -->\n        <el-table-column label=\"项目名称\" prop=\"project\" show-overflow-tooltip/>\n\n        <!--  激活状态  -->\n        <el-table-column label=\"激活状态\" prop=\"status\"/>\n\n        <!--  操作  -->\n        <el-table-column :width=\"table2BtnWidth\" label=\"操作\">\n          <template slot-scope=\"scope\">\n            <table-operator\n              show-delete\n              show-edit\n              @deleteClick=\"handleDelete(scope.row)\"\n              @editClick=\"handleAddOrEdit(scope.row)\"\n            />\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <table-pagination\n        :change=\"initTableData\"\n        :current-page.sync=\"currentPage\"\n        :page-size.sync=\"pageSize\"\n        :total=\"total\"\n      />\n    </el-card>\n\n    <el-dialog\n      :close-on-click-modal=\"false\"\n      :title=\"operation === operationEnum.EDIT? '编辑jira联动PR配置' : '创建jira联动PR配置'\"\n      :visible.sync=\"dialogFormVisible\"\n      class=\"dialog-title\"\n      width=\"65%\"\n    >\n\n      <el-form ref=\"prMergedPRForm\" :model=\"form\" :rules=\"rules\">\n\n        <el-row>\n          <el-col :offset=\"1\" :span=\"10\">\n            <el-form-item :label-width=\"formLabelWidth\" label=\"项目\" prop=\"project\">\n              <el-select v-model=\"form.project\" filterable placeholder=\"请选择项目\">\n                <el-option\n                  v-for=\"item in projectPathOptions\"\n                  :key=\"item.path\"\n                  :label=\"item.project\"\n                  :value=\"item.path\"\n                />\n              </el-select>\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"10\">\n            <el-form-item :label-width=\"formLabelWidth\" label=\"开通\" prop=\"isJiraActive\">\n              <el-switch\n                v-model=\"form.isJiraActive\"\n                active-color=\"#13ce66\"\n                inactive-color=\"#ff4949\"\n                active-value=\"1\"\n                inactive-value=\"0\">\n              </el-switch>\n            </el-form-item>\n          </el-col>\n        </el-row>\n\n      </el-form>\n\n      <template slot=\"footer\">\n        <dialog-footer @cancel=\"dialogFormVisible = false\" @confirm=\"saveConfig\"/>\n      </template>\n    </el-dialog>\n  </div>\n\n</template>\n\n<script lang=\"ts\">\nimport {gitlabChatApi} from \"@/api\"\nimport {\n  RequestCreateGitlabChatConfig,\n  RequestGetGitlabChatConfigList,\n  RequestUpdateGitlabChatConfig\n} from \"@/api/types/gitlab\"\nimport {typeGitlabChatData} from \"@/api/types/gitlabType\"\nimport variables from \"@/assets/css/utils.scss\"\nimport DialogFooter from '@/common/components/DialogFooter.vue'\nimport TablePagination from \"@/common/components/pagination/TablePagination.vue\"\nimport TableHeader from \"@/common/components/TableHeader.vue\"\nimport TableOperator from \"@/common/components/TableOperator.vue\"\nimport {_filter} from \"@/common/utils\"\nimport {PAGINATION_SIZE} from \"@/constant\"\nimport {operationEnum} from \"@/constant/Gitlab\"\nimport {planStageEnum} from \"@/constant/TestPlan\"\nimport {prMergedNotifyRules, prMergedPRForm} from \"@/pages/testTools/form\"\nimport {cloneDeep} from \"lodash\"\n\nexport default {\n  name: \"prMergeConfig\",\n  components: {\n    TableOperator,\n    TableHeader,\n    TablePagination,\n    DialogFooter,\n  },\n  data() {\n    return {\n      condition: {},\n      operationEnum: operationEnum,\n      planStageEnum: planStageEnum,\n      tableData: [],\n      currentPage: 1,\n      pageSize: PAGINATION_SIZE.LARGE,\n      total: 0,\n      form: prMergedPRForm,\n      rules: prMergedNotifyRules,\n      dialogFormVisible: false,\n      operation: '',\n      projectPathOptions: [],\n      isJiraActive: 1,\n      status: ''\n    }\n  },\n  computed: {\n    formLabelWidth() {\n      return '80px'\n    },\n    loading() {\n      return this.$store.state.loading\n    },\n    table2BtnWidth() {\n      return variables['table2BtnWidth']\n    }\n  },\n  mounted() {\n    this.initTableData()\n  },\n  methods: {\n    initTableData() {\n      this.setProjectPathOptions()\n      this.getData()\n    },\n    setProjectPathOptions() {\n      gitlabChatApi.getAllGitlabProjects()\n        .then(({data}) => {\n          this.projectPathOptions = data.data\n        })\n    },\n    buildParams() {\n      let body: RequestCreateGitlabChatConfig | RequestUpdateGitlabChatConfig = {\n        project: this.form.project,\n        isJiraActive: this.form.isJiraActive,\n      }\n      return body\n    },\n    getData(value?: string) {\n      const params: RequestGetGitlabChatConfigList = {\n        offset: this.pageSize * (this.currentPage - 1),\n        limit: this.pageSize,\n        project: value\n      }\n\n      this.configFilter = sessionStorage.getItem(this.$route.path)\n      this.configFilter = this.configFilter ? JSON.parse(this.configFilter) : {}\n      if (JSON.stringify(this.configFilter) !== \"{}\") {\n        Object.assign(params, this.configFilter)\n        this.$refs.table.columns.forEach((item: any) => {\n          item.filteredValue = this.configFilter[item.columnKey]\n        })\n      }\n\n      gitlabChatApi.getGitlabPRConfigList(params)\n        .then(({data}) => {\n          this.total = data.total\n          this.tableData = data.data\n          this.tableData.forEach((item: typeGitlabChatData) => {\n            if(item.isJiraActive === 1) {\n              item.status = \"已激活\"\n            }else {\n              item.status = \"未激活\"\n            }\n          })\n        })\n    },\n    saveConfig() {\n      this.$refs.prMergedPRForm.validate((valid: boolean) => {\n        if (valid) {\n          if (this.operation === operationEnum.ADD) {\n            const body: RequestCreateGitlabChatConfig = this.buildParams()\n            gitlabChatApi.createGitlabPRConfig(body)\n              .then(() => {\n                this.refresh()\n              })\n          } else if (this.operation === operationEnum.EDIT) {\n            const body: RequestUpdateGitlabChatConfig = this.buildParams()\n            gitlabChatApi.updateGitlabPRConfig(this.form.id, body)\n              .then(() => {\n                this.refresh()\n              })\n          }\n          this.dialogFormVisible = false\n        } else {\n          return false\n        }\n      })\n    },\n    handleAddOrEdit(gitlabChatConfig?: typeGitlabChatData) {\n      console.log(gitlabChatConfig)\n      this.dialogFormVisible = true\n      this.$nextTick(() => {\n        if (this.$refs.prMergedPRForm) {\n          this.$refs.prMergedPRForm.resetFields()\n        }\n        this.operation = operationEnum.ADD\n        //修改\n        if (gitlabChatConfig) {\n          this.operation = operationEnum.EDIT\n          this.form = cloneDeep(gitlabChatConfig)\n          this.form.isJiraActive = String(this.form.isJiraActive)\n        } else {\n          this.form = prMergedPRForm\n        }\n        this.setProjectPathOptions()\n      })\n    },\n    handleDelete(gitlabChatConfig: typeGitlabChatData) {\n      this.$alert('确认删除该配置?', '', {\n        confirmButtonText: '确定',\n        showCancelButton: true,\n        cancelButtonText: '取消',\n        callback: (action: string) => {\n          if (action === 'confirm') {\n            gitlabChatApi.deleteGitlabPRConfig(gitlabChatConfig.id)\n              .then(() => {\n                this.refresh()\n              })\n          }\n        }\n      })\n    },\n    handleSearch(value?: string) {\n      this.currentPage = 1\n      this.getData(value)\n    },\n    refresh() {\n      this.initTableData()\n    },\n    filter(filters: any) {\n      this.currentPage = 1\n      _filter(filters, this.configFilter, this.$route.path)\n      this.initTableData()\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"src/assets/css/utils\";\n\n.card-content {\n  overflow-y: auto;\n}\n\n.dialog-title {\n  @extend %dialog-title;\n}\n</style>\n"]}]}
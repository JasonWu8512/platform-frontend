{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/autoEventTrack/AutoEventTrackConfigList.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/autoEventTrack/AutoEventTrackConfigList.vue","mtime":1670564921517},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js","mtime":1644314985388},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/ts-loader/index.js","mtime":1644314987889},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbXBvcnQge2F1dG9FdmVudFRyYWNrQXBpfSBmcm9tICJAL2FwaSIKaW1wb3J0IFRhYmxlUGFnaW5hdGlvbiBmcm9tICJAL2NvbW1vbi9jb21wb25lbnRzL3BhZ2luYXRpb24vVGFibGVQYWdpbmF0aW9uLnZ1ZSIKaW1wb3J0IFRhYmxlSGVhZGVyIGZyb20gIkAvY29tbW9uL2NvbXBvbmVudHMvVGFibGVIZWFkZXIudnVlIgppbXBvcnQgVGFibGVPcGVyYXRvciBmcm9tICJAL2NvbW1vbi9jb21wb25lbnRzL1RhYmxlT3BlcmF0b3IudnVlIgppbXBvcnQge1BBR0lOQVRJT05fU0laRX0gZnJvbSAiQC9jb25zdGFudCIKaW1wb3J0IHtQYXRoTmFtZX0gZnJvbSAiQC9jb25zdGFudC9yb3V0ZURhdGEiCmltcG9ydCBBdXRvRXZlbnRUcmFja0NvbmZpZ0VkaXQgZnJvbSAiQC9wYWdlcy9hdXRvRXZlbnRUcmFjay9jb21wb25lbnRzL0F1dG9FdmVudFRyYWNrQ29uZmlnRWRpdC52dWUiCmV4cG9ydCBkZWZhdWx0IHsKbmFtZTogIkF1dG9FdmVudFRyYWNrQ29uZmlnTGlzdCIsCiAgY29tcG9uZW50czoge1RhYmxlSGVhZGVyLCBUYWJsZVBhZ2luYXRpb24sIFRhYmxlT3BlcmF0b3IsIEF1dG9FdmVudFRyYWNrQ29uZmlnRWRpdH0sCiAgZGF0YSgpIHsKICByZXR1cm4gewogICAgbm9Qb2xsaW5nOiB0cnVlLAogICAgY3JlYXRlVmlzaWJsZTogZmFsc2UsCiAgICBjb25kaXRpb246IHt9LAogICAgdG90YWw6IDAsCiAgICBwYWdlU2l6ZTogUEFHSU5BVElPTl9TSVpFLkxBUkdFLAogICAgY3VycmVudFBhZ2U6IDEsCiAgICB0YWJsZURhdGE6IFtdCiAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGxvYWRpbmcoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5sb2FkaW5nCiAgICB9LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMucG9sbGluZ0RhdGFMaXN0KCkKICB9LAogIGRlc3Ryb3llZCgpIHsKICAgIGNsZWFySW50ZXJ2YWwodGhpcy5teUludGVydmFsKQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0QXV0b0V2ZW50VHJhY2tDb25maWdMaXN0KHZhbHVlPzogc3RyaW5nKSB7CiAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICBsaW1pdDogdGhpcy5wYWdlU2l6ZSwKICAgICAgICBvZmZzZXQ6IHRoaXMucGFnZVNpemUgKiAodGhpcy5jdXJyZW50UGFnZSAtIDEpLAogICAgICAgIG5hbWU6IHZhbHVlCiAgICAgIH0KICAgICAgYXV0b0V2ZW50VHJhY2tBcGkuZ2V0QXV0b0V2ZW50VHJhY2tDYXNlQ29uZmlnTGlzdChwYXJhbXMpLnRoZW4oCiAgICAgICAgcmVzID0+IHsKICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzLmRhdGEuZGF0YQogICAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLnRvdGFsCiAgICAgICAgICB0aGlzLm5vUG9sbGluZyA9IHRydWUKICAgICAgICB9CiAgICAgICkKICAgIH0sCiAgICBwb2xsaW5nRGF0YUxpc3QodmFsdWU/OiBzdHJpbmcpIHsKICAgICAgdGhpcy5nZXRBdXRvRXZlbnRUcmFja0NvbmZpZ0xpc3QodmFsdWUpCiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5teUludGVydmFsKQogICAgICB0aGlzLm15SW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy5ub1BvbGxpbmcgPSBmYWxzZQogICAgICAgICAgdGhpcy5nZXRBdXRvRXZlbnRUcmFja0NvbmZpZ0xpc3QodmFsdWUpCiAgICAgICAgfSwgMSkKICAgICAgfSwgMzAwMCkKICAgIH0sCiAgICBoYW5kbGVQb2xsaW5nRGF0YUxpc3QodmFsdWU/OiBzdHJpbmcpIHsKICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IDEKICAgICAgdGhpcy5wb2xsaW5nRGF0YUxpc3QodmFsdWUpCiAgICB9LAogICAgaGFuZGxlQWRkT3JFZGl0KHBpcGVsaW5lPzogYW55KSB7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBET00g546w5Zyo5pu05paw5LqGCiAgICAgICAgdGhpcy4kcmVmcy5lZGl0Lm9wZW4ocGlwZWxpbmUpCiAgICAgIH0pCiAgICB9LAogICAgLy8g5Yig6Zmk5rWB5rC057q/CiAgICBoYW5kbGVEZWxldGUocm93PzogYW55KSB7CiAgICAgIHRoaXMuJGFsZXJ0KCfnoa7orqTliKDpmaToh6rliqjljJbphY3nva4/JywgJycsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICBjYWxsYmFjazogKGFjdGlvbjogc3RyaW5nKSA9PiB7CiAgICAgICAgICBpZiAoYWN0aW9uID09PSAnY29uZmlybScpIHsKICAgICAgICAgICAgYXV0b0V2ZW50VHJhY2tBcGkuZGVsZXRlQXV0b0V2ZW50VHJhY2tDb25maWcocm93LmlkKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0QXV0b0V2ZW50VHJhY2tDb25maWdMaXN0KCkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkKICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KQogICAgfSwKICAgIGhhbmRsZVRvQnVpbGRSZWNvcmQocm93PzogYW55KSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiBQYXRoTmFtZS5BdXRvQ2FzZUJ1aWxkUmVjb3JkQnlDb25maWdJZCwKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGNvbmZpZ0lkOiByb3cuaWQKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlUnVuKHJvdz86IGFueSkgewogICAgICB0aGlzLiRhbGVydCgn56Gu5a6a5omn6KGM6K+l6Ieq5Yqo5YyW55So5L6L6ZuGPycsICcnLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgY2FsbGJhY2s6IChhY3Rpb246IHN0cmluZykgPT4gewogICAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ2NvbmZpcm0nKSB7CiAgICAgICAgICAgIGF1dG9FdmVudFRyYWNrQXBpLnJ1bkF1dG9FdmVudFRyYWNrQ29uZmlnKHJvdy5pZCkudGhlbigpCiAgICAgICAgICB9CiAgICAgIH0KICAgIH0pCiAgICB9CiAgfQoKfQo="},{"version":3,"sources":["AutoEventTrackConfigList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"AutoEventTrackConfigList.vue","sourceRoot":"src/pages/autoEventTrack","sourcesContent":["<template>\n  <el-card class=\"card-content\" >\n    <template slot=\"header\">\n      <table-header :condition=\"condition\"\n                    create-tip=\"创建自动化配置\"\n                    @create=\"handleAddOrEdit\"\n                    @search=\"handlePollingDataList\"\n      >\n        <template slot=\"title\">\n          <div>埋点自动化配置</div>\n        </template>\n      </table-header>\n\n    </template>\n\n    <el-table :data=\"tableData\" size=\"medium\" v-loading=\"loading && noPolling\">\n      <el-table-column label=\"名称\" prop=\"name\"/>\n      <el-table-column label=\"业务线\" prop=\"business\"/>\n      <el-table-column label=\"环境\" prop=\"env\"/>\n      <el-table-column label=\"验证场景\" prop=\"method\"/>\n      <el-table-column label=\"创建者\" prop=\"creator\"/>\n      <el-table-column label=\"定时表达式\" prop=\"crontabSchedule\"/>\n      <el-table-column label=\"定时执行\" prop=\"enableAutoTrigger\">\n        <template v-slot:default=\"scope\">\n          <span>{{scope.row.enableAutoTrigger? '是': '否'}}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <table-operator\n            copy-tip=\"执行记录\"\n            show-copy\n            show-delete\n            show-edit\n            show-run\n            :run-tip=\"scope.row.status === 'running' ? '正在执行': '执行'\"\n            @copyClick=\"handleToBuildRecord(scope.row)\"\n            @deleteClick=\"handleDelete(scope.row)\"\n            @editClick=\"handleAddOrEdit(scope.row)\"\n            @runClick=\"handleRun(scope.row)\"\n            :runDisable=\"scope.row.status === 'running'\"\n          >\n          </table-operator>\n        </template>\n      </el-table-column>\n\n    </el-table>\n    <table-pagination\n      :change=\"getAutoEventTrackConfigList\"\n      :current-page.sync=\"currentPage\"\n      :page-size.sync=\"pageSize\"\n      :total=\"total\"\n    />\n    <auto-event-track-config-edit ref=\"edit\" @fatherEventTrackMethod=\"getAutoEventTrackConfigList\"></auto-event-track-config-edit>\n\n  </el-card>\n</template>\n\n<script lang=\"ts\">\nimport {autoEventTrackApi} from \"@/api\"\nimport TablePagination from \"@/common/components/pagination/TablePagination.vue\"\nimport TableHeader from \"@/common/components/TableHeader.vue\"\nimport TableOperator from \"@/common/components/TableOperator.vue\"\nimport {PAGINATION_SIZE} from \"@/constant\"\nimport {PathName} from \"@/constant/routeData\"\nimport AutoEventTrackConfigEdit from \"@/pages/autoEventTrack/components/AutoEventTrackConfigEdit.vue\"\nexport default {\nname: \"AutoEventTrackConfigList\",\n  components: {TableHeader, TablePagination, TableOperator, AutoEventTrackConfigEdit},\n  data() {\n  return {\n    noPolling: true,\n    createVisible: false,\n    condition: {},\n    total: 0,\n    pageSize: PAGINATION_SIZE.LARGE,\n    currentPage: 1,\n    tableData: []\n  }\n  },\n  computed: {\n    loading() {\n      return this.$store.state.loading\n    },\n  },\n  mounted() {\n    this.pollingDataList()\n  },\n  destroyed() {\n    clearInterval(this.myInterval)\n  },\n  methods: {\n    getAutoEventTrackConfigList(value?: string) {\n      const params = {\n        limit: this.pageSize,\n        offset: this.pageSize * (this.currentPage - 1),\n        name: value\n      }\n      autoEventTrackApi.getAutoEventTrackCaseConfigList(params).then(\n        res => {\n          this.tableData = res.data.data\n          this.total = res.data.total\n          this.noPolling = true\n        }\n      )\n    },\n    pollingDataList(value?: string) {\n      this.getAutoEventTrackConfigList(value)\n      clearInterval(this.myInterval)\n      this.myInterval = window.setInterval(() => {\n        setTimeout(() => {\n          this.noPolling = false\n          this.getAutoEventTrackConfigList(value)\n        }, 1)\n      }, 3000)\n    },\n    handlePollingDataList(value?: string) {\n      this.currentPage = 1\n      this.pollingDataList(value)\n    },\n    handleAddOrEdit(pipeline?: any) {\n      this.$nextTick(function () {\n        // DOM 现在更新了\n        this.$refs.edit.open(pipeline)\n      })\n    },\n    // 删除流水线\n    handleDelete(row?: any) {\n      this.$alert('确认删除自动化配置?', '', {\n        confirmButtonText: '确定',\n        showCancelButton: true,\n        cancelButtonText: '取消',\n        callback: (action: string) => {\n          if (action === 'confirm') {\n            autoEventTrackApi.deleteAutoEventTrackConfig(row.id).then(() => {\n                this.getAutoEventTrackConfigList()\n              }\n            )\n          }\n          }\n        })\n    },\n    handleToBuildRecord(row?: any) {\n      this.$router.push({\n        name: PathName.AutoCaseBuildRecordByConfigId,\n        params: {\n          configId: row.id\n        }\n      })\n    },\n    handleRun(row?: any) {\n      this.$alert('确定执行该自动化用例集?', '', {\n        confirmButtonText: '确定',\n        showCancelButton: true,\n        cancelButtonText: '取消',\n        callback: (action: string) => {\n          if (action === 'confirm') {\n            autoEventTrackApi.runAutoEventTrackConfig(row.id).then()\n          }\n      }\n    })\n    }\n  }\n\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}
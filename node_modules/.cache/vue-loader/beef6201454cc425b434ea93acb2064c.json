{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/coverage/components/BuildConsole.vue?vue&type=style&index=0&id=7282ed42&scoped=true&lang=css&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/coverage/components/BuildConsole.vue","mtime":1655949681773},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/css-loader/dist/cjs.js","mtime":1644298105513},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1644314988580},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js","mtime":1644298105780},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmNvbnNvbGUtdGV4dCB7CiAgdGV4dC1hbGlnbjogbGVmdDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmIyYjJiOwogIGNvbG9yOiAjZTllZGVkOwogIHBhZGRpbmc6IDEwcHggMjBweDsKICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7Cn0KCg=="},{"version":3,"sources":["BuildConsole.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BuildConsole.vue","sourceRoot":"src/pages/coverage/components","sourcesContent":["<template>\n  <div style=\"background-color: #000000; color: #ffffff\">\n    <div style=\"font-size: 2em; font-weight: bold;\">#{{step}} Console Output</div>\n    <pre class=\"console-text\">\n      <code>{{consoleText}}</code>\n    </pre>\n    <i class=\"el-icon-loading\" style=\"font-size: 18px; margin-top: 4px;\" v-if=\"isBuilding\"></i>\n  </div>\n</template>\n\n<script>\nimport {coverageApi} from \"@/api\";\n\nexport default {\nname: \"buildConsole\",\n  computed:{\n    pipelineId() {\n      return this.$route.params.pipelineId\n    },\n    step() {\n      return this.$route.params.step ? this.$route.params.step : ''\n    }\n  },\n  data() {\n  return {\n    consoleText: '',\n    isBuilding: true,\n  }\n  },\n  mounted() {\n    this.PolingGetConsoleOutput()\n  },\n  destroyed() {\n    clearInterval(this.myInterval);\n  },\n  methods: {\n    getBuildConsole(){\n      if (this.step === 'deploy') {\n        coverageApi.getPipelineDeployConsole(this.pipelineId).then(res => {\n          this.consoleText = res.data.text\n          this.isBuilding = res.data.isBuilding\n        })\n      } else {\n        coverageApi.getPipelineCoverageConsole(this.pipelineId).then(res => {\n          this.consoleText = res.data.text\n          this.isBuilding = res.data.isBuilding\n        })\n      }\n      if (this.isBuilding === false){\n        clearInterval(this.myInterval);\n      }\n    },\n    PolingGetConsoleOutput() {\n      this.getBuildConsole();\n      // 每3秒轮询获取日志\n      this.myInterval = window.setInterval(() => {\n        setTimeout(() => {\n          this.getBuildConsole()\n        }, 1)\n      }, 3000)\n    },\n  },\n}\n</script>\n\n<style scoped>\n.console-text {\n  text-align: left;\n  background-color: #2b2b2b;\n  color: #e9eded;\n  padding: 10px 20px;\n  white-space: pre-wrap;\n}\n\n</style>\n"]}]}
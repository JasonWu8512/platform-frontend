{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/login/index.vue?vue&type=style&index=0&id=2cdea210&lang=scss&scoped=true&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/login/index.vue","mtime":1655949681778},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/css-loader/dist/cjs.js","mtime":1644298105513},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1644314988580},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js","mtime":1644298105780},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/sass-loader/dist/cjs.js","mtime":1644314983366},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5sb2dpbiB7CiAgcGFkZGluZzogMjBweDsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgd2lkdGg6IDQwMHB4OwogIGxlZnQ6IDUwJTsKICB0b3A6IDUwJTsKICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsKICBiYWNrZ3JvdW5kOiAjMDEwNTFkOwogIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgb3BhY2l0eTogLjk7CgogIC5sb2dpbl9uYW1lIHsKICAgIGNvbG9yOiAjZmZmOwogICAgbWFyZ2luLWJvdHRvbTogMTVweDsKICB9CgogIC5lbC1pbnB1dF9faW5uZXIgewogICAgYmFja2dyb3VuZC1jb2xvcjogIzA4MGUyZiAhaW1wb3J0YW50OwogICAgY29sb3I6ICNmZmY7CiAgfQp9CgoubG9naW4tcGFnZSB7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICBwb3NpdGlvbjogcmVsZXRpdmU7Cn0KCi5sb2dpbi1sb2dvIHsKICB3aWR0aDogMTEwcHg7CiAgaGVpZ2h0OiBhdXRvOwogIGRpc3BsYXk6IGJsb2NrOwogIG1hcmdpbjogNDBweCBhdXRvIDUwcHg7Cn0KCi5sb2dpbl9ib3ggewogIC5lbC1mb3JtLWl0ZW0gewogICAgbWFyZ2luLWJvdHRvbTogMTVweDsKICB9CgogIC5yZWdpc3Rlci10aXBzIHsKICAgIG1hcmdpbi10b3A6IDEwcHg7CiAgfQoKICAubG9naW4tYnRuIHsKICAgIHdpZHRoOiAxMDAlOwogICAgZm9udC1zaXplOiAxNXB4OwogICAgbGluZS1oZWlnaHQ6IDEuNTsKICAgIGxldHRlci1zcGFjaW5nOiA1cHg7CiAgICBwYWRkaW5nOiAxMHB4IDIwcHg7CiAgfQp9CgojcGFydGljbGVzIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIGJhY2tncm91bmQtY29sb3I6ICMwODBlMmY7CiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsKICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyOwogIGJhY2tncm91bmQtcG9zaXRpb246IDUwJSA1MCU7Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/login","sourcesContent":["<template>\n  <div class=\"login-page\">\n    <div :style=\"{'min-height':winHeight+'px'}\" class=\"login_box\">\n      <div id=\"particles\"></div>\n      <div v-loading=\"loading\" class=\"login\">\n        <div class=\"login_name\">\n          <img alt class=\"login-logo\" src=\"https://dev-crm.jiliguala.com/static/img/login_logo.b63d90e7.png\">\n          <p>测试平台</p>\n        </div>\n        <el-tabs v-model=\"activeName\">\n          <!--          <el-tab-pane label=\"账号密码登录\" name=\"second\">-->\n<!--          <el-form id=\"test-login-form\" ref=\"userForm\" :model=\"loginForm\" :rules=\"rules\" class=\"loginForm\">-->\n<!--            <el-form-item prop=\"name\">-->\n<!--              <el-input id=\"t-name\" v-model=\"loginForm.name\" placeholder=\"填写用户名\" size=\"medium\"></el-input>-->\n<!--            </el-form-item>-->\n<!--            <el-form-item prop=\"password\">-->\n<!--              <el-input-->\n<!--                  id=\"t-pwd\"-->\n<!--                  v-model=\"loginForm.password\"-->\n<!--                  placeholder=\"填写密码\"-->\n<!--                  size=\"medium\"-->\n<!--                  type=\"password\"-->\n<!--                  @keyup.enter.native=\"loginFun\"-->\n<!--              />-->\n<!--            </el-form-item>-->\n<!--            <el-form-item>-->\n<!--              <el-button class=\"login-btn\" type=\"primary\" @click=\"loginFun\">登录</el-button>-->\n<!--            </el-form-item>-->\n<!--          </el-form>-->\n        </el-tabs>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport userApi from '@/api/user'\nimport {PathName} from \"@/constant/routeData\"\n\nexport default {\n  data() {\n    return {\n      remeber: false, //是否记住密码\n      loading: false,\n      activeName: 'first',\n      winHeight: window.innerHeight,\n      loginForm: {\n        name: '',\n        password: ''\n      },\n      rules: {\n        name: [\n          {required: true, message: '请输入用户名', trigger: 'blur'},\n        ],\n        password: [\n          {required: true, message: '请输入密码', trigger: 'blur'}\n        ]\n      }\n    }\n  },\n  methods: {\n    initParticlesJS() {\n      // eslint-disable-next-line no-undef\n      particlesJS('particles', {\n\n        \"particles\": {\n          \"number\": {\n            \"value\": 80,\n            \"density\": {\n              \"enable\": true,\n              \"value_area\": 800\n            }\n          },\n          \"color\": {\n            \"value\": \"#ffffff\"\n          },\n          \"shape\": {\n            \"type\": \"circle\",\n            \"stroke\": {\n              \"width\": 0,\n              \"color\": \"#ffffff\"\n            },\n            \"polygon\": {\n              \"nb_sides\": 5\n            },\n            \"image\": {\n              \"src\": \"img/github.svg\",\n              \"width\": 100,\n              \"height\": 100\n            }\n          },\n          \"opacity\": {\n            \"value\": 0.24837156385953366,\n            \"random\": false,\n            \"anim\": {\n              \"enable\": false,\n              \"speed\": 1,\n              \"opacity_min\": 0.1,\n              \"sync\": false\n            }\n          },\n          \"size\": {\n            \"value\": 3,\n            \"random\": true,\n            \"anim\": {\n              \"enable\": false,\n              \"speed\": 40,\n              \"size_min\": 0.1,\n              \"sync\": false\n            }\n          },\n          \"line_linked\": {\n            \"enable\": true,\n            \"distance\": 100,\n            \"color\": \"#373737\",\n            \"opacity\": 0.745114691578601,\n            \"width\": 0.6409588744762158\n          },\n          \"move\": {\n            \"enable\": true,\n            \"speed\": 6.409588744762158,\n            \"direction\": \"none\",\n            \"random\": false,\n            \"straight\": false,\n            \"out_mode\": \"out\",\n            \"bounce\": false,\n            \"attract\": {\n              \"enable\": false,\n              \"rotateX\": 600,\n              \"rotateY\": 1200\n            }\n          }\n        },\n        \"interactivity\": {\n          \"detect_on\": \"canvas\",\n          \"events\": {\n            \"onhover\": {\n              \"enable\": true,\n              \"mode\": \"repulse\"\n            },\n            \"onclick\": {\n              \"enable\": true,\n              \"mode\": \"push\"\n            },\n            \"resize\": true\n          },\n          \"modes\": {\n            \"grab\": {\n              \"distance\": 400,\n              \"line_linked\": {\n                \"opacity\": 1\n              }\n            },\n            \"bubble\": {\n              \"distance\": 400,\n              \"size\": 40,\n              \"duration\": 2,\n              \"opacity\": 8,\n              \"speed\": 3\n            },\n            \"repulse\": {\n              \"distance\": 200,\n              \"duration\": 0.4\n            },\n            \"push\": {\n              \"particles_nb\": 4\n            },\n            \"remove\": {\n              \"particles_nb\": 2\n            }\n          }\n        },\n        \"retina_detect\": false\n      })\n    },\n    loginFun() {\n      this.$refs.userForm.validate((valid) => {\n        if (valid) {\n          this.loading = true\n          userApi.doLogin({username: this.loginForm.name, password: this.loginForm.password}).then(res => {\n            this.$store.commit('SET_TOKEN', res.token)\n            console.log('permissions', res.permissions)\n            this.$store.commit('SET_ROLE', res.permissions)\n            this.$router.push({\n              name: PathName.Home\n            })\n            this.loading = false\n          }, () => {\n            this.loading = false\n          })\n        } else {\n          this.$message.error(\"请提填写用户名和密码！\")\n        }\n      })\n    },\n    authToken() {\n      userApi.authToken({sso_auth_code: this.$route.query.sso_auth_code}).then(res => {\n        // userApi.sso_account({access_token: res.data.accessToken, uid: res.data.userInfo.uid})\n          this.$store.commit('SET_TOKEN', res.token)\n        this.$store.commit('SET_ROLE', res.permissions)\n        this.$router.push({\n          name: PathName.Home\n        })\n        this.loading = false\n        }, () => {this.loading = false})\n    }\n\n  },\n  mounted() {\n    console.log('ssossosso')\n    this.authToken()\n    // let _this = this\n    // window.addEventListener('resize', function () {\n    //   _this.winHeight = window.innerHeight\n    // }, true)\n    // //particles\n    // require('particles.js')\n    // this.$nextTick(() => {\n    //   this.initParticlesJS()\n    // })\n\n//       生成企业微信登录二维码\n//      console.log(\"appid\", process.env.QYWX_APPID, \"agentid\", process.env.QYWX_AGENTID, \"redirect_uri\", process.env.QYEX_REDIRECT_URI)\n//     window.WwLogin({\n//       \"id\": \"wx_reg\",\n//       \"appid\": process.env.QYWX_APPID,\n//       \"agentid\": process.env.QYWX_AGENTID,\n//       \"redirect_uri\": process.env.QYEX_REDIRECT_URI,\n//       \"state\": \"\",\n//       \"href\": \"\",\n//     })\n  },\n  // beforeCreate () {\n  //   if (location.search.indexOf(\"?\") !== -1) {\n  //     let data = qs.parse(location.search.substr(1))\n  //     if (data.code) {\n  //       this.loading = true\n  //       userApi.qywxLogin(data.code).then(res => {\n  //         this.loading = false\n  //         console.log(res.data.data.token)\n  //         this.$store.commit('SET_TOKEN', res.data.data.token)\n  //         window.location.href = window.location.origin\n  //       }, error => {\n  //         this.loading = false\n  //         this.$message.error(error.message)\n  //         //失败跳转回登录页面\n  //         window.location.href = window.location.origin + '/#/login'\n  //       })\n  //     }\n  //   }\n  // }\n}\n</script>\n<style lang=\"scss\" scoped>\n.login {\n  padding: 20px;\n  position: absolute;\n  width: 400px;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  background: #01051d;\n  border-radius: 10px;\n  opacity: .9;\n\n  .login_name {\n    color: #fff;\n    margin-bottom: 15px;\n  }\n\n  .el-input__inner {\n    background-color: #080e2f !important;\n    color: #fff;\n  }\n}\n\n.login-page {\n  overflow: hidden;\n  position: reletive;\n}\n\n.login-logo {\n  width: 110px;\n  height: auto;\n  display: block;\n  margin: 40px auto 50px;\n}\n\n.login_box {\n  .el-form-item {\n    margin-bottom: 15px;\n  }\n\n  .register-tips {\n    margin-top: 10px;\n  }\n\n  .login-btn {\n    width: 100%;\n    font-size: 15px;\n    line-height: 1.5;\n    letter-spacing: 5px;\n    padding: 10px 20px;\n  }\n}\n\n#particles {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-color: #080e2f;\n  background-repeat: no-repeat;\n  background-size: cover;\n  background-position: 50% 50%;\n}\n</style>\n"]}]}
{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/track/plan/view/comonents/report/components/BaseInfo.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/track/plan/view/comonents/report/components/BaseInfo.vue","mtime":1655949681805},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/css-loader/dist/cjs.js","mtime":1644298105513},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1644314988580},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js","mtime":1644298105780},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/sass-loader/dist/cjs.js","mtime":1644314983366},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmJhc2VJbmZvIC5lbC1pbnB1dF9faW5uZXIgewogIGJvcmRlci10b3Atd2lkdGg6IDBweDsKICBib3JkZXItbGVmdC13aWR0aDogMHB4OwogIGJvcmRlci1yaWdodC13aWR0aDogMHB4OwogIGJvcmRlci1ib3R0b20td2lkdGg6IDFweDsKICBib3JkZXItcmFkaXVzOiAwOwogIC8qb3V0bGluZTogbWVkaXVtOyovCn0K"},{"version":3,"sources":["BaseInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BaseInfo.vue","sourceRoot":"src/pages/track/plan/view/comonents/report/components","sourcesContent":["<template>\n\n  <common-component title=\"基础信息\">\n\n    <template class=\"text\">\n\n      <el-row justify=\"space-between\" type=\"flex\">\n        <el-col :span=\"12\" style=\"text-align: left\">\n          <span>所属项目：</span>\n          <span v-for=\"proj in baseInfo.projNames\" :key=\"proj\" class=\"item-value\">{{ proj }}</span>\n        </el-col>\n        <el-col :span=\"12\" style=\"text-align: left\">\n          <span>负责人：</span>\n          <span class=\"item-value\">{{ baseInfo.owner }}</span>\n        </el-col>\n      </el-row>\n\n      <el-row class=\"select-time\" justify=\"space-between\" type=\"flex\">\n        <el-col :span=\"12\" style=\"text-align: left\">\n          <span>开始时间：</span>\n          <el-date-picker\n            v-model=\"baseInfo.start\"\n            format=\"yyyy 年 MM 月 dd 日\"\n            placeholder=\"请选择开始时间\"\n            type=\"date\"\n            value-format=\"yyyy-MM-dd\"\n            @change=\"startTimeChange\"\n          />\n        </el-col>\n        <el-col :span=\"12\" style=\"text-align: left\">\n          <span>结束时间：</span>\n          <el-date-picker\n            v-model=\"baseInfo.end\"\n            format=\"yyyy 年 MM 月 dd 日\"\n            placeholder=\"请选择结束时间\"\n            type=\"date\"\n            value-format=\"yyyy-MM-dd\"\n            @change=\"endTimeChange\"\n          />\n        </el-col>\n      </el-row>\n\n      <el-row justify=\"space-between\" type=\"flex\" class=\"baseInfo\">\n        <el-col :span=\"12\" style=\"text-align: left\">\n          <span>执行人：</span>\n          <span v-for=\"item in baseInfo.executors\" :key=\"item\">{{ item }}</span>\n        </el-col>\n        <el-col :span=\"12\" style=\"text-align: left\" v-if=\"baseInfo.stage !== planStageEnum.SMOKE\">\n          <span>自动化构建号：</span>\n          <el-input v-model=\"cloneBaseInfo.historyId\" style=\"width: 180px\" @change=\"editHistoryId\">\n            <i\n              class=\"el-icon-edit el-input__icon\"\n              slot=\"suffix\">\n            </i>\n          </el-input>\n        </el-col>\n      </el-row>\n      <el-row justify=\"space-between\" type=\"flex\" v-if=\"baseInfo.stage !== planStageEnum.SMOKE\">\n        <el-col :span=\"12\" style=\"text-align: left\">\n          <span>缺陷筛选器：</span>\n          <el-button type=\"text\" @click=\"dialogVisible = true\">点击此处查看/更新jql</el-button>\n        </el-col>\n      </el-row>\n      <el-row justify=\"space-between\" type=\"flex\">\n        <el-col :span=\"12\" style=\"text-align: left\">\n          <span style=\"color: red\">备注：</span>\n          <span> {{cloneBaseInfo.description}} </span>\n          <el-button @click=\"ifEdit = true\" class=\"el-icon-edit\" type=\"text\" v-if=\"!ifEdit\"></el-button>\n        </el-col>\n      </el-row>\n      <el-dialog\n        :visible.sync=\"dialogVisible\"\n        class=\"dialog-title\"\n        title=\"缺陷筛选jql\">\n        <el-input v-model=\"cloneBaseInfo.jql\" placeholder=\"请输入jql\"></el-input>\n        <template slot=\"footer\">\n          <dialog-footer @cancel=\"cancleEdit\" @confirm=\"submit\"/>\n        </template>\n      </el-dialog>\n      <el-dialog\n        :visible.sync=\"ifEdit\"\n        class=\"dialog-title\"\n        title=\"备注\">\n        <el-input v-model=\"cloneBaseInfo.description\" placeholder=\"请输入备注说明\"></el-input>\n        <template slot=\"footer\">\n          <dialog-footer @cancel=\"cancleEdit\" @confirm=\"editPlanDescription\"/>\n        </template>\n      </el-dialog>\n\n    </template>\n\n  </common-component>\n\n</template>\n\n<script>\nimport {testPlanApi} from \"@/api\"\nimport DialogFooter from \"@/common/components/DialogFooter.vue\"\nimport {planStageEnum} from \"@/constant/TestPlan\"\nimport {cloneDeep} from \"lodash\"\nimport CommonComponent from \"./CommonComponent\"\n\nexport default {\n  name: \"BaseInfoComponent\",\n  components: {CommonComponent, DialogFooter},\n  props: {\n    baseInfo: {\n      type: Object,\n    },\n    planId: {\n      type: String\n    }\n  },\n  data() {\n    return {\n      planStageEnum: planStageEnum,\n      dialogVisible: false,\n      ifEdit: false,\n      cloneBaseInfo: cloneDeep(this.baseInfo),\n    }\n  },\n  watch: {\n    baseInfo() {\n      this.cloneBaseInfo =  cloneDeep(this.baseInfo)\n    }\n  },\n  methods: {\n    startTimeChange() {\n      if (!!this.baseInfo.end && this.baseInfo.end - this.baseInfo.start < 0) {\n        this.baseInfo.start = undefined;\n        this.$message.warning('开始日期不能大于结束日期');\n      } else {\n        testPlanApi.updateTestCasePlan(this.planId, {actualStart: this.baseInfo.start})\n      }\n    },\n    endTimeChange() {\n      if (!!this.baseInfo.start && this.baseInfo.end - this.baseInfo.start < 0) {\n        this.baseInfo.end = undefined;\n        this.$message.warning('开始日期不能大于结束日期');\n      } else {\n        testPlanApi.updateTestCasePlan(this.planId, {actualEnd: this.baseInfo.end})\n      }\n    },\n    submit() {\n      testPlanApi.updateTestCasePlan(this.planId, {issueJql: this.cloneBaseInfo.jql}).then(\n        // eslint-disable-next-line no-unused-vars\n        res => {\n          this.dialogVisible = false;\n          this.$emit(\"fatherMethod\")\n        }\n      )\n    },\n    editHistoryId() {\n      testPlanApi.updateTestCasePlan(this.planId, {historyId: this.cloneBaseInfo.historyId}).then(\n        () => {\n          this.$emit(\"fatherMethod\")\n        }\n      )\n    },\n    editPlanDescription() {\n      testPlanApi.updateTestCasePlan(this.planId, {description: this.cloneBaseInfo.description}).then(\n        // eslint-disable-next-line no-unused-vars\n        res => {\n          this.ifEdit = false\n          this.$emit(\"fatherMethod\")\n        }\n      )\n    },\n    cancleEdit(){\n      this.ifEdit = false\n      this.dialogVisible = false\n      this.cloneBaseInfo = cloneDeep(this.baseInfo)\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n.baseInfo .el-input__inner {\n  border-top-width: 0px;\n  border-left-width: 0px;\n  border-right-width: 0px;\n  border-bottom-width: 1px;\n  border-radius: 0;\n  /*outline: medium;*/\n}\n</style>\n\n<style lang=\"scss\" scoped>\n@import \"src/assets/css/font\";\n@import \"src/assets/css/utils\";\n\n.dialog-title {\n  @extend %dialog-title\n}\n\n.text {\n  @extend %font-14\n}\n\nspan {\n  margin-right: 5px;\n  display: inline-block;\n}\n\n.el-col span:first-child {\n  font-weight: bold;\n  width: 100px;\n}\n\n.el-row {\n  height: 60px;\n}\n\n.select-time span {\n  display: inline-block;\n}\n\n\n//.el-date-editor {\n//  width: 220px;\n//}\n\n</style>\n"]}]}
{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/login/selfPassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/login/selfPassword.vue","mtime":1655949681778},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js","mtime":1644314985388},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB1c2VyQXBpIGZyb20gIkAvYXBpL3VzZXIiCgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gKCkgewogICAgdmFyIHZhbGlkYXRlUGFzczIgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+ehruiupOaWsOWvhueggScpKTsKICAgICAgfSBlbHNlIGlmICh2YWx1ZSAhPT0gdGhpcy5lZGl0RGF0YS5uZXdwYXNzd29yZCkgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign5Lik5qyh6L6T5YWl5a+G56CB5LiN5LiA6Ie0IScpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgZWRpdERhdGE6IHsKICAgICAgICBvbGRwYXNzd29yZDogIiIsCiAgICAgICAgbmV3cGFzc3dvcmQ6ICIiLAogICAgICAgIG5ld3Bhc3N3b3JkMjogIiIsCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgb2xkcGFzc3dvcmQ6IFsKICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+Whq+WGmeaXp+WvhueggSIsIHRyaWdnZXI6ICJibHVyIn0KICAgICAgICBdLAogICAgICAgIG5ld3Bhc3N3b3JkOiBbCiAgICAgICAgICB7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7floavlhpnmlrDlr4bnoIEiLCB0cmlnZ2VyOiAiYmx1ciJ9CiAgICAgICAgXSwKICAgICAgICBuZXdwYXNzd29yZDI6IFsKICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgdmFsaWRhdG9yOiB2YWxpZGF0ZVBhc3MyLCB0cmlnZ2VyOiAiYmx1ciJ9CiAgICAgICAgXQogICAgICB9CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHVzZXJJZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmxvZ2luLnVzZXJpZDsKICAgIH0sCiAgICB1c2VyTmFtZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmxvZ2luLnVzZXJuYW1lOwogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIC8vIOi/m+WFpemhtemdou+8jOmakOiXj+S+p+i+ueagjwogICAgdGhpcy4kc3RvcmUuY29tbWl0KCdTRVRfQVNJREVISURERU4nLCB0cnVlKQogIH0sCiAgbWV0aG9kczogewogICAgY2FuY2VsRnVuKCkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ1NFVF9BU0lERUhJRERFTicsIGZhbHNlKQogICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpOyAvL+i/lOWbnuS4iuS4gOWxggogICAgfSwKICAgIHN1cmVGdW4oKSB7CiAgICAgIHRoaXMuJHJlZnMuYWRkRm9ybS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBsZXQgcGFyYW1zID0gewogICAgICAgICAgICBvbGRwYXNzd29yZDogdGhpcy5lZGl0RGF0YS5vbGRwYXNzd29yZCwKICAgICAgICAgICAgbmV3cGFzc3dvcmQ6IHRoaXMuZWRpdERhdGEubmV3cGFzc3dvcmQKICAgICAgICAgIH07CiAgICAgICAgICB1c2VyQXBpLnJlc2V0UGFzc3dvcmQodGhpcy51c2VySWQsIHBhcmFtcykudGhlbigKICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMKICAgICAgICAgICAgICByZXMgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHsKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIuWvhueggeS/ruaUueaIkOWKn++8gSIsCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIgogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ1NFVF9BU0lERUhJRERFTicsIGZhbHNlKQogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsgLy/ov5Tlm57kuIrkuIDlsYIKICAgICAgICAgICAgICB9LAogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgfQp9Owo="},{"version":3,"sources":["selfPassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"selfPassword.vue","sourceRoot":"src/pages/login","sourcesContent":["<template>\n  <el-card>\n    <div>\n      <i class=\"q-icon fa fa-user\"></i>\n      <el-breadcrumb separator=\"/\">\n        <el-breadcrumb-item>用户管理</el-breadcrumb-item>\n        <el-breadcrumb-item>修改密码</el-breadcrumb-item>\n      </el-breadcrumb>\n    </div>\n    <el-form ref=\"addForm\" :model=\"editData\" :rules=\"rules\" class=\"addForm\" label-width=\"100px\">\n      <el-form-item label=\" \">\n        <p style=\"color:#999;\">（ 这里的修改只针对本平台有效！）</p>\n      </el-form-item>\n      <el-form-item label=\"旧密码：\" prop=\"oldpassword\">\n        <el-input v-model=\"editData.oldpassword\" type=\"password\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"新密码：\" prop=\"newpassword\">\n        <el-input v-model=\"editData.newpassword\" type=\"password\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"确认密码：\" prop=\"newpassword2\">\n        <el-input v-model=\"editData.newpassword2\" type=\"password\"></el-input>\n      </el-form-item>\n      <el-form-item>\n        <el-button @click=\"cancelFun\">取消</el-button>\n        <el-button type=\"primary\" @click=\"sureFun\">确定</el-button>\n      </el-form-item>\n    </el-form>\n  </el-card>\n</template>\n<script>\nimport userApi from \"@/api/user\"\n\nexport default {\n  data: function () {\n    var validatePass2 = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请确认新密码'));\n      } else if (value !== this.editData.newpassword) {\n        callback(new Error('两次输入密码不一致!'));\n      } else {\n        callback();\n      }\n    };\n    return {\n      editData: {\n        oldpassword: \"\",\n        newpassword: \"\",\n        newpassword2: \"\",\n      },\n      rules: {\n        oldpassword: [\n          {required: true, message: \"请填写旧密码\", trigger: \"blur\"}\n        ],\n        newpassword: [\n          {required: true, message: \"请填写新密码\", trigger: \"blur\"}\n        ],\n        newpassword2: [\n          {required: true, validator: validatePass2, trigger: \"blur\"}\n        ]\n      }\n    };\n  },\n  computed: {\n    userId() {\n      return this.$store.state.login.userid;\n    },\n    userName() {\n      return this.$store.state.login.username;\n    }\n  },\n  created() {\n    // 进入页面，隐藏侧边栏\n    this.$store.commit('SET_ASIDEHIDDEN', true)\n  },\n  methods: {\n    cancelFun() {\n      this.$store.commit('SET_ASIDEHIDDEN', false)\n      this.$router.go(-1); //返回上一层\n    },\n    sureFun() {\n      this.$refs.addForm.validate(valid => {\n        if (valid) {\n          let params = {\n            oldpassword: this.editData.oldpassword,\n            newpassword: this.editData.newpassword\n          };\n          userApi.resetPassword(this.userId, params).then(\n              // eslint-disable-next-line no-unused-vars\n              res => {\n                this.$message.success({\n                  message: \"密码修改成功！\",\n                  type: \"success\"\n                });\n                this.$store.commit('SET_ASIDEHIDDEN', false)\n                this.$router.go(-1); //返回上一层\n              },\n          );\n        }\n      });\n    },\n  },\n  mounted() {\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n.addForm {\n  width: 500px;\n}\n</style>\n"]}]}
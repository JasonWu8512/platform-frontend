{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/Team/components/SprintTestPlan.vue?vue&type=style&index=0&id=1457c7c0&scoped=true&lang=scss&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/Team/components/SprintTestPlan.vue","mtime":1655949681770},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/css-loader/dist/cjs.js","mtime":1644298105513},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1644314988580},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js","mtime":1644298105780},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/sass-loader/dist/cjs.js","mtime":1644314983366},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5lLWNoYXJ0IHsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDMwMHB4OwogIG1hcmdpbjogMCBhdXRvCn0KCg=="},{"version":3,"sources":["SprintTestPlan.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsHA;AACA;AACA;AACA;AACA","file":"SprintTestPlan.vue","sourceRoot":"src/pages/Team/components","sourcesContent":["<template>\n    <div>\n      <common-component title=\"提测规划图\" v-loading=\"loading\">\n        <div v-if=\"option.series.length === 0\" style=\"font-size: 14px; color: #909399; text-align: center;\">-->\n                <span>暂无数据</span>\n              </div>\n        <div v-else>\n          <chart :autoresize=\"true\" :options=\"option\" class=\"e-chart\" v-if=\"inRefresh\" @click=\"openJira\"></chart>\n        </div>\n\n      </common-component>\n    </div>\n</template>\n\n<script>\nimport {jiraApi} from \"@/api\";\nimport CommonComponent from \"@/pages/track/plan/view/comonents/report/components/CommonComponent.vue\"\nexport default {\nname: \"SprintTestPlan\",\n  components: {CommonComponent},\n  props: {\n  sprintId: String,\n  },\n  watch: {\n    sprintId() {\n      this.getSprintStoryTestPlan()\n    },\n  },\n  data() {\n  return {\n    loading: false,\n    inRefresh: false,\n    spValues: [],\n    optionProps: {\n      value: 'id',\n      label: 'name',\n      children: 'sprints'\n    },\n    option:{\n      legend: {\n        data: [{name: '正常', textStyle: {color: '#72a92f', fontWeight: 'bold'}},\n          {name: '延期', textStyle: {color: '#E6A23C', fontWeight: 'bold'}},\n          {name: '未提测', textStyle: {color: '#81cbf3', fontWeight: 'bold'}}]\n      },\n      color: ['transparent'],\n      tooltip: {\n        trigger: 'item',\n        // axisPointer: {            // 坐标轴指示器，坐标轴触发有效\n        //   type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'\n        // },\n        formatter: function (params) {\n          return params.name;\n        }\n      },\n      xAxis: {\n        type: 'category',\n        data:[],\n        axisLabel:{\n          interval: 0,\n          rotate: 30,\n        }},\n      yAxis: {\n        type: 'value',\n      },\n\n      series: []\n    }\n  }\n  },\n  methods: {\n    openJira(params) {\n      window.open(params.data.key)\n    },\n  getSprintStoryTestPlan() {\n    this.option.series = []\n    this.option.xAxis.data = []\n    jiraApi.getSprintStoryTestPlan({sprintId: this.sprintId}).then(res => {\n      this.option.xAxis.data = res.data.dates\n      this.option.series = res.data.stories.map(item => {\n        return Object.assign({}, item, {\"label\": {\n            \"normal\":{\n              \"show\": true,\n              \"position\": 'inside',\n              \"formatter\": function(params) {\n                if (params.value > 0) {\n                  return params.value;\n                } else {\n                  return ' ';\n                }\n              }            }},\n          \"itemStyle\":{\n            \"color\": function () {\n              if(item.name === '正常') {\n                return \"#72a92f\"\n              } else if(item.name === '延期') {\n                return \"#E6A23C\"\n              } else {\n                return \"#81cbf3\"\n              }\n            },\n            \"barBorderColor\": '#fff',\n            \"barBorderRadius\": 2},})\n      })\n    }).finally(() => {\n      // 强制刷新图表，清除图表显示缓存\n      this.inRefresh = false;\n      this.$nextTick(() => {\n        this.inRefresh = true;\n      });\n      this.loading = false;\n    });\n  },\n  },\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.e-chart {\n  width: 100%;\n  height: 300px;\n  margin: 0 auto\n}\n\n</style>\n"]}]}
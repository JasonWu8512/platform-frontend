{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/track/case/components/TestCaseEdit.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/track/case/components/TestCaseEdit.vue","mtime":1655949681781},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js","mtime":1644314985388},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/ts-loader/index.js","mtime":1644314987889},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCB7dGVzdENhc2VBcGl9IGZyb20gIkAvYXBpIgppbXBvcnQge1JlcXVlc3RDcmVhdGVUZXN0Q2FzZSwgUmVxdWVzdFVwZGF0ZVRlc3RDYXNlfSBmcm9tICJAL2FwaS90eXBlcy90ZXN0VHJhY2siCmltcG9ydCB7dHlwZUNhc2VEYXRhLCB0eXBlQ2FzZUZvcm19IGZyb20gIkAvYXBpL3R5cGVzL3Rlc3RUcmFja1R5cGUiCmltcG9ydCBEaWFsb2dGb290ZXIgZnJvbSAnQC9jb21tb24vY29tcG9uZW50cy9EaWFsb2dGb290ZXIudnVlJwppbXBvcnQge2Nhc2VVcGRhdGVUeXBlRW51bSwgZXhlY3V0aW9uRW51bSwgb3BlcmF0aW9uRW51bSwgb3BlcmF0aW9uVHlwZX0gZnJvbSAnQC9jb25zdGFudC9UZXN0Q2FzZScKaW1wb3J0IFRlc3RDYXNlRm9ybSBmcm9tICJAL3BhZ2VzL3RyYWNrL2Nhc2UvY29tcG9uZW50cy9UZXN0Q2FzZUZvcm0udnVlIgppbXBvcnQge2Nhc2VGb3JtLCBjYXNlU3RlcH0gZnJvbSAiQC9wYWdlcy90cmFjay9jYXNlL2Zvcm1zIgppbXBvcnQge2Nsb25lRGVlcH0gZnJvbSAibG9kYXNoIgoKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVGVzdENhc2VFZGl0IiwKICBjb21wb25lbnRzOiB7VGVzdENhc2VGb3JtLCBEaWFsb2dGb290ZXJ9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBvcGVyYXRpb25FbnVtOiBvcGVyYXRpb25FbnVtLAogICAgICBvcGVyYXRpb25UeXBlOiBvcGVyYXRpb25UeXBlLAogICAgICB0ZXN0Q2FzZToge30sCiAgICAgIG9wZXJhdGlvbjogJycsCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOiBmYWxzZSwKICAgICAgaXNDcmVhdGVDb250aW51ZTogZmFsc2UsCiAgICAgIGlzU3RlcFRhYmxlQWxpdmU6IHRydWUsCiAgICB9CiAgfSwKICBwcm9wczogewogICAgdHJlZU5vZGVzOiBBcnJheSwKICAgIHJlYWRPbmx5OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBzZWxlY3ROb2RlOiBPYmplY3QsCiAgICBjdXJyZW50UHJvamVjdDogT2JqZWN0LAogICAgY29uZGl0aW9uOiBPYmplY3QsCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy4kZXZlbnRCdXMuJG9uKCd0ZXN0Q2FzZUFkZE9yRWRpdE9yQ29weScsICh0ZXN0Y2FzZTogdHlwZUNhc2VEYXRhLCBpc0NvcHk6IGJvb2xlYW4pID0+IHsKICAgICAgdGhpcy5vcGVuKHRlc3RjYXNlLCBpc0NvcHkpCiAgICB9KQogIH0sCiAgbWV0aG9kczogewogICAgcmVsb2FkKCkgewogICAgICB0aGlzLmlzU3RlcFRhYmxlQWxpdmUgPSBmYWxzZQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiAodGhpcy5pc1N0ZXBUYWJsZUFsaXZlID0gdHJ1ZSkpCiAgICB9LAogICAgb3Blbih0ZXN0Q2FzZTogdHlwZUNhc2VEYXRhLCBpc0NvcHk6IEJvb2xlYW4pIHsKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWUKICAgICAgLy8g5by65Yi2562J5b6FRE9N5Yqg6L295a6M5q+V5YaN5pON5L2cCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICBjb25zdCBmb3JtOiB0eXBlQ2FzZURhdGEgJiB0eXBlQ2FzZUZvcm0gPSBjbG9uZURlZXAodGVzdENhc2UgfHwgY2FzZUZvcm0pCiAgICAgICAgdGhpcy5vcGVyYXRpb24gPSBvcGVyYXRpb25FbnVtLkFERAogICAgICAgIGlmICh0ZXN0Q2FzZSkgewogICAgICAgICAgLy8g5L+u5pS55oiW5p+l55yLCiAgICAgICAgICBpZiAodGhpcy5yZWFkT25seSkgewogICAgICAgICAgICB0aGlzLm9wZXJhdGlvbiA9IG9wZXJhdGlvbkVudW0uVklFVwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5vcGVyYXRpb24gPSBvcGVyYXRpb25FbnVtLkVESVQKICAgICAgICAgICAgZm9ybS5tb2R1bGUgPSB0ZXN0Q2FzZS50cmVlSWQKICAgICAgICAgICAgZm9ybS5tYWludGFpbmVyID0gdGVzdENhc2UucWEKICAgICAgICAgICAgZm9ybS5wcmlvcml0eSA9IHRlc3RDYXNlLmltcG9ydGFuY2UKICAgICAgICAgICAgZm9ybS5tZXRob2QgPSB0ZXN0Q2FzZS5leGVjdXRpb25UeXBlCiAgICAgICAgICAgIGZvcm0ucHJlcmVxdWlzaXRlID0gdGVzdENhc2UucHJlY29uZGl0aW9ucwogICAgICAgICAgfQogICAgICAgICAgLy8g5aSN5Yi2CiAgICAgICAgICBpZiAoaXNDb3B5KSB7CiAgICAgICAgICAgIHRoaXMub3BlcmF0aW9uID0gb3BlcmF0aW9uRW51bS5BREQKICAgICAgICAgICAgZm9ybS5uYW1lID0gJycKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgZm9ybS5tb2R1bGUgPSB0aGlzLnNlbGVjdE5vZGUuaWQKICAgICAgICAgIGZvcm0ubWFpbnRhaW5lciA9IHRoaXMuJHN0b3JlLnN0YXRlLmxvZ2luLnVzZXJuYW1lCiAgICAgICAgfQogICAgICAgIC8vIOayoeacieatpemqpOWKoOS4gOS4quatpemqpAogICAgICAgIGlmIChmb3JtLnN0ZXBzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgZm9ybS5zdGVwcy5wdXNoKGNhc2VTdGVwKQogICAgICAgIH0KICAgICAgICB0aGlzLiRyZWZzLnRlc3RDYXNlRm9ybS5pbml0Rm9ybShmb3JtKQogICAgICB9KQogICAgfSwKICAgIGNsb3NlKCkgewogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2UKICAgICAgdGhpcy5yZWxvYWQoKQogICAgfSwKICAgIHNhdmVDYXNlKCkgewogICAgICBjb25zdCB0ZXN0Q2FzZUZvcm0gPSB0aGlzLiRyZWZzLnRlc3RDYXNlRm9ybS4kY2hpbGRyZW5bMF0KICAgICAgdGVzdENhc2VGb3JtLnZhbGlkYXRlKCh2YWxpZDogYW55KSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB0aGlzLnRlc3RDYXNlID0gdGVzdENhc2VGb3JtLm1vZGVsCiAgICAgICAgICBjb25zdCBib2R5OiBSZXF1ZXN0Q3JlYXRlVGVzdENhc2UgPSB0aGlzLmJ1aWxkUGFyYW0oKQogICAgICAgICAgaWYgKHRoaXMub3BlcmF0aW9uID09PSBvcGVyYXRpb25FbnVtLkFERCkgewogICAgICAgICAgICBpZiAodGhpcy52YWxpZGF0ZShib2R5KSkgewogICAgICAgICAgICAgIHRlc3RDYXNlQXBpLmNyZWF0ZVRlc3RDYXNlKGJvZHkpCiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQ3JlYXRlQ29udGludWUpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3JtID0gY2xvbmVEZWVwKGNhc2VGb3JtKQogICAgICAgICAgICAgICAgICAgIGZvcm0ubW9kdWxlID0gdGhpcy5zZWxlY3ROb2RlLmlkCiAgICAgICAgICAgICAgICAgICAgZm9ybS5tYWludGFpbmVyID0gdGhpcy4kc3RvcmUuc3RhdGUubG9naW4udXNlcm5hbWUKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLnRlc3RDYXNlRm9ybS5pbml0Rm9ybShmb3JtKQogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoInJlZnJlc2giKQogICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5vcGVyYXRpb24gPT09IG9wZXJhdGlvbkVudW0uRURJVCkgewogICAgICAgICAgICBsZXQgdXBkYXRlQm9keTogUmVxdWVzdFVwZGF0ZVRlc3RDYXNlID0gewogICAgICAgICAgICAgIHR5cGU6IGNhc2VVcGRhdGVUeXBlRW51bS5VUERBVEVfQ0FTRSwKICAgICAgICAgICAgICBjYXNlOiBib2R5CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHRoaXMudmFsaWRhdGUoYm9keSkpIHsKICAgICAgICAgICAgICB0ZXN0Q2FzZUFwaS51cGRhdGVUZXN0Q2FzZSh0aGlzLnRlc3RDYXNlLmlkLCB1cGRhdGVCb2R5KQogICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0NyZWF0ZUNvbnRpbnVlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy50ZXN0Q2FzZUZvcm0uJGNoaWxkcmVuWzBdLnJlc2V0RmllbGRzKCkKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCJyZWZyZXNoIikKICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGJ1aWxkUGFyYW0oKSB7CiAgICAgIHRoaXMudGVzdENhc2UgPSB0aGlzLiRyZWZzLnRlc3RDYXNlRm9ybS4kY2hpbGRyZW5bMF0ubW9kZWwKICAgICAgbGV0IGJvZHk6IFJlcXVlc3RDcmVhdGVUZXN0Q2FzZSA9IHsKICAgICAgICBwcm9qSWQ6IHRoaXMuY3VycmVudFByb2plY3QuaWQsCiAgICAgICAgdHJlZUlkOiB0aGlzLnRlc3RDYXNlLm1vZHVsZSwKICAgICAgICBuYW1lOiB0aGlzLnRlc3RDYXNlLm5hbWUudHJpbSgpLAogICAgICAgIGV4ZWN1dGlvblR5cGU6IHRoaXMudGVzdENhc2UubWV0aG9kLAogICAgICAgIGNhc2VUeXBlOiB0aGlzLnRlc3RDYXNlLmNhc2VUeXBlLAogICAgICAgIGltcG9ydGFuY2U6IHRoaXMudGVzdENhc2UucHJpb3JpdHksCiAgICAgICAgcWE6IHRoaXMudGVzdENhc2UubWFpbnRhaW5lciwKICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy50ZXN0Q2FzZS5kZXNjcmlwdGlvbgogICAgICB9CiAgICAgIGlmICh0aGlzLnRlc3RDYXNlLm1ldGhvZCAhPT0gZXhlY3V0aW9uRW51bS5BVVRPKSB7CiAgICAgICAgYm9keSA9IE9iamVjdC5hc3NpZ24oe3Rlc3RJZDogbnVsbH0sIGJvZHkpCiAgICAgIH0KICAgICAgLy8g5YmN572u5p2h5Lu2CiAgICAgIGlmICh0aGlzLnRlc3RDYXNlLnByZXJlcXVpc2l0ZS50cmltKCkpIHsKICAgICAgICBib2R5ID0gT2JqZWN0LmFzc2lnbih7cHJlY29uZGl0aW9uczogdGhpcy50ZXN0Q2FzZS5wcmVyZXF1aXNpdGV9LCBib2R5KQogICAgICB9CiAgICAgIC8vIOayoeaciea1i+ivleatpemqpAogICAgICBpZiAodGhpcy50ZXN0Q2FzZS5zdGVwc1swXS5kZXNjICE9PSAnJykgewogICAgICAgIGJvZHkgPSBPYmplY3QuYXNzaWduKHtzdGVwczogdGhpcy50ZXN0Q2FzZS5zdGVwc30sIGJvZHkpCiAgICAgIH0KICAgICAgcmV0dXJuIGJvZHkKICAgIH0sCiAgICB2YWxpZGF0ZShwYXJhbTogUmVxdWVzdENyZWF0ZVRlc3RDYXNlKSB7CiAgICAgIGlmIChwYXJhbS5zdGVwcykgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyYW0uc3RlcHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGlmICgocGFyYW0uc3RlcHNbaV0uYWN0aW9ucyAmJiBwYXJhbS5zdGVwc1tpXS5hY3Rpb25zLmxlbmd0aCA+IDMwMCkgfHwKICAgICAgICAgICAgKHBhcmFtLnN0ZXBzW2ldLmV4cGVjdGVkcmVzdWx0cyAmJiBwYXJhbS5zdGVwc1tpXS5leHBlY3RlZHJlc3VsdHMubGVuZ3RoID4gMzAwKSkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+atpemqpOaPj+i/sCzpooTmnJ/nu5Pmnpzplb/luqblv4XpobvlsI/kuo4zMDAnKQogICAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWUKICAgIH0sCiAgfQp9Cg=="},{"version":3,"sources":["TestCaseEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TestCaseEdit.vue","sourceRoot":"src/pages/track/case/components","sourcesContent":["<template>\n  <div>\n    <el-dialog\n      :close-on-click-modal=\"false\"\n      :title=\"operationType[operation]\"\n      :visible.sync=\"dialogFormVisible\"\n      class=\"dialog-title\"\n      width=\"65%\"\n      @close=\"close\"\n    >\n      <test-case-form ref=\"testCaseForm\" :condition=\"condition\" :read-only=\"readOnly\"/>\n\n      <template slot=\"footer\">\n        <el-switch\n          v-if=\"operation === operationEnum.ADD\"\n          v-model=\"isCreateContinue\"\n          active-text=\"保存并继续创建\"\n        />\n        <dialog-footer v-if=\"!readOnly\" @cancel=\"dialogFormVisible = false\" @confirm=\"saveCase\"/>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {testCaseApi} from \"@/api\"\nimport {RequestCreateTestCase, RequestUpdateTestCase} from \"@/api/types/testTrack\"\nimport {typeCaseData, typeCaseForm} from \"@/api/types/testTrackType\"\nimport DialogFooter from '@/common/components/DialogFooter.vue'\nimport {caseUpdateTypeEnum, executionEnum, operationEnum, operationType} from '@/constant/TestCase'\nimport TestCaseForm from \"@/pages/track/case/components/TestCaseForm.vue\"\nimport {caseForm, caseStep} from \"@/pages/track/case/forms\"\nimport {cloneDeep} from \"lodash\"\n\n\nexport default {\n  name: \"TestCaseEdit\",\n  components: {TestCaseForm, DialogFooter},\n  data() {\n    return {\n      operationEnum: operationEnum,\n      operationType: operationType,\n      testCase: {},\n      operation: '',\n      dialogFormVisible: false,\n      isCreateContinue: false,\n      isStepTableAlive: true,\n    }\n  },\n  props: {\n    treeNodes: Array,\n    readOnly: {\n      type: Boolean,\n      default: true\n    },\n    selectNode: Object,\n    currentProject: Object,\n    condition: Object,\n  },\n  mounted() {\n    this.$eventBus.$on('testCaseAddOrEditOrCopy', (testcase: typeCaseData, isCopy: boolean) => {\n      this.open(testcase, isCopy)\n    })\n  },\n  methods: {\n    reload() {\n      this.isStepTableAlive = false\n      this.$nextTick(() => (this.isStepTableAlive = true))\n    },\n    open(testCase: typeCaseData, isCopy: Boolean) {\n      this.dialogFormVisible = true\n      // 强制等待DOM加载完毕再操作\n      this.$nextTick(() => {\n        const form: typeCaseData & typeCaseForm = cloneDeep(testCase || caseForm)\n        this.operation = operationEnum.ADD\n        if (testCase) {\n          // 修改或查看\n          if (this.readOnly) {\n            this.operation = operationEnum.VIEW\n          } else {\n            this.operation = operationEnum.EDIT\n            form.module = testCase.treeId\n            form.maintainer = testCase.qa\n            form.priority = testCase.importance\n            form.method = testCase.executionType\n            form.prerequisite = testCase.preconditions\n          }\n          // 复制\n          if (isCopy) {\n            this.operation = operationEnum.ADD\n            form.name = ''\n          }\n        } else {\n          form.module = this.selectNode.id\n          form.maintainer = this.$store.state.login.username\n        }\n        // 没有步骤加一个步骤\n        if (form.steps.length === 0) {\n          form.steps.push(caseStep)\n        }\n        this.$refs.testCaseForm.initForm(form)\n      })\n    },\n    close() {\n      this.dialogFormVisible = false\n      this.reload()\n    },\n    saveCase() {\n      const testCaseForm = this.$refs.testCaseForm.$children[0]\n      testCaseForm.validate((valid: any) => {\n        if (valid) {\n          this.testCase = testCaseForm.model\n          const body: RequestCreateTestCase = this.buildParam()\n          if (this.operation === operationEnum.ADD) {\n            if (this.validate(body)) {\n              testCaseApi.createTestCase(body)\n                .then(() => {\n                  if (this.isCreateContinue) {\n                    const form = cloneDeep(caseForm)\n                    form.module = this.selectNode.id\n                    form.maintainer = this.$store.state.login.username\n                    this.$refs.testCaseForm.initForm(form)\n                  } else {\n                    this.dialogFormVisible = false\n                  }\n                  this.$emit(\"refresh\")\n                  return\n                })\n            }\n          } else if (this.operation === operationEnum.EDIT) {\n            let updateBody: RequestUpdateTestCase = {\n              type: caseUpdateTypeEnum.UPDATE_CASE,\n              case: body\n            }\n            if (this.validate(body)) {\n              testCaseApi.updateTestCase(this.testCase.id, updateBody)\n                .then(() => {\n                  if (this.isCreateContinue) {\n                    this.$refs.testCaseForm.$children[0].resetFields()\n                  } else {\n                    this.dialogFormVisible = false\n                  }\n                  this.$emit(\"refresh\")\n                  return\n                })\n            }\n          }\n        }\n      })\n    },\n    buildParam() {\n      this.testCase = this.$refs.testCaseForm.$children[0].model\n      let body: RequestCreateTestCase = {\n        projId: this.currentProject.id,\n        treeId: this.testCase.module,\n        name: this.testCase.name.trim(),\n        executionType: this.testCase.method,\n        caseType: this.testCase.caseType,\n        importance: this.testCase.priority,\n        qa: this.testCase.maintainer,\n        description: this.testCase.description\n      }\n      if (this.testCase.method !== executionEnum.AUTO) {\n        body = Object.assign({testId: null}, body)\n      }\n      // 前置条件\n      if (this.testCase.prerequisite.trim()) {\n        body = Object.assign({preconditions: this.testCase.prerequisite}, body)\n      }\n      // 没有测试步骤\n      if (this.testCase.steps[0].desc !== '') {\n        body = Object.assign({steps: this.testCase.steps}, body)\n      }\n      return body\n    },\n    validate(param: RequestCreateTestCase) {\n      if (param.steps) {\n        for (let i = 0; i < param.steps.length; i++) {\n          if ((param.steps[i].actions && param.steps[i].actions.length > 300) ||\n            (param.steps[i].expectedresults && param.steps[i].expectedresults.length > 300)) {\n            this.$message.warning('步骤描述,预期结果长度必须小于300')\n            return false\n          }\n        }\n      }\n      return true\n    },\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"src/assets/css/utils\";\n\n.dialog-title {\n  @extend %dialog-title\n}\n\n.el-switch {\n  margin-bottom: 10px\n}\n</style>\n"]}]}
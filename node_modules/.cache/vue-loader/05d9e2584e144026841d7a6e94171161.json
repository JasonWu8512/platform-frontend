{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/Team/components/SprintTestStatus.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/Team/components/SprintTestStatus.vue","mtime":1655949681770},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js","mtime":1644314985388},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7amlyYUFwaX0gZnJvbSAiQC9hcGkiOwppbXBvcnQgQ29tbW9uQ29tcG9uZW50IGZyb20gIkAvcGFnZXMvdHJhY2svcGxhbi92aWV3L2NvbW9uZW50cy9yZXBvcnQvY29tcG9uZW50cy9Db21tb25Db21wb25lbnQudnVlIgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlNwcmludFRlc3RQbGFuIiwKICBjb21wb25lbnRzOiB7Q29tbW9uQ29tcG9uZW50fSwKICBwcm9wczogewogICAgc3ByaW50SWQ6IFN0cmluZywKICB9LAogIHdhdGNoOiB7CiAgICBzcHJpbnRJZCgpIHsKICAgICAgdGhpcy5nZXRTcHJpbnRTdG9yeVRlc3RTdGF0dXMoKQogICAgfSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgaW5SZWZyZXNoOiBmYWxzZSwKICAgICAgc3BWYWx1ZXM6IFtdLAogICAgICBvcHRpb25Qcm9wczogewogICAgICAgIHZhbHVlOiAnaWQnLAogICAgICAgIGxhYmVsOiAnbmFtZScsCiAgICAgICAgY2hpbGRyZW46ICdzcHJpbnRzJwogICAgICB9LAogICAgICBvcHRpb246ewogICAgICAgIGxlZ2VuZDogewogICAgICAgICAgZGF0YTogW3tuYW1lOiAn5rWL6K+V5a6M5oiQJywgdGV4dFN0eWxlOiB7Y29sb3I6ICcjNzJhOTJmJywgZm9udFdlaWdodDogJ2JvbGQnfX0sCiAgICAgICAgICAgIHtuYW1lOiAn5rWL6K+V5pyq5a6M5oiQJywgdGV4dFN0eWxlOiB7Y29sb3I6ICcjRTZBMjNDJywgZm9udFdlaWdodDogJ2JvbGQnfX0sCiAgICAgICAgICAgIHtuYW1lOiAn5rWL6K+V5pyq5byA5aeLJywgdGV4dFN0eWxlOiB7Y29sb3I6ICcjODFjYmYzJywgZm9udFdlaWdodDogJ2JvbGQnfX1dCiAgICAgICAgfSwKICAgICAgICBjb2xvcjogWyd0cmFuc3BhcmVudCddLAogICAgICAgIHRvb2x0aXA6IHsKICAgICAgICAgIHRyaWdnZXI6ICdpdGVtJywKICAgICAgICAgIGF4aXNQb2ludGVyOiB7ICAgICAgICAgICAgLy8g5Z2Q5qCH6L205oyH56S65Zmo77yM5Z2Q5qCH6L206Kem5Y+R5pyJ5pWICiAgICAgICAgICAgIHR5cGU6ICdzaGFkb3cnICAgICAgICAvLyDpu5jorqTkuLrnm7Tnur/vvIzlj6/pgInkuLrvvJonbGluZScgfCAnc2hhZG93JwogICAgICAgICAgfSwKICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgICByZXR1cm4gcGFyYW1zLm5hbWU7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB4QXhpczogewogICAgICAgICAgdHlwZTogJ2NhdGVnb3J5JywKICAgICAgICAgIGRhdGE6W10sCiAgICAgICAgICBheGlzTGFiZWw6ewogICAgICAgICAgICBpbnRlcnZhbDogMCwKICAgICAgICAgICAgcm90YXRlOiAzMCwKICAgICAgICAgIH19LAogICAgICAgIHlBeGlzOiB7CiAgICAgICAgICB0eXBlOiAndmFsdWUnLAogICAgICAgIH0sCgogICAgICAgIHNlcmllczogW10KICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgb3BlbkppcmEocGFyYW1zKSB7CiAgICAgIHdpbmRvdy5vcGVuKHBhcmFtcy5kYXRhLmtleSkKICAgIH0sCiAgICBnZXRTcHJpbnRTdG9yeVRlc3RTdGF0dXMoKSB7CiAgICAgIHRoaXMub3B0aW9uLnNlcmllcyA9IFtdCiAgICAgIHRoaXMub3B0aW9uLnhBeGlzLmRhdGEgPSBbXQogICAgICBqaXJhQXBpLmdldFNwcmludFN0b3J5VGVzdFN0YXR1cyh7c3ByaW50SWQ6IHRoaXMuc3ByaW50SWR9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5vcHRpb24ueEF4aXMuZGF0YSA9IHJlcy5kYXRhLmRhdGVzCiAgICAgICAgdGhpcy5vcHRpb24uc2VyaWVzID0gcmVzLmRhdGEuc3Rvcmllcy5tYXAoaXRlbSA9PiB7CiAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgaXRlbSwgeyJsYWJlbCI6IHsKICAgICAgICAgICAgICAibm9ybWFsIjp7CiAgICAgICAgICAgICAgICAic2hvdyI6IHRydWUsCiAgICAgICAgICAgICAgICAicG9zaXRpb24iOiAnaW5zaWRlJywKICAgICAgICAgICAgICAgICJmb3JtYXR0ZXIiOiBmdW5jdGlvbihwYXJhbXMpIHsKICAgICAgICAgICAgICAgICAgaWYgKHBhcmFtcy52YWx1ZSA+IDApIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1zLnZhbHVlOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAnICc7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gICAgICAgICAgICB9fSwKICAgICAgICAgICAgIml0ZW1TdHlsZSI6ewogICAgICAgICAgICAgICJjb2xvciI6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGlmKGl0ZW0ubmFtZSA9PT0gJ+a1i+ivleWujOaIkCcpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuICIjNzJhOTJmIgogICAgICAgICAgICAgICAgfSBlbHNlIGlmKGl0ZW0ubmFtZSA9PT0gJ+a1i+ivleacquWujOaIkCcpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuICIjRTZBMjNDIgogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuICIjODFjYmYzIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgImJhckJvcmRlckNvbG9yIjogJyNmZmYnLAogICAgICAgICAgICAgICJiYXJCb3JkZXJSYWRpdXMiOiAyfSx9KQogICAgICAgIH0pCiAgICAgIH0pLmZpbmFsbHkoKCkgPT4gewogICAgICAgIC8vIOW8uuWItuWIt+aWsOWbvuihqO+8jOa4hemZpOWbvuihqOaYvuekuue8k+WtmAogICAgICAgIHRoaXMuaW5SZWZyZXNoID0gZmFsc2U7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgdGhpcy5pblJlZnJlc2ggPSB0cnVlOwogICAgICAgIH0pOwogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgfSwKfQo="},{"version":3,"sources":["SprintTestStatus.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SprintTestStatus.vue","sourceRoot":"src/pages/Team/components","sourcesContent":["<template>\n  <div>\n    <common-component title=\"测试规划图\" v-loading=\"loading\">\n      <div v-if=\"option.series.length === 0\" style=\"font-size: 14px; color: #909399; text-align: center;\">-->\n        <span>暂无数据</span>\n      </div>\n      <div v-else>\n        <chart :autoresize=\"true\" :options=\"option\" class=\"e-chart\" v-if=\"inRefresh\" @click=\"openJira\"></chart>\n      </div>\n\n    </common-component>\n  </div>\n</template>\n\n<script>\nimport {jiraApi} from \"@/api\";\nimport CommonComponent from \"@/pages/track/plan/view/comonents/report/components/CommonComponent.vue\"\nexport default {\n  name: \"SprintTestPlan\",\n  components: {CommonComponent},\n  props: {\n    sprintId: String,\n  },\n  watch: {\n    sprintId() {\n      this.getSprintStoryTestStatus()\n    },\n  },\n  data() {\n    return {\n      loading: false,\n      inRefresh: false,\n      spValues: [],\n      optionProps: {\n        value: 'id',\n        label: 'name',\n        children: 'sprints'\n      },\n      option:{\n        legend: {\n          data: [{name: '测试完成', textStyle: {color: '#72a92f', fontWeight: 'bold'}},\n            {name: '测试未完成', textStyle: {color: '#E6A23C', fontWeight: 'bold'}},\n            {name: '测试未开始', textStyle: {color: '#81cbf3', fontWeight: 'bold'}}]\n        },\n        color: ['transparent'],\n        tooltip: {\n          trigger: 'item',\n          axisPointer: {            // 坐标轴指示器，坐标轴触发有效\n            type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'\n          },\n          formatter: function (params) {\n            return params.name;\n          }\n        },\n        xAxis: {\n          type: 'category',\n          data:[],\n          axisLabel:{\n            interval: 0,\n            rotate: 30,\n          }},\n        yAxis: {\n          type: 'value',\n        },\n\n        series: []\n      }\n    }\n  },\n  methods: {\n    openJira(params) {\n      window.open(params.data.key)\n    },\n    getSprintStoryTestStatus() {\n      this.option.series = []\n      this.option.xAxis.data = []\n      jiraApi.getSprintStoryTestStatus({sprintId: this.sprintId}).then(res => {\n        this.option.xAxis.data = res.data.dates\n        this.option.series = res.data.stories.map(item => {\n          return Object.assign({}, item, {\"label\": {\n              \"normal\":{\n                \"show\": true,\n                \"position\": 'inside',\n                \"formatter\": function(params) {\n                  if (params.value > 0) {\n                    return params.value;\n                  } else {\n                    return ' ';\n                  }\n                }            }},\n            \"itemStyle\":{\n              \"color\": function () {\n                if(item.name === '测试完成') {\n                  return \"#72a92f\"\n                } else if(item.name === '测试未完成') {\n                  return \"#E6A23C\"\n                } else {\n                  return \"#81cbf3\"\n                }\n              },\n              \"barBorderColor\": '#fff',\n              \"barBorderRadius\": 2},})\n        })\n      }).finally(() => {\n        // 强制刷新图表，清除图表显示缓存\n        this.inRefresh = false;\n        this.$nextTick(() => {\n          this.inRefresh = true;\n        });\n        this.loading = false;\n      });\n    },\n  },\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.e-chart {\n  width: 100%;\n  height: 300px;\n  margin: 0 auto\n}\n</style>\n"]}]}
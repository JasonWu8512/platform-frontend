{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/coverage/DeployServerRecord.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/coverage/DeployServerRecord.vue","mtime":1655949681772},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js","mtime":1644314985388},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/ts-loader/index.js","mtime":1644314987889},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCB7Y292ZXJhZ2VBcGl9IGZyb20gIkAvYXBpIgppbXBvcnQgVGFibGVQYWdpbmF0aW9uIGZyb20gIkAvY29tbW9uL2NvbXBvbmVudHMvcGFnaW5hdGlvbi9UYWJsZVBhZ2luYXRpb24udnVlIgppbXBvcnQgVGFibGVIZWFkZXIgZnJvbSAiQC9jb21tb24vY29tcG9uZW50cy9UYWJsZUhlYWRlci52dWUiCmltcG9ydCB7UEFHSU5BVElPTl9TSVpFfSBmcm9tICJAL2NvbnN0YW50IgoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJEZXBsb3lTZXJ2ZXJSZWNvcmQiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb25kaXRpb246IHt9LAogICAgICB0b3RhbDogMCwKICAgICAgcGFnZVNpemU6IFBBR0lOQVRJT05fU0laRS5MQVJHRSwKICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgIHVzZXJQaXBlbGluZUlkOiB0cnVlLAogICAgfQogIH0sCiAgY29tcG9uZW50czoge1RhYmxlUGFnaW5hdGlvbiwgVGFibGVIZWFkZXJ9LAogIGNvbXB1dGVkOiB7CiAgICBwaXBlbGluZUlkKCkgewogICAgICByZXR1cm4gdGhpcy4kcm91dGUucGFyYW1zLnBpcGVsaW5lSWQgPyB0aGlzLiRyb3V0ZS5wYXJhbXMucGlwZWxpbmVJZCA6ICcnCiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5nZXREZXBsb3lSZWNvcmQoKQogIH0sCiAgbWV0aG9kczogewogICAgdGFnVHlwZShyb3c6IGFueSl7CiAgICAgIGlmIChyb3cuc3RhdHVzID09PSAnc3VjY2VzcycpIHsKICAgICAgICByZXR1cm4gJ3N1Y2Nlc3MnCiAgICAgIH1lbHNlIGlmKHJvdy5zdGF0dXMgPT09ICdydW5uaW5nJykgewogICAgICAgIHJldHVybiAnaW5mbycKICAgICAgfWVsc2UgaWYocm93LnN0YXR1cyA9PT0gJ3BlbmRpbmcnKSB7CiAgICAgICAgcmV0dXJuICcnCiAgICAgIH1lbHNlIGlmKHJvdy5zdGF0dXMgPT09ICdmYWlsJykgewogICAgICAgIHJldHVybiAnZGFuZ2VyJwogICAgICB9CiAgICB9LAogICAgZ2V0RGVwbG95UmVjb3JkKHZhbHVlPzogc3RyaW5nKSB7CiAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICBvZmZzZXQ6IHRoaXMucGFnZVNpemUgKiAodGhpcy5jdXJyZW50UGFnZSAtIDEpLAogICAgICAgIGxpbWl0OiB0aGlzLnBhZ2VTaXplLAogICAgICAgIGpvYk5hbWU6IHZhbHVlLAogICAgICAgIHBpcGVsaW5lSWQ6IHRoaXMucGlwZWxpbmVJZAogICAgICB9CiAgICAgIGNvdmVyYWdlQXBpLmdldFNlcnZlckplbmtpbnNEZXBsb3lIaXN0b3J5KHBhcmFtcykudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzLmRhdGEuZGF0YQogICAgICAgIHRoaXMudG90YWwgPSByZXMuZGF0YS50b3RhbAogICAgICB9KQogICAgfSwKICAgIGhhbmRsZUdldERlcGxveVJlY29yZCh2YWx1ZT8gOnN0cmluZykgewogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gMQogICAgICB0aGlzLmdldERlcGxveVJlY29yZCh2YWx1ZSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["DeployServerRecord.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DeployServerRecord.vue","sourceRoot":"src/pages/coverage","sourcesContent":["<template>\n  <el-card>\n    <template slot=\"header\">\n      <table-header :condition=\"condition\"\n                    create-tip=\"创建流水线\"\n                    placeholder=\"根据job名称搜索\"\n                    :showCreate=\"false\"\n                    :showSearch=\"pipelineId === ''\"\n                    @search=\"handleGetDeployRecord\"\n      >\n        <template slot=\"title\">\n          <div>服务端发版记录</div>\n        </template>\n      </table-header>\n\n    </template>\n    <el-table :data=\"tableData\" size=\"medium\">\n      <el-table-column prop=\"jobName\" label=\"job名称\" width=\"300\"/>\n      <el-table-column prop=\"username\" label=\"触发者\"/>\n      <el-table-column prop=\"buildId\" label=\"构建号\"/>\n      <el-table-column prop=\"createdAt\" label=\"构建时间\">\n        <template v-slot:default=\"scope\">\n          <span>{{new Date(scope.row.createdAt).format('yyyy-MM-dd hh:mm:ss')}}</span>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"commitId\" label=\"构建分支/commitId\"/>\n      <el-table-column prop=\"status\" label=\"构建状态\">\n        <template v-slot:default=\"scope\">\n          <el-tag :type=\"tagType(scope.row)\" effect=\"dark\">{{scope.row.statusChinese}}</el-tag>\n        </template>\n      </el-table-column>\n    </el-table>\n    <table-pagination\n      :change=\"getDeployRecord\"\n      :current-page.sync=\"currentPage\"\n      :page-size.sync=\"pageSize\"\n      :total=\"total\"\n    />\n  </el-card>\n\n</template>\n\n<script lang=\"ts\">\nimport {coverageApi} from \"@/api\"\nimport TablePagination from \"@/common/components/pagination/TablePagination.vue\"\nimport TableHeader from \"@/common/components/TableHeader.vue\"\nimport {PAGINATION_SIZE} from \"@/constant\"\n\nexport default {\n  name: \"DeployServerRecord\",\n  data() {\n    return {\n      condition: {},\n      total: 0,\n      pageSize: PAGINATION_SIZE.LARGE,\n      currentPage: 1,\n      tableData: [],\n      userPipelineId: true,\n    }\n  },\n  components: {TablePagination, TableHeader},\n  computed: {\n    pipelineId() {\n      return this.$route.params.pipelineId ? this.$route.params.pipelineId : ''\n    }\n  },\n  mounted() {\n    this.getDeployRecord()\n  },\n  methods: {\n    tagType(row: any){\n      if (row.status === 'success') {\n        return 'success'\n      }else if(row.status === 'running') {\n        return 'info'\n      }else if(row.status === 'pending') {\n        return ''\n      }else if(row.status === 'fail') {\n        return 'danger'\n      }\n    },\n    getDeployRecord(value?: string) {\n      const params = {\n        offset: this.pageSize * (this.currentPage - 1),\n        limit: this.pageSize,\n        jobName: value,\n        pipelineId: this.pipelineId\n      }\n      coverageApi.getServerJenkinsDeployHistory(params).then(res => {\n        this.tableData = res.data.data\n        this.total = res.data.total\n      })\n    },\n    handleGetDeployRecord(value? :string) {\n      this.currentPage = 1\n      this.getDeployRecord(value)\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}
{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/dash/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/dash/index.vue","mtime":1658891023011},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js","mtime":1644314985388},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBqaXJhQXBpIGZyb20gJ0AvYXBpL2ppcmEnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImRhc2hib2FyZCIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbHVlOiBbXSwKICAgICAgcHJvaklkOiAnJywKICAgICAgYWN0aXZlRHJvcDogJ+WFqOmDqOmhueebricsCiAgICAgIGJ1Z19zdW1tYXJ5OiBbXQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHByb2plY3RzKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuamlyYS5wcm9qZWN0cwogICAgfSwKICAgIHRpbWVEZWZhdWx0KCkgewogICAgICBsZXQgdGltZTEgPSBuZXcgRGF0ZSgpCiAgICAgIHRpbWUxLnNldFRpbWUodGltZTEuZ2V0VGltZSgpIC0gKDI0ICogNjAgKiA2MCAqIDEwMDApKQogICAgICBsZXQgWTEgPSB0aW1lMS5nZXRGdWxsWWVhcigpCiAgICAgIGxldCBNMSA9ICgodGltZTEuZ2V0TW9udGgoKSArIDEpID4gOSA/ICh0aW1lMS5nZXRNb250aCgpICsgMSkgOiAnMCcgKyAodGltZTEuZ2V0TW9udGgoKSArIDEpKQogICAgICBsZXQgRDEgPSAodGltZTEuZ2V0RGF0ZSgpID4gOSA/IHRpbWUxLmdldERhdGUoKSA6ICcwJyArIHRpbWUxLmdldERhdGUoKSkKICAgICAgbGV0IHRpbWVyMSA9IFkxICsgJy0nICsgTTEgKyAnLScgKyBEMSAvLyDlvZPliY3ml7bpl7QKICAgICAgbGV0IHRpbWUyID0gbmV3IERhdGUoKQogICAgICAvLyDlvoDliY0zMOWkqQogICAgICB0aW1lMi5zZXRUaW1lKHRpbWUyLmdldFRpbWUoKSAtICgyNCAqIDYwICogNjAgKiAxMDAwICogMzApKQogICAgICBsZXQgWTIgPSB0aW1lMi5nZXRGdWxsWWVhcigpCiAgICAgIGxldCBNMiA9ICgodGltZTIuZ2V0TW9udGgoKSArIDEpID4gOSA/ICh0aW1lMi5nZXRNb250aCgpICsgMSkgOiAnMCcgKyAodGltZTIuZ2V0TW9udGgoKSArIDEpKQogICAgICBsZXQgRDIgPSAodGltZTIuZ2V0RGF0ZSgpID4gOSA/IHRpbWUyLmdldERhdGUoKSA6ICcwJyArIHRpbWUyLmdldERhdGUoKSkKICAgICAgbGV0IHRpbWVyMiA9IFkyICsgJy0nICsgTTIgKyAnLScgKyBEMiAvLyDkuYvliY3nmoQ35aSp5oiW6ICFMzDlpKkKICAgICAgLy8gY29uc29sZS5sb2codGltZXIxLCB0aW1lcjIpCiAgICAgIHJldHVybiBbdGltZXIyLCB0aW1lcjFdCiAgICB9CgogIH0sCiAgbWV0aG9kczogewogICAgY2hhbmdlX3Byb2ppZChjb21tYW5kKSB7CiAgICAgIGlmIChjb21tYW5kIDwgMCkgewogICAgICAgIHRoaXMucHJvaklkID0gJyc7CiAgICAgICAgdGhpcy5hY3RpdmVEcm9wID0gJ+WFqOmDqOmhueebric7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5wcm9qSWQgPSB0aGlzLnByb2plY3RzW2NvbW1hbmRdLmlkOwogICAgICAgIHRoaXMuYWN0aXZlRHJvcCA9IHRoaXMucHJvamVjdHNbY29tbWFuZF0ubmFtZTsKICAgICAgfQogICAgICB0aGlzLmdldEJ1Z1N1bW1hcnkoKQogICAgfSwKICAgIGdldEJ1Z1N1bW1hcnkoKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdkYXRlcmFuZ2UnLCB0aGlzLnZhbHVlKQogICAgICAvLyBjb25zb2xlLmxvZygncHJvanMnLCB0aGlzLnByb2plY3RzKQogICAgICBqaXJhQXBpLmdldEJ1Z1N1bW1hcnkoe3N0YXJ0X2RhdGU6IHRoaXMudmFsdWVbMF0sIGVuZF9kYXRlOiB0aGlzLnZhbHVlWzFdLCBwcm9qSWQ6IHRoaXMucHJvaklkfSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuYnVnX3N1bW1hcnkgPSByZXMuZGF0YQogICAgICB9KQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIC8vIGNvbnNvbGUubG9nKCdwcm9qcycsIHRoaXMuJHN0b3JlLnN0YXRlLmppcmEucHJvamVjdHMpCiAgICB0aGlzLnZhbHVlID0gdGhpcy50aW1lRGVmYXVsdAogICAgdGhpcy5nZXRCdWdTdW1tYXJ5KCkKICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/dash","sourcesContent":["<template>\n  <div>\n    <el-header class=\"dashboard-header\" height=\"40px\">\n      <el-row>\n        <el-col class=\"dashboard-header-col\">\n          <el-dropdown placement=\"\" @command=\"change_projid\">\n          <span class=\"el-dropdown-link\">\n        {{ activeDrop }}\n            <i class=\"el-icon-arrow-down el-icon--right\"/>\n            <el-dropdown-menu>\n              <el-dropdown-item command=\"-1\">全部项目</el-dropdown-item>\n              <el-dropdown-item\n                  v-for=\"(item,index) in projects\"\n                  :key=\"index\"\n                  :command=\"index\"\n              >\n                {{ item.name }}\n              </el-dropdown-item>\n            </el-dropdown-menu>\n      </span>\n          </el-dropdown>\n          <el-date-picker\n              v-model=\"value\"\n              :default-time=\"['00:00:00', '23:59:59']\"\n              align=\"right\"\n              end-placeholder=\"结束日期\"\n              range-separator=\"至\"\n              start-placeholder=\"开始日期\"\n              style=\"margin-left: 20px\"\n              type=\"daterange\"\n              unlink-panels\n              value-format=\"yyyy-MM-dd\"\n              @change=\"getBugSummary\">\n          </el-date-picker>\n        </el-col>\n      </el-row>\n    </el-header>\n    <div style=\"margin: 20px 0\">\n      <el-card shadow=\"never\" style=\"padding: 16px; border: none\">\n        <el-row>\n          <el-col v-for=\"(data, index) in bug_summary\" :key=\"index\" :span=\"8\">\n            <div class=\"col-title-style\">\n              <span>{{ data.name }}</span>\n            </div>\n            <div class=\"col-data-style\">\n              <span>{{ data.data }}</span>\n            </div>\n            <div v-if=\"index > 0\" class=\"yBar\"></div>\n          </el-col>\n        </el-row>\n      </el-card>\n    </div>\n    <div style=\"margin: 20px 0\">\n      <el-card>\n        <el-row>\n          <el-col :offset=\"1\" :span=\"7\">\n            <div class=\"col-title-style\">\n              <el-progress type=\"circle\" :percentage=\"25\"></el-progress>\n            </div>\n          </el-col>\n          <el-col :span=\"8\">\n            <div class=\"col-title-style\">\n              <el-progress type=\"circle\" :percentage=\"25\"></el-progress>\n            </div>\n            <div class=\"yBar\"></div>\n          </el-col>\n          <el-col :span=\"8\">\n            <div class=\"col-title-style\">\n              <el-progress type=\"circle\" :percentage=\"25\"></el-progress>\n            </div>\n            <div class=\"yBar\"></div>\n          </el-col>\n        </el-row>\n        <!-- <el-row>\n          <el-col :offset=\"1\" :span=\"7\">\n            <div class=\"col-title-style\">\n              <el-progress :percentage=\"scope.row.percentage\"/>\n            </div>\n          </el-col>\n          <el-col :span=\"8\">\n            <div class=\"col-title-style\">\n              <el-progress type=\"circle\" :percentage=\"25\"></el-progress>\n            </div>\n            <div class=\"yBar\"></div>\n          </el-col>\n          <el-col :span=\"8\">\n            <div class=\"col-title-style\">\n              <el-progress type=\"circle\" :percentage=\"25\"></el-progress>\n            </div>\n            <div class=\"yBar\"></div>\n          </el-col>\n        </el-row> -->\n      </el-card> \n    </div>\n  </div>\n\n\n</template>\n\n<script>\nimport jiraApi from '@/api/jira'\n\nexport default {\n  name: \"dashboard\",\n  data() {\n    return {\n      value: [],\n      projId: '',\n      activeDrop: '全部项目',\n      bug_summary: []\n    }\n  },\n  computed: {\n    projects() {\n      return this.$store.state.jira.projects\n    },\n    timeDefault() {\n      let time1 = new Date()\n      time1.setTime(time1.getTime() - (24 * 60 * 60 * 1000))\n      let Y1 = time1.getFullYear()\n      let M1 = ((time1.getMonth() + 1) > 9 ? (time1.getMonth() + 1) : '0' + (time1.getMonth() + 1))\n      let D1 = (time1.getDate() > 9 ? time1.getDate() : '0' + time1.getDate())\n      let timer1 = Y1 + '-' + M1 + '-' + D1 // 当前时间\n      let time2 = new Date()\n      // 往前30天\n      time2.setTime(time2.getTime() - (24 * 60 * 60 * 1000 * 30))\n      let Y2 = time2.getFullYear()\n      let M2 = ((time2.getMonth() + 1) > 9 ? (time2.getMonth() + 1) : '0' + (time2.getMonth() + 1))\n      let D2 = (time2.getDate() > 9 ? time2.getDate() : '0' + time2.getDate())\n      let timer2 = Y2 + '-' + M2 + '-' + D2 // 之前的7天或者30天\n      // console.log(timer1, timer2)\n      return [timer2, timer1]\n    }\n\n  },\n  methods: {\n    change_projid(command) {\n      if (command < 0) {\n        this.projId = '';\n        this.activeDrop = '全部项目';\n      } else {\n        this.projId = this.projects[command].id;\n        this.activeDrop = this.projects[command].name;\n      }\n      this.getBugSummary()\n    },\n    getBugSummary() {\n      // console.log('daterange', this.value)\n      // console.log('projs', this.projects)\n      jiraApi.getBugSummary({start_date: this.value[0], end_date: this.value[1], projId: this.projId}).then(res => {\n        this.bug_summary = res.data\n      })\n    }\n  },\n  mounted() {\n    // console.log('projs', this.$store.state.jira.projects)\n    this.value = this.timeDefault\n    this.getBugSummary()\n  }\n}\n</script>\n\n\n<style lang=\"scss\" scoped>\n.dashboard-header {\n  height: 40px;\n  margin: 0 auto;\n\n  background-color: #fff;\n  text-align: left;\n  padding: 5px;\n}\n\n.dashboard-header-col {\n  margin-left: 20px;\n}\n\n.el-dropdown-menu {\n  overflow: scroll;\n  max-height: 390px;\n  overflow-x: hidden;\n}\n\n.el-dropdown-link {\n  line-height: 30px;\n  color: #409EFF;\n  cursor: pointer;\n  font-size: 12px;\n  font-family: \"Microsoft Yahei\";\n}\n\n.col-title-style {\n  font-size: 18px;\n  font-weight: 400;\n  margin: 0px 0px 18px;\n}\n\n.col-data-style {\n  font-size: 24px;\n  font-weight: bolder;\n}\n\n.yBar {\n  position: absolute;\n  bottom: 0;\n  width: 2px;\n  height: 100%;\n  background-color: #d9d9d9;\n  border-radius: 1px;\n  opacity: .8;\n}\n\n</style>\n"]}]}
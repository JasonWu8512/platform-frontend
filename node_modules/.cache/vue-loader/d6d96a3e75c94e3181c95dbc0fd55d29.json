{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/track/review/components/TestCaseReviewList.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/track/review/components/TestCaseReviewList.vue","mtime":1655949681807},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js","mtime":1644314985388},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/ts-loader/index.js","mtime":1644314987889},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHt0ZXN0UmV2aWV3QXBpfSBmcm9tICJAL2FwaSIKaW1wb3J0IHtSZXF1ZXN0R2V0VGVzdENhc2VSZXZpZXdMaXN0fSBmcm9tICJAL2FwaS90eXBlcy90ZXN0UmV2aWV3IgppbXBvcnQge3R5cGVSZXZpZXdEYXRhfSBmcm9tICJAL2FwaS90eXBlcy90ZXN0UmV2aWV3VHlwZSIKaW1wb3J0IHZhcmlhYmxlcyBmcm9tICJAL2Fzc2V0cy9jc3MvdXRpbHMuc2NzcyIKaW1wb3J0IFRhYmxlUGFnaW5hdGlvbiBmcm9tICJAL2NvbW1vbi9jb21wb25lbnRzL3BhZ2luYXRpb24vVGFibGVQYWdpbmF0aW9uLnZ1ZSIKaW1wb3J0IFRhYmxlSGVhZGVyIGZyb20gIkAvY29tbW9uL2NvbXBvbmVudHMvVGFibGVIZWFkZXIudnVlIgppbXBvcnQgVGFibGVPcGVyYXRvciBmcm9tICJAL2NvbW1vbi9jb21wb25lbnRzL1RhYmxlT3BlcmF0b3IudnVlIgppbXBvcnQge19maWx0ZXIsIGZvcm1hdFRpbWV9IGZyb20gIkAvY29tbW9uL3V0aWxzIgppbXBvcnQge1BBR0lOQVRJT05fU0laRX0gZnJvbSAiQC9jb25zdGFudCIKaW1wb3J0IHtQYXRoTmFtZX0gZnJvbSAiQC9jb25zdGFudC9yb3V0ZURhdGEiCmltcG9ydCB7cmV2aWV3U3RhdHVzVHlwZX0gZnJvbSAiQC9jb25zdGFudC9UZXN0UmVpdmV3IgppbXBvcnQgUmV2aWV3U3RhdHVzVGFibGVJdGVtIGZyb20gIkAvcGFnZXMvdHJhY2svY29tbW9uL3RhYmxlSXRlbXMvUmV2aWV3U3RhdHVzVGFibGVJdGVtLnZ1ZSIKCi8vIOivhOWuoeeKtuaAgQpjb25zdCByZXZpZXdTdGF0dXNPcHRpb25zID0gT2JqZWN0LmVudHJpZXMocmV2aWV3U3RhdHVzVHlwZSkubWFwKChbdmFsdWUsIHRleHRdKSA9PiB7CiAgcmV0dXJuIHt0ZXh0OiB0ZXh0LCB2YWx1ZTogdmFsdWV9Cn0pCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlRlc3RDYXNlUmV2aWV3TGlzdCIsCiAgY29tcG9uZW50czogewogICAgUmV2aWV3U3RhdHVzVGFibGVJdGVtLAogICAgVGFibGVPcGVyYXRvciwKICAgIFRhYmxlUGFnaW5hdGlvbiwKICAgIFRhYmxlSGVhZGVyLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJldmlld1N0YXR1c09wdGlvbnM6IHJldmlld1N0YXR1c09wdGlvbnMsCiAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgIHByb2plY3RzOiB0aGlzLnByb2plY3RzLAogICAgICB1c2VyczogdGhpcy51c2VycywKICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgIHBhZ2VTaXplOiBQQUdJTkFUSU9OX1NJWkUuTEFSR0UsCiAgICAgIHRvdGFsOiAwLAogICAgICBjYXNlRmlsdGVyOiB7fSwKICAgIH0KICB9LAogIHByb3BzOiB7CiAgICBjdXJyZW50UHJvamVjdDogT2JqZWN0LAogICAgdHJlZU5vZGVzOiBBcnJheSwKICAgIHNlbGVjdE5vZGU6IE9iamVjdCwKICAgIHNlbGVjdFBhcmVudE5vZGVzOiBBcnJheSwKICAgIGNvbmRpdGlvbjogT2JqZWN0LAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGxvYWRpbmcoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5sb2FkaW5nCiAgICB9LAogICAgdGFibGUyQnRuV2lkdGgoKSB7CiAgICAgIHJldHVybiB2YXJpYWJsZXNbJ3RhYmxlMkJ0bldpZHRoJ10KICAgIH0sCiAgICB0YWJsZVRpbWVXaWR0aCgpIHsKICAgICAgcmV0dXJuIHZhcmlhYmxlc1sndGFibGVUaW1lV2lkdGgnXQogICAgfQogIH0sCiAgaW5qZWN0OiBbJ3Byb2plY3RzJywgJ3VzZXJzJ10sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdFRhYmxlRGF0YSgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBzZXRTZWxlY3RPcHRpb25zKCkgewogICAgICB0aGlzLnNldFJldmlld2VyT3B0aW9ucygpCiAgICAgIHRoaXMuJGVtaXQoInVwZGF0ZTpjb25kaXRpb24iLCB0aGlzLmNvbmRpdGlvbikKICAgIH0sCiAgICBpbml0VGFibGVEYXRhKCkgewogICAgICB0aGlzLnNldFNlbGVjdE9wdGlvbnMoKQogICAgICB0aGlzLmdldERhdGEoKQogICAgfSwKICAgIGdldERhdGEodmFsdWU/OiBzdHJpbmcpIHsKICAgICAgY29uc3QgcGFyYW1zOiBSZXF1ZXN0R2V0VGVzdENhc2VSZXZpZXdMaXN0ID0gewogICAgICAgIG5hbWU6IHZhbHVlLAogICAgICAgIG9mZnNldDogdGhpcy5wYWdlU2l6ZSAqICh0aGlzLmN1cnJlbnRQYWdlIC0gMSksCiAgICAgICAgbGltaXQ6IHRoaXMucGFnZVNpemUsCiAgICAgIH0KCiAgICAgIHRoaXMuY2FzZUZpbHRlciA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0odGhpcy4kcm91dGUucGF0aCkKICAgICAgdGhpcy5jYXNlRmlsdGVyID0gdGhpcy5jYXNlRmlsdGVyID8gSlNPTi5wYXJzZSh0aGlzLmNhc2VGaWx0ZXIpIDoge30KICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KHRoaXMuY2FzZUZpbHRlcikgIT09ICJ7fSIpIHsKICAgICAgICBPYmplY3QuYXNzaWduKHBhcmFtcywgdGhpcy5jYXNlRmlsdGVyKQogICAgICAgIHRoaXMuJHJlZnMudGFibGUuY29sdW1ucy5mb3JFYWNoKChpdGVtOiBhbnkpID0+IHsKICAgICAgICAgIGl0ZW0uZmlsdGVyZWRWYWx1ZSA9IHRoaXMuY2FzZUZpbHRlcltpdGVtLmNvbHVtbktleV0KICAgICAgICB9KQogICAgICB9CgogICAgICB0ZXN0UmV2aWV3QXBpLmdldFRlc3RDYXNlUmV2aWV3TGlzdChwYXJhbXMpCiAgICAgICAgLnRoZW4oKHtkYXRhfSkgPT4gewogICAgICAgICAgdGhpcy50b3RhbCA9IGRhdGEudG90YWwKICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gZGF0YS5kYXRhCiAgICAgICAgICB0aGlzLnRhYmxlRGF0YS5mb3JFYWNoKChpdGVtOiB0eXBlUmV2aWV3RGF0YSkgPT4gewogICAgICAgICAgICBpdGVtLnByb2pOYW1lID0gdGhpcy5wcm9qZWN0cy5maW5kKChwcm9qZWN0OiBhbnkpID0+IHByb2plY3Qua2V5ID09PSBpdGVtLnByb2pLZXkpLm5hbWUKICAgICAgICAgICAgaXRlbS5yZXZpZXdlckxpc3QgPSBpdGVtLnJldmlld2VyTGlzdCB8fCBbXQogICAgICAgICAgICBpdGVtLmNyZWF0ZWRBdCA9IGZvcm1hdFRpbWUoaXRlbS5jcmVhdGVkQXQpCiAgICAgICAgICAgIGl0ZW0udGFyZ2V0RW5kID0gZm9ybWF0VGltZShpdGVtLnRhcmdldEVuZCkKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgIH0sCiAgICBmaWx0ZXIoZmlsdGVyczogYW55KSB7CiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSAxCiAgICAgIF9maWx0ZXIoZmlsdGVycywgdGhpcy5jYXNlRmlsdGVyLCB0aGlzLiRyb3V0ZS5wYXRoKQogICAgICB0aGlzLmluaXRUYWJsZURhdGEoKQogICAgfSwKICAgIGhhbmRsZVNlYXJjaCh2YWx1ZT86IHN0cmluZykgewogICAgICB0aGlzLmdldERhdGEodmFsdWUpCiAgICB9LAogICAgaGFuZGxlRWRpdChjYXNlUmV2aWV3OiB0eXBlUmV2aWV3RGF0YSkgewogICAgICB0aGlzLiRldmVudEJ1cy4kZW1pdCgnY2FzZVJldmlld0VkaXQnLCBjYXNlUmV2aWV3KQogICAgfSwKICAgIHNldFJldmlld2VyT3B0aW9ucygpIHsKICAgICAgdGhpcy5jb25kaXRpb24ucmV2aWV3ZXJPcHRpb25zID0gdGhpcy51c2VycwogICAgfSwKICAgIGhhbmRsZVJ1bihjYXNlUmV2aWV3OiB0eXBlUmV2aWV3RGF0YSkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogUGF0aE5hbWUuVGVzdFRyYWNrQ2FzZVJldmlld1ZpZXcsCiAgICAgICAgcGFyYW1zOiB7cmV2aWV3SWQ6IGNhc2VSZXZpZXcuaWR9LAogICAgICB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["TestCaseReviewList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TestCaseReviewList.vue","sourceRoot":"src/pages/track/review/components","sourcesContent":["<template>\n  <div>\n    <el-card class=\"card-content\">\n      <template slot=\"header\">\n        <table-header :condition=\"condition\" :show-create=\"false\" @search=\"handleSearch\">\n          <template slot=\"title\">\n            <div>用例评审</div>\n          </template>\n        </table-header>\n\n      </template>\n      <el-table\n        ref=\"table\"\n        v-loading=\"loading\"\n        :data=\"tableData\"\n        @row-click=\"handleRun\"\n        @filter-change=\"filter\"\n      >\n\n        <!--  评审名称  -->\n        <el-table-column label=\"评审名称\" prop=\"name\" show-overflow-tooltip/>\n\n        <!--  评审人  -->\n        <el-table-column :filters=\"users\" column-key=\"reviewer\" label=\"评审人\" prop=\"reviewerList\">\n          <template slot-scope=\"scope\">\n            <div>{{ scope.row.reviewerList.join() }}</div>\n          </template>\n        </el-table-column>\n\n        <!--  所属项目  -->\n        <el-table-column :filters=\"projects\" column-key=\"projId\" label=\"所属项目\" prop=\"projName\"/>\n\n        <!--  发起人  -->\n        <el-table-column :filters=\"users\" column-key=\"creator\" label=\"发起人\" prop=\"creator\"/>\n\n        <!--  当前状态  -->\n        <el-table-column :filters=\"reviewStatusOptions\" column-key=\"status\" label=\"当前状态\">\n          <template slot-scope=\"scope\">\n            <review-status-table-item :value=\"scope.row.status\"/>\n          </template>\n        </el-table-column>\n\n        <!--  创建时间  -->\n        <el-table-column\n          :width=\"tableTimeWidth\"\n          label=\"创建时间\"\n          prop=\"createdAt\"\n          show-overflow-tooltip\n          sortable\n        />\n\n        <!--  截止时间  -->\n        <el-table-column\n          :width=\"tableTimeWidth\"\n          label=\"截止时间\"\n          prop=\"targetEnd\"\n          show-overflow-tooltip\n          sortable\n        >\n          <template slot-scope=\"scope\">\n            <div>{{ scope.row.targetEnd || '-' }}</div>\n          </template>\n        </el-table-column>\n\n        <!--  操作  -->\n        <el-table-column :width=\"table2BtnWidth\" label=\"操作\">\n          <template slot-scope=\"scope\">\n            <table-operator\n              show-edit\n              show-run\n              @editClick=\"handleEdit(scope.row)\"\n              @runClick=\"handleRun(scope.row)\"\n            />\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <table-pagination\n        :change=\"initTableData\"\n        :current-page.sync=\"currentPage\"\n        :page-size.sync=\"pageSize\"\n        :total=\"total\"\n      />\n\n    </el-card>\n  </div>\n</template>\n\n<script lang=\"ts\">\n\nimport {testReviewApi} from \"@/api\"\nimport {RequestGetTestCaseReviewList} from \"@/api/types/testReview\"\nimport {typeReviewData} from \"@/api/types/testReviewType\"\nimport variables from \"@/assets/css/utils.scss\"\nimport TablePagination from \"@/common/components/pagination/TablePagination.vue\"\nimport TableHeader from \"@/common/components/TableHeader.vue\"\nimport TableOperator from \"@/common/components/TableOperator.vue\"\nimport {_filter, formatTime} from \"@/common/utils\"\nimport {PAGINATION_SIZE} from \"@/constant\"\nimport {PathName} from \"@/constant/routeData\"\nimport {reviewStatusType} from \"@/constant/TestReivew\"\nimport ReviewStatusTableItem from \"@/pages/track/common/tableItems/ReviewStatusTableItem.vue\"\n\n// 评审状态\nconst reviewStatusOptions = Object.entries(reviewStatusType).map(([value, text]) => {\n  return {text: text, value: value}\n})\n\nexport default {\n  name: \"TestCaseReviewList\",\n  components: {\n    ReviewStatusTableItem,\n    TableOperator,\n    TablePagination,\n    TableHeader,\n  },\n  data() {\n    return {\n      reviewStatusOptions: reviewStatusOptions,\n      tableData: [],\n      projects: this.projects,\n      users: this.users,\n      currentPage: 1,\n      pageSize: PAGINATION_SIZE.LARGE,\n      total: 0,\n      caseFilter: {},\n    }\n  },\n  props: {\n    currentProject: Object,\n    treeNodes: Array,\n    selectNode: Object,\n    selectParentNodes: Array,\n    condition: Object,\n  },\n  computed: {\n    loading() {\n      return this.$store.state.loading\n    },\n    table2BtnWidth() {\n      return variables['table2BtnWidth']\n    },\n    tableTimeWidth() {\n      return variables['tableTimeWidth']\n    }\n  },\n  inject: ['projects', 'users'],\n  mounted() {\n    this.initTableData()\n  },\n  methods: {\n    setSelectOptions() {\n      this.setReviewerOptions()\n      this.$emit(\"update:condition\", this.condition)\n    },\n    initTableData() {\n      this.setSelectOptions()\n      this.getData()\n    },\n    getData(value?: string) {\n      const params: RequestGetTestCaseReviewList = {\n        name: value,\n        offset: this.pageSize * (this.currentPage - 1),\n        limit: this.pageSize,\n      }\n\n      this.caseFilter = sessionStorage.getItem(this.$route.path)\n      this.caseFilter = this.caseFilter ? JSON.parse(this.caseFilter) : {}\n      if (JSON.stringify(this.caseFilter) !== \"{}\") {\n        Object.assign(params, this.caseFilter)\n        this.$refs.table.columns.forEach((item: any) => {\n          item.filteredValue = this.caseFilter[item.columnKey]\n        })\n      }\n\n      testReviewApi.getTestCaseReviewList(params)\n        .then(({data}) => {\n          this.total = data.total\n          this.tableData = data.data\n          this.tableData.forEach((item: typeReviewData) => {\n            item.projName = this.projects.find((project: any) => project.key === item.projKey).name\n            item.reviewerList = item.reviewerList || []\n            item.createdAt = formatTime(item.createdAt)\n            item.targetEnd = formatTime(item.targetEnd)\n          })\n        })\n    },\n    filter(filters: any) {\n      this.currentPage = 1\n      _filter(filters, this.caseFilter, this.$route.path)\n      this.initTableData()\n    },\n    handleSearch(value?: string) {\n      this.getData(value)\n    },\n    handleEdit(caseReview: typeReviewData) {\n      this.$eventBus.$emit('caseReviewEdit', caseReview)\n    },\n    setReviewerOptions() {\n      this.condition.reviewerOptions = this.users\n    },\n    handleRun(caseReview: typeReviewData) {\n      this.$router.push({\n        name: PathName.TestTrackCaseReviewView,\n        params: {reviewId: caseReview.id},\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.el-table {\n  cursor: pointer;\n}\n\n</style>\n"]}]}
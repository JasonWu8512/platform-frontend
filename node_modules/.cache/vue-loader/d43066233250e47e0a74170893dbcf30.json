{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/track/case/TestCase.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/track/case/TestCase.vue","mtime":1655949681780},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js","mtime":1644314985388},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/ts-loader/index.js","mtime":1644314987889},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbXBvcnQge3Rlc3RDYXNlQXBpfSBmcm9tICJAL2FwaSIKaW1wb3J0IHt0eXBlTm9kZSwgdHlwZU5vZGVEYXRhfSBmcm9tICJAL2FwaS90eXBlcy90ZXN0VHJhY2tUeXBlIgppbXBvcnQgdmFyaWFibGVzIGZyb20gIkAvYXNzZXRzL2Nzcy91dGlscy5zY3NzIgppbXBvcnQgSGlkZGVuQnV0dG9uIGZyb20gIkAvY29tbW9uL2NvbXBvbmVudHMvc2lkZS9IaWRkZW5CdXR0b24udnVlIgppbXBvcnQge1BhdGhOYW1lfSBmcm9tICJAL2NvbnN0YW50L3JvdXRlRGF0YSIKaW1wb3J0IHtvcGVyYXRpb25FbnVtfSBmcm9tICJAL2NvbnN0YW50L1Rlc3RDYXNlIgppbXBvcnQgVGVzdENhc2VFZGl0IGZyb20gIkAvcGFnZXMvdHJhY2svY2FzZS9jb21wb25lbnRzL1Rlc3RDYXNlRWRpdC52dWUiCmltcG9ydCBUZXN0Q2FzZUltcG9ydCBmcm9tICJAL3BhZ2VzL3RyYWNrL2Nhc2UvY29tcG9uZW50cy9UZXN0Q2FzZUltcG9ydC52dWUiCmltcG9ydCBUZXN0Q2FzZUxpc3QgZnJvbSAiQC9wYWdlcy90cmFjay9jYXNlL2NvbXBvbmVudHMvVGVzdENhc2VMaXN0LnZ1ZSIKaW1wb3J0IE5vZGVUcmVlIGZyb20gIkAvcGFnZXMvdHJhY2svY29tbW9uL05vZGVUcmVlLnZ1ZSIKaW1wb3J0IFNlbGVjdE1lbnUgZnJvbSAiQC9wYWdlcy90cmFjay9jb21tb24vU2VsZWN0TWVudS52dWUiCgoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJUZXN0Q2FzZSIsCiAgY29tcG9uZW50czogewogICAgSGlkZGVuQnV0dG9uLAogICAgVGVzdENhc2VJbXBvcnQsCiAgICBOb2RlVHJlZSwKICAgIFRlc3RDYXNlTGlzdCwKICAgIFRlc3RDYXNlRWRpdCwKICAgIFNlbGVjdE1lbnUsCiAgfSwKICBjb21tZW50czoge30sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG9wZXJhdGlvbkVudW06IG9wZXJhdGlvbkVudW0sCiAgICAgIHByb2plY3RzOiB0aGlzLnByb2plY3RzLAogICAgICBjdXJyZW50UHJvamVjdDoge30sCiAgICAgIHRyZWVOb2RlczogW10sCiAgICAgIHNlbGVjdE5vZGU6IHt9LAogICAgICBhc2lkZUhpZGRlbjogZmFsc2UsCiAgICAgIHNlbGVjdFBhcmVudE5vZGVzOiBbXSwKICAgICAgcmVhZE9ubHk6IHRydWUsCiAgICAgIG5vZGVUcmVlRHJhZ2dhYmxlOiBmYWxzZSwKICAgICAgY29uZGl0aW9uOiB7CiAgICAgICAgLy8gY29tcG9uZW50czogVEVTVF9DQVNFX0NPTkZJR1MKICAgICAgfSwKICAgIH0KICB9LAogIGluamVjdDogWydwcm9qZWN0cyddLAogIGNvbXB1dGVkOiB7CiAgICBwcm9qZWN0SWQoKSB7CiAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5wYXJhbXMucHJvamVjdElkCiAgICB9LAogICAgbW9kdWxlSWQoKSB7CiAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5wYXJhbXMubW9kdWxlSWQKICAgIH0sCiAgICBsb2FkaW5nKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUubG9hZGluZwogICAgfSwKICAgIGhpZGRlbkJ1dHRvblBvc2l0aW9uKCkgewogICAgICByZXR1cm4gdmFyaWFibGVzWydoaWRkZW5CdXR0b25Qb3NpdGlvbiddCiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIHNlbGVjdE5vZGUoKSB7CiAgICAgIC8vIOWAvOS4uuepuuS7o+ihqOaYr+iKgueCueiiq+WIoOmZpOS6huaIluWIh+aNouS6humhueebrgogICAgICBpZiAoIXRoaXMuc2VsZWN0Tm9kZS5pZCkgewogICAgICAgIC8vIOa4hemZpOmdouWMheWxkeWvvOiIqgogICAgICAgIHRoaXMuc2VsZWN0UGFyZW50Tm9kZXMgPSBbXQogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgbGV0IGN1cnJlbnRQcm9qZWN0CiAgICBpZiAodGhpcy5wcm9qZWN0SWQpIHsKICAgICAgY3VycmVudFByb2plY3QgPSB0aGlzLnByb2plY3RzLmZpbmQoKGl0ZW06IHsgaWQ6IHN0cmluZyB9KSA9PiBpdGVtLmlkID09PSB0aGlzLnByb2plY3RJZCkKICAgIH0gZWxzZSB7CiAgICAgIGN1cnJlbnRQcm9qZWN0ID0gdGhpcy5wcm9qZWN0c1swXQogICAgfQogICAgaWYgKHRoaXMubW9kdWxlSWQpIHsKICAgICAgdGhpcy5zZWxlY3ROb2RlLmlkID0gdGhpcy5tb2R1bGVJZAogICAgfQogICAgdGhpcy5jaGFuZ2VQcm9qZWN0KGN1cnJlbnRQcm9qZWN0LCB0aGlzLm1vZHVsZUlkKQogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgY2hhbmdlUHJvamVjdChwcm9qZWN0OiB7IGlkOiBzdHJpbmcgfSwgbW9kdWxlSWQ/OiBzdHJpbmcpIHsKICAgICAgdGhpcy5jdXJyZW50UHJvamVjdCA9IHByb2plY3QKICAgICAgYXdhaXQgdGhpcy5nZXROb2RlVHJlZSgpCiAgICAgIGlmICghbW9kdWxlSWQpIHsKICAgICAgICB0aGlzLnNlbGVjdE5vZGUgPSB7fQogICAgICAgIHRoaXMucmVmcmVzaFRhYmxlKCkKICAgICAgICBhd2FpdCB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiBQYXRoTmFtZS5UZXN0VHJhY2tUZXN0Y2FzZVByb2plY3QsCiAgICAgICAgICBwYXJhbXM6IHtwcm9qZWN0SWQ6IHByb2plY3QuaWR9CiAgICAgICAgfSkKICAgICAgfQogICAgfSwKICAgIG5vZGVDaGFuZ2UoZGF0YTogdHlwZU5vZGVEYXRhLCBwTm9kZXM6IHR5cGVOb2RlW10pIHsKICAgICAgdGhpcy5zZWxlY3RQYXJlbnROb2RlcyA9IHBOb2RlcwogICAgICB0aGlzLnNlbGVjdE5vZGUgPSBkYXRhCiAgICAgIHRoaXMucmVmcmVzaFRhYmxlKCkKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6IFBhdGhOYW1lLlRlc3RUcmFja1Rlc3RjYXNlTW9kdWxlLAogICAgICAgIHBhcmFtczoge3Byb2plY3RJZDogdGhpcy5jdXJyZW50UHJvamVjdC5pZCwgbW9kdWxlSWQ6IGRhdGEuaWR9CiAgICAgIH0pCiAgICB9LAogICAgYXN5bmMgZ2V0Tm9kZVRyZWUoKSB7CiAgICAgIGlmICh0aGlzLmN1cnJlbnRQcm9qZWN0KSB7CiAgICAgICAgYXdhaXQgdGVzdENhc2VBcGkuZ2V0VGVzdENhc2VNb2R1bGVzKHtwcm9qSWQ6IHRoaXMuY3VycmVudFByb2plY3QuaWR9KQogICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHsKICAgICAgICAgICAgdGhpcy50cmVlTm9kZXMgPSBkYXRhLmRhdGEKICAgICAgICAgIH0pCiAgICAgIH0KICAgIH0sCiAgICByZWZyZXNoTm9kZSgpIHsKICAgICAgdGhpcy5nZXROb2RlVHJlZSgpCiAgICB9LAogICAgcmVmcmVzaFRhYmxlKCkgewogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgLy8g6YeN572u6aG16Z2iCiAgICAgICAgdGhpcy4kcmVmcy50ZXN0Q2FzZUxpc3QuY3VycmVudFBhZ2UgPSAxCiAgICAgICAgdGhpcy4kcmVmcy50ZXN0Q2FzZUxpc3QuaW5pdFRhYmxlRGF0YSgpCiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlQ2xpY2soaXNIaWRkZW46IEJvb2xlYW4pIHsKICAgICAgdGhpcy5hc2lkZUhpZGRlbiA9IGlzSGlkZGVuCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["TestCase.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TestCase.vue","sourceRoot":"src/pages/track/case","sourcesContent":["<template>\n  <el-container v-loading=\"loading\">\n    <el-aside v-if=\"!asideHidden\">\n      <select-menu\n        :current-data=\"currentProject\"\n        :data=\"projects\"\n        title=\"项目\"\n        @dataChange=\"changeProject\"\n      />\n      <node-tree\n        ref=\"nodeTree\"\n        :current-node.sync=\"selectNode\"\n        :current-project=\"currentProject\"\n        :disabled=\"currentProject.id === undefined\"\n        :draggable=\"nodeTreeDraggable\"\n        :tree-nodes=\"treeNodes\"\n        :type=\"operationEnum.EDIT\"\n        @nodeSelectEvent=\"nodeChange\"\n        @refreshNode=\"refreshNode\"\n        @refreshTable=\"refreshTable\"\n      />\n    </el-aside>\n    <el-main :class=\"asideHidden ? 'main-class' : ''\">\n      <test-case-list\n        ref=\"testCaseList\"\n        :condition.sync=\"condition\"\n        :current-project=\"currentProject\"\n        :read-only.sync=\"readOnly\"\n        :select-node=\"selectNode\"\n        :select-parent-nodes=\"selectParentNodes\"\n        :tree-nodes=\"treeNodes\"\n        @refresh=\"refreshTable\"\n      />\n    </el-main>\n    <test-case-edit\n      ref=\"testCaseEditDialog\"\n      :condition=\"condition\"\n      :current-project=\"currentProject\"\n      :read-only=\"readOnly\"\n      :select-node=\"selectNode\"\n      :tree-nodes=\"treeNodes\"\n      @refresh=\"refreshTable\"\n    />\n    <test-case-import\n      :current-project=\"currentProject\"\n      :select-node=\"selectNode\"\n      @refresh=\"refreshTable\"\n    />\n    <hidden-button @click=\"handleClick\"/>\n  </el-container>\n</template>\n\n<script lang=\"ts\">\nimport {testCaseApi} from \"@/api\"\nimport {typeNode, typeNodeData} from \"@/api/types/testTrackType\"\nimport variables from \"@/assets/css/utils.scss\"\nimport HiddenButton from \"@/common/components/side/HiddenButton.vue\"\nimport {PathName} from \"@/constant/routeData\"\nimport {operationEnum} from \"@/constant/TestCase\"\nimport TestCaseEdit from \"@/pages/track/case/components/TestCaseEdit.vue\"\nimport TestCaseImport from \"@/pages/track/case/components/TestCaseImport.vue\"\nimport TestCaseList from \"@/pages/track/case/components/TestCaseList.vue\"\nimport NodeTree from \"@/pages/track/common/NodeTree.vue\"\nimport SelectMenu from \"@/pages/track/common/SelectMenu.vue\"\n\n\nexport default {\n  name: \"TestCase\",\n  components: {\n    HiddenButton,\n    TestCaseImport,\n    NodeTree,\n    TestCaseList,\n    TestCaseEdit,\n    SelectMenu,\n  },\n  comments: {},\n  data() {\n    return {\n      operationEnum: operationEnum,\n      projects: this.projects,\n      currentProject: {},\n      treeNodes: [],\n      selectNode: {},\n      asideHidden: false,\n      selectParentNodes: [],\n      readOnly: true,\n      nodeTreeDraggable: false,\n      condition: {\n        // components: TEST_CASE_CONFIGS\n      },\n    }\n  },\n  inject: ['projects'],\n  computed: {\n    projectId() {\n      return this.$route.params.projectId\n    },\n    moduleId() {\n      return this.$route.params.moduleId\n    },\n    loading() {\n      return this.$store.state.loading\n    },\n    hiddenButtonPosition() {\n      return variables['hiddenButtonPosition']\n    },\n  },\n  watch: {\n    selectNode() {\n      // 值为空代表是节点被删除了或切换了项目\n      if (!this.selectNode.id) {\n        // 清除面包屑导航\n        this.selectParentNodes = []\n      }\n    }\n  },\n  mounted() {\n    let currentProject\n    if (this.projectId) {\n      currentProject = this.projects.find((item: { id: string }) => item.id === this.projectId)\n    } else {\n      currentProject = this.projects[0]\n    }\n    if (this.moduleId) {\n      this.selectNode.id = this.moduleId\n    }\n    this.changeProject(currentProject, this.moduleId)\n  },\n  methods: {\n    async changeProject(project: { id: string }, moduleId?: string) {\n      this.currentProject = project\n      await this.getNodeTree()\n      if (!moduleId) {\n        this.selectNode = {}\n        this.refreshTable()\n        await this.$router.push({\n          name: PathName.TestTrackTestcaseProject,\n          params: {projectId: project.id}\n        })\n      }\n    },\n    nodeChange(data: typeNodeData, pNodes: typeNode[]) {\n      this.selectParentNodes = pNodes\n      this.selectNode = data\n      this.refreshTable()\n      this.$router.push({\n        name: PathName.TestTrackTestcaseModule,\n        params: {projectId: this.currentProject.id, moduleId: data.id}\n      })\n    },\n    async getNodeTree() {\n      if (this.currentProject) {\n        await testCaseApi.getTestCaseModules({projId: this.currentProject.id})\n          .then((data) => {\n            this.treeNodes = data.data\n          })\n      }\n    },\n    refreshNode() {\n      this.getNodeTree()\n    },\n    refreshTable() {\n      this.$nextTick(() => {\n        // 重置页面\n        this.$refs.testCaseList.currentPage = 1\n        this.$refs.testCaseList.initTableData()\n      })\n    },\n    handleClick(isHidden: Boolean) {\n      this.asideHidden = isHidden\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"src/assets/css/utils\";\n\n.el-aside {\n  padding: 10px;\n  background: white;\n  width: $aside-tree-width !important;\n}\n\n.main-class {\n  padding: 0;\n}\n</style>\n"]}]}
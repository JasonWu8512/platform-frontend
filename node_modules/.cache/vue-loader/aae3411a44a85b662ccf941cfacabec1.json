{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/Team/components/MonthResourceReport.vue?vue&type=style&index=0&id=1eb3f332&scoped=true&lang=scss&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/Team/components/MonthResourceReport.vue","mtime":1655949681769},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/css-loader/dist/cjs.js","mtime":1644298105513},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1644314988580},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js","mtime":1644298105780},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/sass-loader/dist/cjs.js","mtime":1644314983366},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi50aXRsZSB7CiAgZm9udC1zaXplOiAyMHB4OwogIGZvbnQtd2VpZ2h0OiA3MDA7CiAgbWFyZ2luLWxlZnQ6IDVweDsKICBsaW5lLWhlaWdodDogMzVweDsKICB0ZXh0LWFsaWduOiBsZWZ0Owp9Cg=="},{"version":3,"sources":["MonthResourceReport.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0JA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MonthResourceReport.vue","sourceRoot":"src/pages/Team/components","sourcesContent":["<template>\n  <div>\n    <el-card style=\"margin-top: 20px\">\n      <div slot=\"header\" class=\"title\">\n        <span>月度资源报告</span>\n        <el-date-picker\n          v-model=\"month\"\n          :clearable=\"false\"\n          placeholder=\"选择月\"\n          type=\"month\"\n          value-format=\"yyyy-MM\"\n          style=\"width: 200px;float: right; padding: 3px 0; border: 0;\"\n        />\n      </div>\n      <el-table :data=\"tableData\"\n                row-key=\"id\"\n                size=\"medium\"\n                v-loading=\"loading\" style=\"margin-top: -10px\">\n        <template v-for=\"col in columns\">\n          <el-table-column :prop=\"col.prop\" :label=\"col.label\" :key=\"col.prop\" :width=\"col.width\">\n            <template slot-scope=\"scope\">\n              <el-input v-if=\"col.editable\" style=\"width: 60%\"\n                        @change=\"changeMark(scope.row)\"\n                        @keyup.enter.native=\"$event.target.blur\"\n                        v-model=\"scope.row[col.prop]\"></el-input>\n              <span v-else>{{scope.row[col.prop]}}</span>\n            </template>\n          </el-table-column>\n        </template>\n      </el-table>\n    </el-card>\n  </div>\n\n</template>\n\n<script>\nimport {jiraApi} from \"@/api\";\n\nexport default {\n  name: \"MonthResourceReport\",\n  data() {\n    return{\n      loading: false,\n      month: '',\n      tableData: [],\n      columns: [\n        {\n          label: \"部门\",\n          prop: \"departName\",\n          editable: false,\n        },\n        {\n          label: \"负责人\",\n          prop: \"leader\",\n          editable: false,\n        },\n        {\n          label: \"人数\",\n          prop: \"peopleCount\",\n          editable: false,\n        },\n        {\n          label: \"工作日\",\n          prop: \"workDays\",\n          editable: false,\n        },\n        {\n          label: \"总工时\",\n          prop: \"totalWorkingDays\",\n          editable: false,\n        },\n        {\n          label: \"上月开始,本月完成\",\n          prop: \"preDepartmentDays\",\n          editable: false,\n        },\n        {\n          label: \"本月开始,本月完成\",\n          prop: \"currentDepartmentDays\",\n          editable: false,\n        },\n        {\n          label: \"本月开始,下月完成\",\n          prop: \"nextDepartmentDays\",\n          editable: false,\n        },\n        {\n          label: \"工时差值\",\n          prop: \"targetDaysDiff\",\n          editable: false,\n        },\n        {\n          label: \"饱和度\",\n          prop: \"productivity\",\n          editable: false,\n        },\n        {\n          label: \"备注\",\n          prop: \"mark\",\n          editable: true,\n        }\n      ]\n    }\n\n  },\n  mounted() {\n    this.getdatatime()\n  },\n  watch: {\n    month() {\n      this.getMonthReport()\n    }\n  },\n  methods: {\n    getdatatime(){\n      this.month = new Date().format(\"yyyy-MM\");\n    },\n    getMonthReport(){\n      this.loading = true\n      jiraApi.getMonthResourceReport({month: this.month}).then(res => {\n        this.tableData = res.data.map(item => {\n          return{\n            id: item.id,\n            departName: item.departName,\n            leader: item.leader,\n            peopleCount: item.peopleCount,\n            workDays: item.workDays,\n            totalWorkingDays: item.totalWorkingDays,\n            preDepartmentDays: item.preDepartmentDays,\n            currentDepartmentDays: item.currentDepartmentDays,\n            nextDepartmentDays: item.nextDepartmentDays,\n            targetDaysDiff: item.targetDaysDiff,\n            productivity: item.productivity,\n            mark: item.mark,\n            editable: item.editable\n          }\n        })\n        this.loading = false\n      })\n\n    },\n    changeMark(row) {\n      jiraApi.editMonthResourceReport(row.id, row).then(\n        // eslint-disable-next-line no-unused-vars\n        res => {\n          this.getMonthReport()\n        }\n      )\n    },\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.title {\n  font-size: 20px;\n  font-weight: 700;\n  margin-left: 5px;\n  line-height: 35px;\n  text-align: left;\n}\n</style>\n"]}]}
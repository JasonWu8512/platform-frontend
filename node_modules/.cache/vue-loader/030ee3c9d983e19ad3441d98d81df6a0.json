{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/track/case/components/TestCaseImport.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/track/case/components/TestCaseImport.vue","mtime":1670554799290},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js","mtime":1644314985388},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/ts-loader/index.js","mtime":1644314987889},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHt0ZXN0Q2FzZUFwaX0gZnJvbSAiQC9hcGkiCmltcG9ydCB7YnVpbGRVcGxvYWRGaWxlUGFyYW1zfSBmcm9tICJAL3BhZ2VzL3RyYWNrL2NvbW1vbi91dGlscyIKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVGVzdENhc2VJbXBvcnQiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByZXN1bHQ6IHt9LAogICAgICBhY3RpdmVOYW1lOiAneG1pbmRJbXBvcnQnLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgIH0KICB9LAogIHByb3BzOiB7CiAgICBzZWxlY3ROb2RlOiBPYmplY3QsCiAgICBjdXJyZW50UHJvamVjdDogT2JqZWN0LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuJGV2ZW50QnVzLiRvbignVGVzdENhc2VJbXBvcnQnLCAoKSA9PiB7CiAgICAgIHRoaXMub3BlbigpCiAgICB9KQogIH0sCiAgbWV0aG9kczogewogICAgb3BlbigpIHsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgfSwKICAgIGNsb3NlKCkgewogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZQogICAgfSwKICAgIGhhbmRsZUJlZm9yZVVwbG9hZChmaWxlOiBGaWxlKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdoYW5kbGVCZWZvcmVVcGxvYWQnLCBmaWxlKQogICAgICBjb25zdCBpc01hdGNoID0gZmlsZS50eXBlID09PSAnYXBwbGljYXRpb24vdm5kLnhtaW5kLndvcmtib29rJyB8fCBmaWxlLm5hbWUucmVwbGFjZSgvLitcLi8sICIiKSA9PT0gJ3htaW5kJwogICAgICBpZiAoIWlzTWF0Y2gpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmlofku7blj6rmlK/mjIFYTWluZOagvOW8j++8gScpCiAgICAgIH0KICAgICAgcmV0dXJuIGlzTWF0Y2gKICAgIH0sCiAgICBoYW5kbGVVcGxvYWQoZXZlbnQ6IHsgZmlsZTogRmlsZSB9KSB7CiAgICAgIGNvbnN0IGZpbGUgPSBldmVudC5maWxlCiAgICAgIGNvbnN0IGJvZHk6IEZvcm1EYXRhID0gYnVpbGRVcGxvYWRGaWxlUGFyYW1zKHsKICAgICAgICBwcm9qSWQ6IHRoaXMuY3VycmVudFByb2plY3QuaWQsCiAgICAgICAgdHJlZUlkOiB0aGlzLnNlbGVjdE5vZGUuaWQsCiAgICAgICAgY2FzZUZpbGU6IGZpbGUKICAgICAgfSkKICAgICAgdGVzdENhc2VBcGkudXBsb2FkWE1pbmQoYm9keSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLiRlbWl0KCJyZWZyZXNoIikKICAgICAgICAgIHRoaXMuY2xvc2UoKQogICAgICAgIH0pCiAgICB9LAogIH0KfQo="},{"version":3,"sources":["TestCaseImport.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TestCaseImport.vue","sourceRoot":"src/pages/track/case/components","sourcesContent":["<template>\n  <el-dialog :visible.sync=\"dialogVisible\" class=\"dialog-title\" title=\"导入测试用例\" @close=\"close\">\n\n    <el-tabs v-model=\"activeName\" simple>\n      <!-- Xmind 导入 -->\n      <el-tab-pane label=\"思维导图\" name=\"xmindImport\" style=\"border: 0\">\n        <el-row class=\"import-row\">\n          <div class=\"el-step__icon is-text step-icon\">\n            <div class=\"el-step__icon-inner\">1</div>\n          </div>\n          <label class=\"ms-license-label\">导入说明</label>\n        </el-row>\n        <el-row class=\"import-row\">\n          <el-card :body-style=\"{ padding: '0px' }\">\n            <img alt=\"\" class=\"testcase-import-img\" src=\"@/assets/img/xmind.png\">\n          </el-card>\n\n        </el-row>\n        <el-row class=\"import-row\">\n          <div class=\"el-step__icon is-text step-icon\">\n            <div class=\"el-step__icon-inner\">2</div>\n          </div>\n          <label class=\"ms-license-label\">上传文件</label>\n        </el-row>\n        <el-row class=\"import-row\">\n          <el-upload\n            :before-upload=\"handleBeforeUpload\"\n            :http-request=\"handleUpload\"\n            :show-file-list=\"false\"\n            action=\".\"\n            style=\"margin-right: 10px;\"\n          >\n            <template v-slot:trigger>\n              <el-button plain size=\"mini\" type=\"success\">点击上传</el-button>\n            </template>\n            <template v-slot:tip>\n              <div class=\"el-upload__tip\">支持文件类型：.xmind；</div>\n            </template>\n          </el-upload>\n        </el-row>\n      </el-tab-pane>\n\n    </el-tabs>\n  </el-dialog>\n</template>\n\n<script lang=\"ts\">\n\nimport {testCaseApi} from \"@/api\"\nimport {buildUploadFileParams} from \"@/pages/track/common/utils\"\n\nexport default {\n  name: \"TestCaseImport\",\n  data() {\n    return {\n      result: {},\n      activeName: 'xmindImport',\n      dialogVisible: false,\n    }\n  },\n  props: {\n    selectNode: Object,\n    currentProject: Object,\n  },\n  mounted() {\n    this.$eventBus.$on('TestCaseImport', () => {\n      this.open()\n    })\n  },\n  methods: {\n    open() {\n      this.dialogVisible = true\n    },\n    close() {\n      this.dialogVisible = false\n    },\n    handleBeforeUpload(file: File) {\n      // console.log('handleBeforeUpload', file)\n      const isMatch = file.type === 'application/vnd.xmind.workbook' || file.name.replace(/.+\\./, \"\") === 'xmind'\n      if (!isMatch) {\n        this.$message.error('文件只支持XMind格式！')\n      }\n      return isMatch\n    },\n    handleUpload(event: { file: File }) {\n      const file = event.file\n      const body: FormData = buildUploadFileParams({\n        projId: this.currentProject.id,\n        treeId: this.selectNode.id,\n        caseFile: file\n      })\n      testCaseApi.uploadXMind(body)\n        .then(() => {\n          this.$emit(\"refresh\")\n          this.close()\n        })\n    },\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"src/assets/css/utils\";\n\n.dialog-title {\n  @extend %dialog-title;\n}\n\n.import-row {\n  padding-top: 20px;\n}\n\n.step-icon {\n  background-color: #C9E6F8;\n  border-color: #C9E6F8 !important;\n  margin-right: 10px;\n}\n\n</style>\n"]}]}
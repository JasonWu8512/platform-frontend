{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/auto/components/AutoConfigEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/auto/components/AutoConfigEdit.vue","mtime":1698916218833},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js","mtime":1644314985388},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7YXV0b0FwaSwgY292ZXJhZ2VBcGl9IGZyb20gIkAvYXBpIgppbXBvcnQgdmFyaWFibGVzIGZyb20gIkAvYXNzZXRzL2Nzcy91dGlscy5zY3NzIgppbXBvcnQgRGlhbG9nRm9vdGVyIGZyb20gJ0AvY29tbW9uL2NvbXBvbmVudHMvRGlhbG9nRm9vdGVyLnZ1ZScKaW1wb3J0IHtvcGVyYXRpb25FbnVtfSBmcm9tICJAL2NvbnN0YW50L1Rlc3RDYXNlIgppbXBvcnQgdGFnc1NlbGVjdCBmcm9tICdAL3BhZ2VzL2F1dG8vY29tcG9uZW50cy90YWdzU2VsZWN0LnZ1ZScKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQXV0b0NvbmZpZ0VkaXQiLAogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSB2dWUvbm8tdW51c2VkLWNvbXBvbmVudHMKICBjb21wb25lbnRzOiB7RGlhbG9nRm9vdGVyLHRhZ3NTZWxlY3R9LAogIGNvbXB1dGVkOiB7CiAgICBvd25lcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMudXNlck5hbWU7CiAgICB9LAogICAgZm9ybUxhYmVsV2lkdGgoKSB7CiAgICAgIHJldHVybiB2YXJpYWJsZXNbJ2Zvcm1MYWJlbFdpZHRoJ10KICAgIH0sCiAgICBjaGF0T3B0aW9ucygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmNvdmVyYWdlLmxhcmtDaGF0cwogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIGNvbnN0IHZhbGlkYXRlVGFncyA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKHZhbHVlID09PSAnJyAmJiB0aGlzLmZvcm0uY2FzZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfmoIfnrb7lkoznlKjkvovlv4XpobvloavkuIDpobknKSk7CiAgICAgIH0gZWxzZSBpZiAodmFsdWUgIT09ICcnICYmIHRoaXMuZm9ybS5jYXNlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfmoIfnrb7lkoznlKjkvovlj6rog73loavkuIDpobknKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IHZhbGlkYXRlQ2FzZXMgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCd2YWx1ZScsIHZhbHVlKQogICAgICBpZiAodmFsdWUubGVuZ3RoID09PSAwICYmIHRoaXMuZm9ybS50YWdzID09PSAnJykgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign5qCH562+5ZKM55So5L6L5b+F6aG75aGr5LiA6aG5JykpOwogICAgICB9ZWxzZSBpZiAodmFsdWUubGVuZ3RoID4gMCAmJiB0aGlzLmZvcm0udGFncyAhPT0gJycpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+agh+etvuWSjOeUqOS+i+WPquiDveWhq+S4gOmhuScpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLAogICAgICBvcGVyYXRpb25FbnVtOiBvcGVyYXRpb25FbnVtLAogICAgICB0YWdPcHRpb25zOiBbXSwKICAgICAgY2FzZVRyZWU6IFtdLAogICAgICBwaXBlbGluZU9wdGlvbnM6IFtdLAogICAgICBvcGVyYXRpb246ICcnLAogICAgICBjYXNlTmFtZXM6ICcnLAogICAgICBjYXNlTm9kZXM6ICcnLAogICAgICBmb3JtOiB7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgdGFnczogJycsCiAgICAgICAgY2FzZXM6IFtdLAogICAgICAgIGNyb250YWJTY2hlZHVsZTogJycsCiAgICAgICAgZW5hYmxlQXV0b1RyaWdnZXI6IGZhbHNlLAogICAgICAgIGV4ZWNFbnY6ICdmYXQnLAogICAgICAgIG5vdGlmeUNoYXRJZHM6IFtdLAogICAgICAgIHBpcGVsaW5lSWRzOiBbXSwKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICBuYW1lOiBbe3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5rWL6K+V55So5L6L6ZuG5ZCN56ewJywgdHJpZ2dlcjogJ2JsdXInfV0sCiAgICAgICAgdGFnczogW3tyZXF1aXJlZDogZmFsc2UsIHZhbGlkYXRvcjogdmFsaWRhdGVUYWdzLCB0cmlnZ2VyOiAiYmx1ciJ9XSwKICAgICAgICBjYXNlczogW3tyZXF1aXJlZDogZmFsc2UsIHZhbGlkYXRvcjogdmFsaWRhdGVDYXNlcywgdHJpZ2dlcjogImJsdXIifV0sCiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldFRhZ3MoKQogICAgdGhpcy5nZXRDYXNlVHJlZSgpCiAgICB0aGlzLmdldFBpcGVsaW5lcygpCiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDojrflj5boh6rliqjljJbmoIfnrb4KICAgIGdldFRhZ3MoKSB7CiAgICAgIGF1dG9BcGkuZ2V0QXV0b1RhZ3MoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy50YWdPcHRpb25zID0gcmVzLmRhdGEKICAgICAgfSkKICAgIH0sCiAgICAvLyDojrflj5bmiYDmnInoh6rliqjljJbnlKjkvovmoJEKICAgIGdldENhc2VUcmVlKCkgewogICAgICBhdXRvQXBpLmdldEF1dG9DYXNlcygpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLmNhc2VUcmVlID0gcmVzLmRhdGEKICAgICAgfSkKICAgIH0sCiAgICAvLyDojrflj5bmiYDmnInmtYHmsLTnur8KICAgIGdldFBpcGVsaW5lcygpIHsKICAgICAgY292ZXJhZ2VBcGkuZ2V0UGlwZWxpbmVMaXN0KHtvZmZzZXQ6IDAsIGxpbWl0OiAxMDAwfSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMucGlwZWxpbmVPcHRpb25zID0gcmVzLmRhdGEuZGF0YS5tYXAoaXRlbSA9PiB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpZDogaXRlbS5pZCwKICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLAogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAogICAgLy8g5omT5byA5Yib5bu6L+e8lui+kemFjee9ruihqOWNlQogICAgb3BlbihhdXRvQ29uZmlnKSB7CiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICBpZiAodGhpcy4kcmVmcy5hdXRvQ29uZmlnRm9ybSkgewogICAgICAgICAgdGhpcy4kcmVmc1snYXV0b0NvbmZpZ0Zvcm0nXS5yZXNldEZpZWxkcygpCiAgICAgICAgICB0aGlzLmZvcm0uY2FzZXMgPSBbXQogICAgICAgICAgdGhpcy5jYXNlTmFtZXMgPSAgW10KICAgICAgICAgIHRoaXMuY2FzZU5vZGVzID0gW10KICAgICAgICAgIHRoaXMuJHJlZnMuY2FzZVRyZWUuc2V0Q2hlY2tlZE5vZGVzKHRoaXMuY2FzZU5vZGVzKQogICAgICAgIH0KICAgICAgICB0aGlzLm9wZXJhdGlvbiA9IG9wZXJhdGlvbkVudW0uQURECiAgICAgICAgLy/kv67mlLkKICAgICAgICBpZiAoYXV0b0NvbmZpZykgewogICAgICAgICAgdGhpcy5vcGVyYXRpb24gPSBvcGVyYXRpb25FbnVtLkVESVQKICAgICAgICAgIHRoaXMuZm9ybS5pZCA9IGF1dG9Db25maWcuaWQKICAgICAgICAgIHRoaXMuZm9ybS5uYW1lID0gYXV0b0NvbmZpZy5uYW1lCiAgICAgICAgICB0aGlzLmZvcm0udGFncyA9IGF1dG9Db25maWcudGFncwogICAgICAgICAgdGhpcy5mb3JtLmNhc2VzID0gYXV0b0NvbmZpZy5jYXNlcwogICAgICAgICAgdGhpcy5mb3JtLmNyb250YWJTY2hlZHVsZSA9IGF1dG9Db25maWcuY3JvbnRhYlNjaGVkdWxlCiAgICAgICAgICB0aGlzLmZvcm0uZW5hYmxlQXV0b1RyaWdnZXIgPSBhdXRvQ29uZmlnLmVuYWJsZUF1dG9UcmlnZ2VyCiAgICAgICAgICB0aGlzLmZvcm0uZXhlY0VudiA9IGF1dG9Db25maWcuZXhlY0VudgogICAgICAgICAgdGhpcy5mb3JtLm5vdGlmeUNoYXRJZHMgPSBhdXRvQ29uZmlnLm5vdGlmeUNoYXRJZHMKICAgICAgICAgIHRoaXMuZm9ybS5waXBlbGluZUlkcyA9IGF1dG9Db25maWcucGlwZWxpbmVJZHMKICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2FzZU5hbWVzLCAiMTIzIikKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgLy8g5L+d5a2Y6Ieq5Yqo5YyW6YWN572uCiAgICBzYXZlUGlwZWxpbmUoKSB7CiAgICAgIHRoaXMuJHJlZnNbJ2F1dG9Db25maWdGb3JtJ10udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgICAgIG5hbWU6IHRoaXMuZm9ybS5uYW1lLAogICAgICAgICAgICB0YWdzOiB0aGlzLmZvcm0udGFncywKICAgICAgICAgICAgY2FzZXM6IHRoaXMuZm9ybS5jYXNlcywKICAgICAgICAgICAgY3JvbnRhYlNjaGVkdWxlOiB0aGlzLmZvcm0uY3JvbnRhYlNjaGVkdWxlLAogICAgICAgICAgICBlbmFibGVBdXRvVHJpZ2dlcjogdGhpcy5mb3JtLmVuYWJsZUF1dG9UcmlnZ2VyLAogICAgICAgICAgICBleGVjX2VudjogdGhpcy5mb3JtLmV4ZWNFbnYsCiAgICAgICAgICAgIHBpcGVsaW5lSWRzOiB0aGlzLmZvcm0ucGlwZWxpbmVJZHMsCiAgICAgICAgICAgIG5vdGlmeUNoYXRJZHM6IHRoaXMuZm9ybS5ub3RpZnlDaGF0SWRzCiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy5vcGVyYXRpb24gPT09IG9wZXJhdGlvbkVudW0uQUREKSB7CiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUKICAgICAgICAgICAgcGFyYW1zLm93bmVyID0gdGhpcy5vd25lcgogICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9wZXJhdGlvbiA9PT0gb3BlcmF0aW9uRW51bS5FRElUKSB7CiAgICAgICAgICAgIHBhcmFtcy5pZCA9IHRoaXMuZm9ybS5pZAogICAgICAgICAgfQogICAgICAgICAgYXV0b0FwaS5jcmVhdGVPckVkaXRBdXRvQ29uZmlnKHBhcmFtcykudGhlbigKICAgICAgICAgICAgKCkgPT4gewogICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2ZhdGhlck1ldGhvZCcpCiAgICAgICAgICAgIH0KICAgICAgICAgICkuY2F0Y2goKCkgPT4ge30pCiAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2UKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIHNlbGVjdENoYW5nZShldmVudCkgewogICAgICAvLyDov5nkuKpldmVudOaVsOe7hOWPquaciWxhYmVsCiAgICAgIC8vIOi/memHjOS4u+imgeWkhOeQhuahhuWGhemAieS4remhueeahOWPlua2iOmAieS4rQogICAgICBsZXQgYXJyTmV3ID0gW107CiAgICAgIGxldCBjYXNlSWROZXcgPSBbXTsKICAgICAgdGhpcy5jYXNlTm9kZXMuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICBldmVudC5mb3JFYWNoKGV2ZW50SXRlbSA9PiB7CiAgICAgICAgICBpZiAoZXZlbnRJdGVtID09IGl0ZW0ubmFtZSkgewogICAgICAgICAgICBhcnJOZXcucHVzaChpdGVtKQogICAgICAgICAgICBjYXNlSWROZXcucHVzaChpdGVtLmlkKQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0pCiAgICAgIHRoaXMuZm9ybS5jYXNlcyA9IGNhc2VJZE5ldwogICAgICB0aGlzLiRyZWZzLmNhc2VUcmVlLnNldENoZWNrZWROb2RlcyhhcnJOZXcpCiAgICB9LAogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCiAgICBoYW5kbGVDaGVja0NoYW5nZSAoZGF0YSwgY2hlY2tlZCwgaW5kZXRlcm1pbmF0ZSkgewogICAgICBsZXQgcmVzID0gdGhpcy4kcmVmcy5jYXNlVHJlZS5nZXRDaGVja2VkTm9kZXModHJ1ZSwgdHJ1ZSk7CiAgICAgIGxldCBhcnJQYXRoID0gW107CiAgICAgIGxldCBhcnIgPSBbXTsKICAgICAgbGV0IGNhc2VOb2RlcyA9IFtdOwogICAgICByZXMuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICBhcnJQYXRoLnB1c2goaXRlbS5pZCk7CiAgICAgICAgYXJyLnB1c2goaXRlbS5uYW1lKQogICAgICAgIGNhc2VOb2Rlcy5wdXNoKGl0ZW0pCiAgICAgIH0pCiAgICAgIHRoaXMuZm9ybS5jYXNlcyA9IGFyclBhdGgKICAgICAgdGhpcy5jYXNlTmFtZXMgPSBhcnI7CiAgICAgIHRoaXMuY2FzZU5vZGVzID0gY2FzZU5vZGVzOwogICAgfSwKICAgIC8vIOaQnOe0ouagkQogICAgZmlsdGVyTm9kZSh2YWx1ZSwgZGF0YSkgewogICAgICBpZiAoIXZhbHVlKSByZXR1cm4gdHJ1ZTsKICAgICAgcmV0dXJuIGRhdGEubmFtZS5pbmRleE9mKHZhbHVlKSAhPT0gLTE7CiAgICB9LAogICAgLy8gc2VsZWN0LXRyZWUgZmlsdGVyX21ldGhvZAogICAgc2VsZWN0RmlsdGVyTm9kZU1ldGhvZCh2YWwpIHsKICAgICAgdGhpcy4kcmVmcy5jYXNlVHJlZS5maWx0ZXIodmFsKQogICAgfQogIH0KfQo="},{"version":3,"sources":["AutoConfigEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6GA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AutoConfigEdit.vue","sourceRoot":"src/pages/auto/components","sourcesContent":["<template>\n  <el-dialog\n    :destroy-on-close=\"true\"\n    :close-on-click-modal=\"false\"\n    :title=\"operation === operationEnum.EDIT? '编辑测试用例集' : '创建测试用例集'\"\n    :visible.sync=\"dialogFormVisible\"\n    class=\"dialog-title\"\n    width=\"65%\"\n  >\n    <el-form ref=\"autoConfigForm\" :model=\"form\" :rules=\"rules\">\n      <el-row>\n        <el-col :offset=\"1\" :span=\"10\">\n          <el-form-item :label-width=\"formLabelWidth\" label=\"名称\" prop=\"name\">\n            <el-input v-model=\"form.name\" placeholder=\"请输入自动化名称\"/>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"10\">\n          <el-form-item :label-width=\"formLabelWidth\" label=\"流水线\" prop=\"pipelineIds\">\n            <el-select v-model=\"form.pipelineIds\" multiple filterable style=\"width: 100%;\">\n              <el-option v-for=\"item in pipelineOptions\"\n                         :key=\"item.id\"\n                         :value=\"item.name\"\n                         :label=\"item.name\"\n              ></el-option>\n            </el-select>\n          </el-form-item>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col :offset=\"1\" :span=\"10\">\n          <el-form-item :label-width=\"formLabelWidth\" label=\"定时器:\" prop=\"crontabSchedule\">\n            <el-input v-model=\"form.crontabSchedule\" placeholder=\"请输入crontab表达式：分 小时 日 月 星期\"></el-input>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"10\">\n          <el-form-item :label-width=\"formLabelWidth\" label=\"开启定时:\" prop=\"enableAutoTrigger\">\n            <el-radio v-model=\"form.enableAutoTrigger\" :label=\"true\">是</el-radio>\n            <el-radio v-model=\"form.enableAutoTrigger\" :label=\"false\">否</el-radio>\n          </el-form-item>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col :offset=\"1\" :span=\"20\">\n          <el-form-item :label-width=\"formLabelWidth\" label=\"环境:\" prop=\"execEnv\">\n            <el-radio v-model=\"form.execEnv\" label=\"fat\">fat</el-radio>\n            <el-radio v-model=\"form.execEnv\" label=\"rc\">rc</el-radio>\n            <el-radio v-model=\"form.execEnv\" label=\"prod\">prod</el-radio>\n          </el-form-item>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col :offset=\"1\" :span=\"20\">\n          <el-form-item :label-width=\"formLabelWidth\" label=\"用例标签:\" prop=\"tags\">\n            <el-input v-model=\"form.tags\" placeholder=\"请输入执行用例的标签,方式有：mark1; not mark1; mark1 or mark2; mark1 and mark2等多种组合方式\"></el-input>\n          </el-form-item>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col :offset=\"1\" :span=\"20\">\n          <el-form-item :label-width=\"formLabelWidth\" label=\"指定用例:\" prop=\"cases\">\n            <el-select v-model=\"caseNames\"\n                       multiple\n                       filterable\n                       :filter-method=\"selectFilterNodeMethod\"\n                       @change=\"selectChange\"\n                       style=\"width: 100%\"\n            >\n              <el-option :value=\"caseNodes\" style=\"height: auto\">\n                <el-tree :data=\"caseTree\"\n                         show-checkbox\n                         :props=\"{children: 'children', label: 'name'}\"\n                         @check-change=\"handleCheckChange\"\n                         :filter-node-method=\"filterNode\"\n                         :default-checked-keys=\"form.cases\"\n                         node-key=\"id\"\n                         ref=\"caseTree\"\n                ></el-tree>\n              </el-option>\n            </el-select>\n          </el-form-item>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col :offset=\"1\" :span=\"20\">\n          <el-form-item :label-width=\"formLabelWidth\" label=\"通知群:\" prop=\"notifyChatIds\">\n            <el-select v-model=\"form.notifyChatIds\"\n                       filterable\n                       multiple\n                       placeholder=\"请选择需要通知的群\"\n                       style=\"width: 100%;\"\n            >\n              <el-option\n                v-for=\"item in chatOptions\"\n                :key=\"item.chatId\"\n                :label=\"item.name\"\n                :value=\"item.chatId\"\n              />\n            </el-select>\n          </el-form-item>\n        </el-col>\n      </el-row>\n    </el-form>\n    <template slot=\"footer\">\n      <dialog-footer @cancel=\"dialogFormVisible = false\" @confirm=\"savePipeline\"/>\n    </template>\n  </el-dialog>\n</template>\n\n<script>\nimport {autoApi, coverageApi} from \"@/api\"\nimport variables from \"@/assets/css/utils.scss\"\nimport DialogFooter from '@/common/components/DialogFooter.vue'\nimport {operationEnum} from \"@/constant/TestCase\"\nimport tagsSelect from '@/pages/auto/components/tagsSelect.vue'\n\nexport default {\n  name: \"AutoConfigEdit\",\n  // eslint-disable-next-line vue/no-unused-components\n  components: {DialogFooter,tagsSelect},\n  computed: {\n    owner() {\n      return this.$store.getters.userName;\n    },\n    formLabelWidth() {\n      return variables['formLabelWidth']\n    },\n    chatOptions() {\n      return this.$store.state.coverage.larkChats\n    }\n  },\n  data() {\n    const validateTags = (rule, value, callback) => {\n      if (value === '' && this.form.cases.length === 0) {\n        callback(new Error('标签和用例必须填一项'));\n      } else if (value !== '' && this.form.cases.length > 0) {\n        callback(new Error('标签和用例只能填一项'));\n      } else {\n        callback();\n      }\n    };\n    const validateCases = (rule, value, callback) => {\n      console.log('value', value)\n      if (value.length === 0 && this.form.tags === '') {\n        callback(new Error('标签和用例必须填一项'));\n      }else if (value.length > 0 && this.form.tags !== '') {\n        callback(new Error('标签和用例只能填一项'));\n      } else {\n        callback();\n      }\n    };\n    return {\n      dialogFormVisible: false,\n      operationEnum: operationEnum,\n      tagOptions: [],\n      caseTree: [],\n      pipelineOptions: [],\n      operation: '',\n      caseNames: '',\n      caseNodes: '',\n      form: {\n        name: '',\n        tags: '',\n        cases: [],\n        crontabSchedule: '',\n        enableAutoTrigger: false,\n        execEnv: 'fat',\n        notifyChatIds: [],\n        pipelineIds: [],\n      },\n      rules: {\n        name: [{required: true, message: '请输入测试用例集名称', trigger: 'blur'}],\n        tags: [{required: false, validator: validateTags, trigger: \"blur\"}],\n        cases: [{required: false, validator: validateCases, trigger: \"blur\"}],\n      }\n    }\n  },\n  mounted() {\n    this.getTags()\n    this.getCaseTree()\n    this.getPipelines()\n  },\n  methods: {\n    // 获取自动化标签\n    getTags() {\n      autoApi.getAutoTags().then(res => {\n        this.tagOptions = res.data\n      })\n    },\n    // 获取所有自动化用例树\n    getCaseTree() {\n      autoApi.getAutoCases().then(res => {\n        this.caseTree = res.data\n      })\n    },\n    // 获取所有流水线\n    getPipelines() {\n      coverageApi.getPipelineList({offset: 0, limit: 1000}).then(res => {\n        this.pipelineOptions = res.data.data.map(item => {\n          return {\n            id: item.id,\n            name: item.name,\n          }\n        })\n      })\n    },\n    // 打开创建/编辑配置表单\n    open(autoConfig) {\n      this.dialogFormVisible = true\n      this.$nextTick(() => {\n        if (this.$refs.autoConfigForm) {\n          this.$refs['autoConfigForm'].resetFields()\n          this.form.cases = []\n          this.caseNames =  []\n          this.caseNodes = []\n          this.$refs.caseTree.setCheckedNodes(this.caseNodes)\n        }\n        this.operation = operationEnum.ADD\n        //修改\n        if (autoConfig) {\n          this.operation = operationEnum.EDIT\n          this.form.id = autoConfig.id\n          this.form.name = autoConfig.name\n          this.form.tags = autoConfig.tags\n          this.form.cases = autoConfig.cases\n          this.form.crontabSchedule = autoConfig.crontabSchedule\n          this.form.enableAutoTrigger = autoConfig.enableAutoTrigger\n          this.form.execEnv = autoConfig.execEnv\n          this.form.notifyChatIds = autoConfig.notifyChatIds\n          this.form.pipelineIds = autoConfig.pipelineIds\n          console.log(this.caseNames, \"123\")\n        }\n      })\n    },\n    // 保存自动化配置\n    savePipeline() {\n      this.$refs['autoConfigForm'].validate((valid) => {\n        if (valid) {\n          const params = {\n            name: this.form.name,\n            tags: this.form.tags,\n            cases: this.form.cases,\n            crontabSchedule: this.form.crontabSchedule,\n            enableAutoTrigger: this.form.enableAutoTrigger,\n            exec_env: this.form.execEnv,\n            pipelineIds: this.form.pipelineIds,\n            notifyChatIds: this.form.notifyChatIds\n          }\n          if (this.operation === operationEnum.ADD) {\n            // @ts-ignore\n            params.owner = this.owner\n          } else if (this.operation === operationEnum.EDIT) {\n            params.id = this.form.id\n          }\n          autoApi.createOrEditAutoConfig(params).then(\n            () => {\n              this.$emit('fatherMethod')\n            }\n          ).catch(() => {})\n          this.dialogFormVisible = false\n        } else {\n          return false\n        }\n      })\n    },\n    selectChange(event) {\n      // 这个event数组只有label\n      // 这里主要处理框内选中项的取消选中\n      let arrNew = [];\n      let caseIdNew = [];\n      this.caseNodes.forEach(item => {\n        event.forEach(eventItem => {\n          if (eventItem == item.name) {\n            arrNew.push(item)\n            caseIdNew.push(item.id)\n          }\n        })\n      })\n      this.form.cases = caseIdNew\n      this.$refs.caseTree.setCheckedNodes(arrNew)\n    },\n    // eslint-disable-next-line no-unused-vars\n    handleCheckChange (data, checked, indeterminate) {\n      let res = this.$refs.caseTree.getCheckedNodes(true, true);\n      let arrPath = [];\n      let arr = [];\n      let caseNodes = [];\n      res.forEach(item => {\n        arrPath.push(item.id);\n        arr.push(item.name)\n        caseNodes.push(item)\n      })\n      this.form.cases = arrPath\n      this.caseNames = arr;\n      this.caseNodes = caseNodes;\n    },\n    // 搜索树\n    filterNode(value, data) {\n      if (!value) return true;\n      return data.name.indexOf(value) !== -1;\n    },\n    // select-tree filter_method\n    selectFilterNodeMethod(val) {\n      this.$refs.caseTree.filter(val)\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}
{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/thread-loader/dist/cjs.js!/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js!/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/dataTools/apolloIntl.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/dataTools/apolloIntl.vue","mtime":1655949681774},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/thread-loader/dist/cjs.js","mtime":1644298102066},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js","mtime":1644314985388},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBkYXRhVG9vbEFwaSB9IGZyb20gIkAvYXBpIjsKaW1wb3J0IHsgY2xvbmVEZWVwIH0gZnJvbSAibG9kYXNoIjsKaW1wb3J0IFRhYmxlT3BlcmF0b3IgZnJvbSAiQC9jb21tb24vY29tcG9uZW50cy9UYWJsZU9wZXJhdG9yIjsKaW1wb3J0IERpYWxvZ0Zvb3RlciBmcm9tICJAL2NvbW1vbi9jb21wb25lbnRzL0RpYWxvZ0Zvb3RlciI7CmltcG9ydCB2YXJpYWJsZXMgZnJvbSAiQC9hc3NldHMvY3NzL3V0aWxzLnNjc3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImFwb2xsb0ludGwiLAogIGNvbXBvbmVudHM6IHsKICAgIFRhYmxlT3BlcmF0b3I6IFRhYmxlT3BlcmF0b3IsCiAgICBEaWFsb2dGb290ZXI6IERpYWxvZ0Zvb3RlcgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVkaXREaWFsb2c6IGZhbHNlLAogICAgICByZWxlYXNlRGlhbG9nOiBmYWxzZSwKICAgICAgYXBwSWQ6ICcnLAogICAgICBjaGFuZ2VzOiBbXSwKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgcmVsZWFzZUZvcm06IHsKICAgICAgICBjb21tZW50OiAnJywKICAgICAgICB0aXRsZTogJycKICAgICAgfSwKICAgICAgZWRpdEZvcm06IHsKICAgICAgICBrZXk6ICcnLAogICAgICAgIHZhbHVlOiAnJywKICAgICAgICBjb21tZW50OiAnJwogICAgICB9LAogICAgICByZWxlYXNlUnVsZXM6IHsKICAgICAgICB0aXRsZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeWPkeW4g+agh+mimCcsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9LAogICAgICBhcHBPcHRpb25zOiBbXQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICB0YWJsZTFCdG5XaWR0aDogZnVuY3Rpb24gdGFibGUxQnRuV2lkdGgoKSB7CiAgICAgIHJldHVybiB2YXJpYWJsZXNbJ3RhYmxlMUJ0bldpZHRoJ107CiAgICB9LAogICAgbG9hZGluZzogZnVuY3Rpb24gbG9hZGluZygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmxvYWRpbmc7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRBbGxJbnRsQXBwcygpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0QWxsSW50bEFwcHM6IGZ1bmN0aW9uIGdldEFsbEludGxBcHBzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgZGF0YVRvb2xBcGkuZ2V0QXBvbGxvSW50bEFwcHMoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5hcHBPcHRpb25zID0gcmVzLmRhdGE7CiAgICAgICAgX3RoaXMuYXBwSWQgPSBfdGhpcy5hcHBPcHRpb25zWzBdLmFwcElkOwoKICAgICAgICBfdGhpcy5nZXRBcHBJbnRsSXRlbXMoKTsgLy8gY29uc29sZS5sb2coJ2FwcE9wdGlvbicsIHRoaXMuYXBwT3B0aW9ucykKCiAgICAgIH0pOwogICAgfSwKICAgIGdldEFwcEludGxJdGVtczogZnVuY3Rpb24gZ2V0QXBwSW50bEl0ZW1zKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGRhdGFUb29sQXBpLmdldEFwb2xsb0ludGxBcHBJdGVtcyh0aGlzLmFwcElkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczIudGFibGVEYXRhID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIG9wZW5FZGl0SW50bDogZnVuY3Rpb24gb3BlbkVkaXRJbnRsKHJvdywgbmFtZXNwYWNlKSB7CiAgICAgIHRoaXMuZWRpdEZvcm0gPSBjbG9uZURlZXAocm93KTsKICAgICAgdGhpcy5lZGl0Rm9ybVsnbmFtZXNwYWNlJ10gPSBuYW1lc3BhY2U7CiAgICAgIHRoaXMuZWRpdERpYWxvZyA9IHRydWU7CiAgICB9LAogICAgLy8g57yW6L6R6YWN572uCiAgICBlZGl0QXBwSW50bEl0ZW06IGZ1bmN0aW9uIGVkaXRBcHBJbnRsSXRlbSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBkYXRhVG9vbEFwaS51cGRhdGVBcG9sbG9JbnRsQXBwSXRlbSh0aGlzLmVkaXRGb3JtLCB0aGlzLmFwcElkKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXMzLmdldEFwcEludGxJdGVtcygpOwogICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXMzLmVkaXREaWFsb2cgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5omT5byA5Y+R5biD6KGo5Y2VCiAgICBvcGVuUmVsZWFzZUludGw6IGZ1bmN0aW9uIG9wZW5SZWxlYXNlSW50bChuYW1lc3BhY2UpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB0aGlzLmNoYW5nZXMgPSBbXTsKICAgICAgdmFyIHRpbWUgPSBuZXcgRGF0ZSgpLmZvcm1hdCgneXl5eU1NZGRoaG1tc3MnKTsgLy/lhYjlsIbml7bpl7TmiLPovazkuLpEYXRl5a+56LGh77yM54S25ZCO5omN6IO95L2/55SoRGF0ZeeahOaWueazlQoKICAgICAgdGhpcy5yZWxlYXNlRm9ybS50aXRsZSA9IHRpbWUgKyAnX3JlbGVhc2UnOwogICAgICB0aGlzLnJlbGVhc2VGb3JtWyduYW1lc3BhY2UnXSA9IG5hbWVzcGFjZTsKICAgICAgdGhpcy50YWJsZURhdGEuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICBpZiAodmFsdWVbJ25hbWVzcGFjZSddID09PSBuYW1lc3BhY2UpIHsKICAgICAgICAgIHZhbHVlWydpdGVtcyddLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgaWYgKGl0ZW0uaXNNb2RpZmllZCkgewogICAgICAgICAgICAgIF90aGlzNC5jaGFuZ2VzLnB1c2goewogICAgICAgICAgICAgICAga2V5OiBpdGVtLmtleSwKICAgICAgICAgICAgICAgIG9sZFZhbHVlOiBpdGVtLm9sZFZhbHVlLAogICAgICAgICAgICAgICAgbmV3VmFsdWU6IGl0ZW0ubmV3VmFsdWUsCiAgICAgICAgICAgICAgICBkYXRhQ2hhbmdlTGFzdE1vZGlmaWVkQnk6IGl0ZW0uZGF0YUNoYW5nZUxhc3RNb2RpZmllZEJ5CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMucmVsZWFzZURpYWxvZyA9IHRydWU7CiAgICB9LAogICAgLy8g5Y+R5biD6YWN572uCiAgICByZWxlYXNlQXBwSW50bENvbmZpZzogZnVuY3Rpb24gcmVsZWFzZUFwcEludGxDb25maWcoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdmFyIHBhcmFtcyA9IHRoaXMucmVsZWFzZUZvcm07CiAgICAgIHBhcmFtc1snY2hhbmdlcyddID0gdGhpcy5jaGFuZ2VzOwogICAgICBkYXRhVG9vbEFwaS5yZWxlYXNlQXBvbGxvSW50bEFwcEl0ZW0ocGFyYW1zLCB0aGlzLmFwcElkKS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXM1LnJlbGVhc2VEaWFsb2cgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["apolloIntl.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <el-card>\n      <el-row>\n        <el-col :span=\"8\">\n          <el-select v-model=\"appId\" filterable style=\"width: 100%;padding-right: 5px\" @change=\"getAppIntlItems\">\n            <el-option v-for=\"item in appOptions\"\n                       :key=\"item.id\"\n                       :value=\"item.appId\"\n                       :label=\"item.appId\"\n            ></el-option>\n          </el-select>\n        </el-col>\n        <el-col :span=\"3\">\n          <el-button type=\"primary\" icon=\"el-icon-refresh\" round style=\"float: left\" @click=\"getAppIntlItems\">刷新配置项</el-button>\n        </el-col>\n      </el-row>\n    </el-card>\n    <div v-for=\"(space, index) in tableData\" style=\"margin-top: 15px\"\n         :key=\"index\"\n         :index=\"index\"\n         :space=\"space\">\n      <el-card>\n        <div slot=\"header\" class=\"title\">\n          <span>{{ space.namespace }}</span>\n          <el-button v-if=\"space.items.length > 0 && space.editable\" style=\"float: right; padding: 3px;\" icon=\"el-icon-s-promotion\"\n                     type=\"success\" @click=\"openReleaseIntl(space.namespace)\">发布</el-button>\n        </div>\n        <el-table :data=\"space.items\" style=\"width: 100%\" border v-loading=\"loading\">\n          <el-table-column label=\"发布状态\" prop=\"isModified\" width=\"120\">\n            <template slot-scope=\"scope\">\n              <el-tag :type=\"scope.row.isModified ? 'warning' : 'info'\" effect=\"dark\">{{scope.row.isModified ? '未发布': '已发布'}}</el-tag>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"key\" prop=\"key\" width=\"180\"/>\n          <el-table-column label=\"value\" prop=\"value\"/>\n          <el-table-column label=\"备注\" prop=\"comment\" width=\"180\"/>\n          <el-table-column label=\"最后修改人\" prop=\"dataChangeLastModifiedBy\" width=\"180\"/>\n          <el-table-column label=\"最后修改时间\" prop=\"dataChangeLastModifiedTime\" width=\"180\"/>\n          <el-table-column label=\"操作\" :width=\"table1BtnWidth\">\n            <template slot-scope=\"scope\">\n              <table-operator show-edit @editClick=\"openEditIntl(scope.row, space.namespace)\" :edit-disable=\"!space.editable\"></table-operator>\n            </template>\n          </el-table-column>\n        </el-table>\n\n      </el-card>\n    </div>\n\n    <el-dialog :close-on-click-modal=\"false\" :visible.sync=\"editDialog\">\n      <template slot=\"title\">\n        <div style=\"text-align: left;\">\n          <span class=\"dialog-title\">编辑配置项</span>\n        </div>\n        <el-divider style=\"width: 100%;\"></el-divider>\n      </template>\n      <el-form ref=\"editForm\" :model=\"editForm\"  label-width=\"120px\">\n        <el-form-item label=\"Key:\" prop=\"key\">\n          <el-input v-model=\"editForm.key\" style=\"width: 100%\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"Value:\" prop=\"value\">\n          <el-input v-model=\"editForm.value\" type=\"textarea\" style=\"width: 100%\" :rows=\"8\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"Comment:\" prop=\"comment\">\n          <el-input v-model=\"editForm.comment\" type=\"textarea\" style=\"width: 100%\"></el-input>\n        </el-form-item>\n      </el-form>\n      <template slot=\"footer\">\n        <dialog-footer @cancel=\"editDialog = false\" @confirm=\"editAppIntlItem\"/>\n      </template>\n    </el-dialog>\n    <el-dialog :close-on-click-modal=\"false\" :visible.sync=\"releaseDialog\">\n      <template slot=\"title\">\n        <div style=\"text-align: left;\">\n          <span class=\"dialog-title\">发布</span>\n          <span style=\"font-size: 14px;\"> (只有发布过的配置才会被客户端获取到，此次发布只会作用于当前环境:FAT)</span>\n        </div>\n        <el-divider style=\"width: 100%;\"></el-divider>\n      </template>\n\n      <el-form ref=\"releaseForm\" :model=\"releaseForm\" :rules=\"releaseRules\" label-width=\"120px\">\n        <el-form-item label=\"Changes:\">\n          <div v-if=\"changes.length > 0\">\n            <el-table :data=\"changes\" border height=\"200px\">\n              <el-table-column label=\"Key\" prop=\"key\"/>\n              <el-table-column label=\"已发布的值\" prop=\"oldValue\"/>\n              <el-table-column label=\"未发布的值\" prop=\"newValue\"/>\n              <el-table-column label=\"修改人\" prop=\"dataChangeLastModifiedBy\"/>\n            </el-table>\n          </div>\n          <div v-else>配置没有变化</div>\n        </el-form-item>\n        <el-form-item label=\"Release Name:\" prop=\"key\">\n          <el-input v-model=\"releaseForm.title\" style=\"width: 50%\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"Comment:\" prop=\"comment\">\n          <el-input v-model=\"releaseForm.comment\" type=\"textarea\" style=\"width: 100%\"></el-input>\n        </el-form-item>\n      </el-form>\n      <template slot=\"footer\">\n        <dialog-footer @cancel=\"releaseDialog = false\" @confirm=\"releaseAppIntlConfig\"/>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport {dataToolApi} from \"@/api\";\nimport {cloneDeep} from \"lodash\"\nimport TableOperator from \"@/common/components/TableOperator\";\nimport DialogFooter from \"@/common/components/DialogFooter\";\nimport variables from \"@/assets/css/utils.scss\";\nexport default {\n  name: \"apolloIntl\",\n  components: {TableOperator, DialogFooter},\n  data() {\n  return {\n    editDialog: false,\n    releaseDialog: false,\n    appId: '',\n    changes: [],\n    tableData: [],\n    releaseForm: {\n      comment: '',\n      title: ''\n    },\n    editForm: {\n      key: '',\n      value: '',\n      comment: ''\n    },\n    releaseRules: {\n      title: [{required: true, message: '请输入发布标题', trigger: 'blur'}]\n    },\n    appOptions: [],\n  }\n  },\n  computed: {\n    table1BtnWidth() {\n      return variables['table1BtnWidth']\n    },\n    loading() {\n      return this.$store.state.loading\n    },\n  },\n  mounted() {\n  this.getAllIntlApps()\n  },\n  methods: {\n  getAllIntlApps() {\n    dataToolApi.getApolloIntlApps().then(res => {\n      this.appOptions = res.data\n      this.appId = this.appOptions[0].appId\n      this.getAppIntlItems()\n      // console.log('appOption', this.appOptions)\n    })\n  },\n    getAppIntlItems() {\n    dataToolApi.getApolloIntlAppItems(this.appId).then(res => {\n      this.tableData = res.data\n    })\n    },\n    openEditIntl(row, namespace) {\n    this.editForm = cloneDeep(row)\n      this.editForm['namespace'] = namespace\n      this.editDialog = true\n    },\n    // 编辑配置\n    editAppIntlItem() {\n    dataToolApi.updateApolloIntlAppItem(this.editForm, this.appId).then(() => this.getAppIntlItems()).finally(() => this.editDialog = false)\n    },\n    // 打开发布表单\n    openReleaseIntl(namespace) {\n    this.changes = []\n      var time = new Date().format('yyyyMMddhhmmss')    //先将时间戳转为Date对象，然后才能使用Date的方法\n      this.releaseForm.title = time + '_release'\n      this.releaseForm['namespace'] = namespace\n      this.tableData.forEach(value => {\n        if (value['namespace'] === namespace) {\n          value['items'].forEach( item => {\n            if (item.isModified) {\n              this.changes.push({key: item.key, oldValue: item.oldValue, newValue: item.newValue, dataChangeLastModifiedBy: item.dataChangeLastModifiedBy})\n            }\n          })\n        }\n      })\n      this.releaseDialog = true\n    },\n    // 发布配置\n    releaseAppIntlConfig() {\n    const params = this.releaseForm\n      params['changes'] = this.changes\n    dataToolApi.releaseApolloIntlAppItem(params, this.appId).finally(() => this.releaseDialog = false)\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.dialog-title {\n  font-weight: 600;\n  font-size: 18px;\n}\n\n.title {\n  font-size: 16px;\n  font-weight: 700;\n  text-align: left;\n}\n\n</style>\n"],"sourceRoot":"src/pages/dataTools"}]}
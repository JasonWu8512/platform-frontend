{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js!/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/track/plan/view/comonents/report/components/BaseInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/track/plan/view/comonents/report/components/BaseInfo.vue","mtime":1655949681805},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js","mtime":1644314985388},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgdGVzdFBsYW5BcGkgfSBmcm9tICJAL2FwaSI7CmltcG9ydCBEaWFsb2dGb290ZXIgZnJvbSAiQC9jb21tb24vY29tcG9uZW50cy9EaWFsb2dGb290ZXIudnVlIjsKaW1wb3J0IHsgcGxhblN0YWdlRW51bSB9IGZyb20gIkAvY29uc3RhbnQvVGVzdFBsYW4iOwppbXBvcnQgeyBjbG9uZURlZXAgfSBmcm9tICJsb2Rhc2giOwppbXBvcnQgQ29tbW9uQ29tcG9uZW50IGZyb20gIi4vQ29tbW9uQ29tcG9uZW50IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJCYXNlSW5mb0NvbXBvbmVudCIsCiAgY29tcG9uZW50czogewogICAgQ29tbW9uQ29tcG9uZW50OiBDb21tb25Db21wb25lbnQsCiAgICBEaWFsb2dGb290ZXI6IERpYWxvZ0Zvb3RlcgogIH0sCiAgcHJvcHM6IHsKICAgIGJhc2VJbmZvOiB7CiAgICAgIHR5cGU6IE9iamVjdAogICAgfSwKICAgIHBsYW5JZDogewogICAgICB0eXBlOiBTdHJpbmcKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwbGFuU3RhZ2VFbnVtOiBwbGFuU3RhZ2VFbnVtLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgaWZFZGl0OiBmYWxzZSwKICAgICAgY2xvbmVCYXNlSW5mbzogY2xvbmVEZWVwKHRoaXMuYmFzZUluZm8pCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIGJhc2VJbmZvOiBmdW5jdGlvbiBiYXNlSW5mbygpIHsKICAgICAgdGhpcy5jbG9uZUJhc2VJbmZvID0gY2xvbmVEZWVwKHRoaXMuYmFzZUluZm8pOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc3RhcnRUaW1lQ2hhbmdlOiBmdW5jdGlvbiBzdGFydFRpbWVDaGFuZ2UoKSB7CiAgICAgIGlmICghIXRoaXMuYmFzZUluZm8uZW5kICYmIHRoaXMuYmFzZUluZm8uZW5kIC0gdGhpcy5iYXNlSW5mby5zdGFydCA8IDApIHsKICAgICAgICB0aGlzLmJhc2VJbmZvLnN0YXJ0ID0gdW5kZWZpbmVkOwogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn5byA5aeL5pel5pyf5LiN6IO95aSn5LqO57uT5p2f5pel5pyfJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGVzdFBsYW5BcGkudXBkYXRlVGVzdENhc2VQbGFuKHRoaXMucGxhbklkLCB7CiAgICAgICAgICBhY3R1YWxTdGFydDogdGhpcy5iYXNlSW5mby5zdGFydAogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgZW5kVGltZUNoYW5nZTogZnVuY3Rpb24gZW5kVGltZUNoYW5nZSgpIHsKICAgICAgaWYgKCEhdGhpcy5iYXNlSW5mby5zdGFydCAmJiB0aGlzLmJhc2VJbmZvLmVuZCAtIHRoaXMuYmFzZUluZm8uc3RhcnQgPCAwKSB7CiAgICAgICAgdGhpcy5iYXNlSW5mby5lbmQgPSB1bmRlZmluZWQ7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCflvIDlp4vml6XmnJ/kuI3og73lpKfkuo7nu5PmnZ/ml6XmnJ8nKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0ZXN0UGxhbkFwaS51cGRhdGVUZXN0Q2FzZVBsYW4odGhpcy5wbGFuSWQsIHsKICAgICAgICAgIGFjdHVhbEVuZDogdGhpcy5iYXNlSW5mby5lbmQKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHN1Ym1pdDogZnVuY3Rpb24gc3VibWl0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGVzdFBsYW5BcGkudXBkYXRlVGVzdENhc2VQbGFuKHRoaXMucGxhbklkLCB7CiAgICAgICAgaXNzdWVKcWw6IHRoaXMuY2xvbmVCYXNlSW5mby5qcWwKICAgICAgfSkudGhlbiggLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCiAgICAgIGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CgogICAgICAgIF90aGlzLiRlbWl0KCJmYXRoZXJNZXRob2QiKTsKICAgICAgfSk7CiAgICB9LAogICAgZWRpdEhpc3RvcnlJZDogZnVuY3Rpb24gZWRpdEhpc3RvcnlJZCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0ZXN0UGxhbkFwaS51cGRhdGVUZXN0Q2FzZVBsYW4odGhpcy5wbGFuSWQsIHsKICAgICAgICBoaXN0b3J5SWQ6IHRoaXMuY2xvbmVCYXNlSW5mby5oaXN0b3J5SWQKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLiRlbWl0KCJmYXRoZXJNZXRob2QiKTsKICAgICAgfSk7CiAgICB9LAogICAgZWRpdFBsYW5EZXNjcmlwdGlvbjogZnVuY3Rpb24gZWRpdFBsYW5EZXNjcmlwdGlvbigpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0ZXN0UGxhbkFwaS51cGRhdGVUZXN0Q2FzZVBsYW4odGhpcy5wbGFuSWQsIHsKICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5jbG9uZUJhc2VJbmZvLmRlc2NyaXB0aW9uCiAgICAgIH0pLnRoZW4oIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwogICAgICBmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMzLmlmRWRpdCA9IGZhbHNlOwoKICAgICAgICBfdGhpczMuJGVtaXQoImZhdGhlck1ldGhvZCIpOwogICAgICB9KTsKICAgIH0sCiAgICBjYW5jbGVFZGl0OiBmdW5jdGlvbiBjYW5jbGVFZGl0KCkgewogICAgICB0aGlzLmlmRWRpdCA9IGZhbHNlOwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgdGhpcy5jbG9uZUJhc2VJbmZvID0gY2xvbmVEZWVwKHRoaXMuYmFzZUluZm8pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["BaseInfo.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\n  <common-component title=\"基础信息\">\n\n    <template class=\"text\">\n\n      <el-row justify=\"space-between\" type=\"flex\">\n        <el-col :span=\"12\" style=\"text-align: left\">\n          <span>所属项目：</span>\n          <span v-for=\"proj in baseInfo.projNames\" :key=\"proj\" class=\"item-value\">{{ proj }}</span>\n        </el-col>\n        <el-col :span=\"12\" style=\"text-align: left\">\n          <span>负责人：</span>\n          <span class=\"item-value\">{{ baseInfo.owner }}</span>\n        </el-col>\n      </el-row>\n\n      <el-row class=\"select-time\" justify=\"space-between\" type=\"flex\">\n        <el-col :span=\"12\" style=\"text-align: left\">\n          <span>开始时间：</span>\n          <el-date-picker\n            v-model=\"baseInfo.start\"\n            format=\"yyyy 年 MM 月 dd 日\"\n            placeholder=\"请选择开始时间\"\n            type=\"date\"\n            value-format=\"yyyy-MM-dd\"\n            @change=\"startTimeChange\"\n          />\n        </el-col>\n        <el-col :span=\"12\" style=\"text-align: left\">\n          <span>结束时间：</span>\n          <el-date-picker\n            v-model=\"baseInfo.end\"\n            format=\"yyyy 年 MM 月 dd 日\"\n            placeholder=\"请选择结束时间\"\n            type=\"date\"\n            value-format=\"yyyy-MM-dd\"\n            @change=\"endTimeChange\"\n          />\n        </el-col>\n      </el-row>\n\n      <el-row justify=\"space-between\" type=\"flex\" class=\"baseInfo\">\n        <el-col :span=\"12\" style=\"text-align: left\">\n          <span>执行人：</span>\n          <span v-for=\"item in baseInfo.executors\" :key=\"item\">{{ item }}</span>\n        </el-col>\n        <el-col :span=\"12\" style=\"text-align: left\" v-if=\"baseInfo.stage !== planStageEnum.SMOKE\">\n          <span>自动化构建号：</span>\n          <el-input v-model=\"cloneBaseInfo.historyId\" style=\"width: 180px\" @change=\"editHistoryId\">\n            <i\n              class=\"el-icon-edit el-input__icon\"\n              slot=\"suffix\">\n            </i>\n          </el-input>\n        </el-col>\n      </el-row>\n      <el-row justify=\"space-between\" type=\"flex\" v-if=\"baseInfo.stage !== planStageEnum.SMOKE\">\n        <el-col :span=\"12\" style=\"text-align: left\">\n          <span>缺陷筛选器：</span>\n          <el-button type=\"text\" @click=\"dialogVisible = true\">点击此处查看/更新jql</el-button>\n        </el-col>\n      </el-row>\n      <el-row justify=\"space-between\" type=\"flex\">\n        <el-col :span=\"12\" style=\"text-align: left\">\n          <span style=\"color: red\">备注：</span>\n          <span> {{cloneBaseInfo.description}} </span>\n          <el-button @click=\"ifEdit = true\" class=\"el-icon-edit\" type=\"text\" v-if=\"!ifEdit\"></el-button>\n        </el-col>\n      </el-row>\n      <el-dialog\n        :visible.sync=\"dialogVisible\"\n        class=\"dialog-title\"\n        title=\"缺陷筛选jql\">\n        <el-input v-model=\"cloneBaseInfo.jql\" placeholder=\"请输入jql\"></el-input>\n        <template slot=\"footer\">\n          <dialog-footer @cancel=\"cancleEdit\" @confirm=\"submit\"/>\n        </template>\n      </el-dialog>\n      <el-dialog\n        :visible.sync=\"ifEdit\"\n        class=\"dialog-title\"\n        title=\"备注\">\n        <el-input v-model=\"cloneBaseInfo.description\" placeholder=\"请输入备注说明\"></el-input>\n        <template slot=\"footer\">\n          <dialog-footer @cancel=\"cancleEdit\" @confirm=\"editPlanDescription\"/>\n        </template>\n      </el-dialog>\n\n    </template>\n\n  </common-component>\n\n</template>\n\n<script>\nimport {testPlanApi} from \"@/api\"\nimport DialogFooter from \"@/common/components/DialogFooter.vue\"\nimport {planStageEnum} from \"@/constant/TestPlan\"\nimport {cloneDeep} from \"lodash\"\nimport CommonComponent from \"./CommonComponent\"\n\nexport default {\n  name: \"BaseInfoComponent\",\n  components: {CommonComponent, DialogFooter},\n  props: {\n    baseInfo: {\n      type: Object,\n    },\n    planId: {\n      type: String\n    }\n  },\n  data() {\n    return {\n      planStageEnum: planStageEnum,\n      dialogVisible: false,\n      ifEdit: false,\n      cloneBaseInfo: cloneDeep(this.baseInfo),\n    }\n  },\n  watch: {\n    baseInfo() {\n      this.cloneBaseInfo =  cloneDeep(this.baseInfo)\n    }\n  },\n  methods: {\n    startTimeChange() {\n      if (!!this.baseInfo.end && this.baseInfo.end - this.baseInfo.start < 0) {\n        this.baseInfo.start = undefined;\n        this.$message.warning('开始日期不能大于结束日期');\n      } else {\n        testPlanApi.updateTestCasePlan(this.planId, {actualStart: this.baseInfo.start})\n      }\n    },\n    endTimeChange() {\n      if (!!this.baseInfo.start && this.baseInfo.end - this.baseInfo.start < 0) {\n        this.baseInfo.end = undefined;\n        this.$message.warning('开始日期不能大于结束日期');\n      } else {\n        testPlanApi.updateTestCasePlan(this.planId, {actualEnd: this.baseInfo.end})\n      }\n    },\n    submit() {\n      testPlanApi.updateTestCasePlan(this.planId, {issueJql: this.cloneBaseInfo.jql}).then(\n        // eslint-disable-next-line no-unused-vars\n        res => {\n          this.dialogVisible = false;\n          this.$emit(\"fatherMethod\")\n        }\n      )\n    },\n    editHistoryId() {\n      testPlanApi.updateTestCasePlan(this.planId, {historyId: this.cloneBaseInfo.historyId}).then(\n        () => {\n          this.$emit(\"fatherMethod\")\n        }\n      )\n    },\n    editPlanDescription() {\n      testPlanApi.updateTestCasePlan(this.planId, {description: this.cloneBaseInfo.description}).then(\n        // eslint-disable-next-line no-unused-vars\n        res => {\n          this.ifEdit = false\n          this.$emit(\"fatherMethod\")\n        }\n      )\n    },\n    cancleEdit(){\n      this.ifEdit = false\n      this.dialogVisible = false\n      this.cloneBaseInfo = cloneDeep(this.baseInfo)\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n.baseInfo .el-input__inner {\n  border-top-width: 0px;\n  border-left-width: 0px;\n  border-right-width: 0px;\n  border-bottom-width: 1px;\n  border-radius: 0;\n  /*outline: medium;*/\n}\n</style>\n\n<style lang=\"scss\" scoped>\n@import \"src/assets/css/font\";\n@import \"src/assets/css/utils\";\n\n.dialog-title {\n  @extend %dialog-title\n}\n\n.text {\n  @extend %font-14\n}\n\nspan {\n  margin-right: 5px;\n  display: inline-block;\n}\n\n.el-col span:first-child {\n  font-weight: bold;\n  width: 100px;\n}\n\n.el-row {\n  height: 60px;\n}\n\n.select-time span {\n  display: inline-block;\n}\n\n\n//.el-date-editor {\n//  width: 220px;\n//}\n\n</style>\n"],"sourceRoot":"src/pages/track/plan/view/comonents/report/components"}]}
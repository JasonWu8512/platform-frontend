{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js!/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/coverage/components/BuildConsole.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/coverage/components/BuildConsole.vue","mtime":1655949681773},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js","mtime":1644314985388},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgY292ZXJhZ2VBcGkgfSBmcm9tICJAL2FwaSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiYnVpbGRDb25zb2xlIiwKICBjb21wdXRlZDogewogICAgcGlwZWxpbmVJZDogZnVuY3Rpb24gcGlwZWxpbmVJZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlLnBhcmFtcy5waXBlbGluZUlkOwogICAgfSwKICAgIHN0ZXA6IGZ1bmN0aW9uIHN0ZXAoKSB7CiAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5wYXJhbXMuc3RlcCA/IHRoaXMuJHJvdXRlLnBhcmFtcy5zdGVwIDogJyc7CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY29uc29sZVRleHQ6ICcnLAogICAgICBpc0J1aWxkaW5nOiB0cnVlCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuUG9saW5nR2V0Q29uc29sZU91dHB1dCgpOwogIH0sCiAgZGVzdHJveWVkOiBmdW5jdGlvbiBkZXN0cm95ZWQoKSB7CiAgICBjbGVhckludGVydmFsKHRoaXMubXlJbnRlcnZhbCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRCdWlsZENvbnNvbGU6IGZ1bmN0aW9uIGdldEJ1aWxkQ29uc29sZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnN0ZXAgPT09ICdkZXBsb3knKSB7CiAgICAgICAgY292ZXJhZ2VBcGkuZ2V0UGlwZWxpbmVEZXBsb3lDb25zb2xlKHRoaXMucGlwZWxpbmVJZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBfdGhpcy5jb25zb2xlVGV4dCA9IHJlcy5kYXRhLnRleHQ7CiAgICAgICAgICBfdGhpcy5pc0J1aWxkaW5nID0gcmVzLmRhdGEuaXNCdWlsZGluZzsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb3ZlcmFnZUFwaS5nZXRQaXBlbGluZUNvdmVyYWdlQ29uc29sZSh0aGlzLnBpcGVsaW5lSWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgX3RoaXMuY29uc29sZVRleHQgPSByZXMuZGF0YS50ZXh0OwogICAgICAgICAgX3RoaXMuaXNCdWlsZGluZyA9IHJlcy5kYXRhLmlzQnVpbGRpbmc7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmlzQnVpbGRpbmcgPT09IGZhbHNlKSB7CiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLm15SW50ZXJ2YWwpOwogICAgICB9CiAgICB9LAogICAgUG9saW5nR2V0Q29uc29sZU91dHB1dDogZnVuY3Rpb24gUG9saW5nR2V0Q29uc29sZU91dHB1dCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLmdldEJ1aWxkQ29uc29sZSgpOyAvLyDmr48z56eS6L2u6K+i6I635Y+W5pel5b+XCgogICAgICB0aGlzLm15SW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMyLmdldEJ1aWxkQ29uc29sZSgpOwogICAgICAgIH0sIDEpOwogICAgICB9LCAzMDAwKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["BuildConsole.vue"],"names":[],"mappings":";;;;;;;;;;AAWA,SAAA,WAAA,QAAA,OAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,QAAA,EAAA;AACA,IAAA,UADA,wBACA;AACA,aAAA,KAAA,MAAA,CAAA,MAAA,CAAA,UAAA;AACA,KAHA;AAIA,IAAA,IAJA,kBAIA;AACA,aAAA,KAAA,MAAA,CAAA,MAAA,CAAA,IAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,IAAA,GAAA,EAAA;AACA;AANA,GAFA;AAUA,EAAA,IAVA,kBAUA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,EADA;AAEA,MAAA,UAAA,EAAA;AAFA,KAAA;AAIA,GAfA;AAgBA,EAAA,OAhBA,qBAgBA;AACA,SAAA,sBAAA;AACA,GAlBA;AAmBA,EAAA,SAnBA,uBAmBA;AACA,IAAA,aAAA,CAAA,KAAA,UAAA,CAAA;AACA,GArBA;AAsBA,EAAA,OAAA,EAAA;AACA,IAAA,eADA,6BACA;AAAA;;AACA,UAAA,KAAA,IAAA,KAAA,QAAA,EAAA;AACA,QAAA,WAAA,CAAA,wBAAA,CAAA,KAAA,UAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,WAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,UAAA,KAAA,CAAA,UAAA,GAAA,GAAA,CAAA,IAAA,CAAA,UAAA;AACA,SAHA;AAIA,OALA,MAKA;AACA,QAAA,WAAA,CAAA,0BAAA,CAAA,KAAA,UAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,WAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,UAAA,KAAA,CAAA,UAAA,GAAA,GAAA,CAAA,IAAA,CAAA,UAAA;AACA,SAHA;AAIA;;AACA,UAAA,KAAA,UAAA,KAAA,KAAA,EAAA;AACA,QAAA,aAAA,CAAA,KAAA,UAAA,CAAA;AACA;AACA,KAhBA;AAiBA,IAAA,sBAjBA,oCAiBA;AAAA;;AACA,WAAA,eAAA,GADA,CAEA;;AACA,WAAA,UAAA,GAAA,MAAA,CAAA,WAAA,CAAA,YAAA;AACA,QAAA,UAAA,CAAA,YAAA;AACA,UAAA,MAAA,CAAA,eAAA;AACA,SAFA,EAEA,CAFA,CAAA;AAGA,OAJA,EAIA,IAJA,CAAA;AAKA;AAzBA;AAtBA,CAAA","sourcesContent":["<template>\n  <div style=\"background-color: #000000; color: #ffffff\">\n    <div style=\"font-size: 2em; font-weight: bold;\">#{{step}} Console Output</div>\n    <pre class=\"console-text\">\n      <code>{{consoleText}}</code>\n    </pre>\n    <i class=\"el-icon-loading\" style=\"font-size: 18px; margin-top: 4px;\" v-if=\"isBuilding\"></i>\n  </div>\n</template>\n\n<script>\nimport {coverageApi} from \"@/api\";\n\nexport default {\nname: \"buildConsole\",\n  computed:{\n    pipelineId() {\n      return this.$route.params.pipelineId\n    },\n    step() {\n      return this.$route.params.step ? this.$route.params.step : ''\n    }\n  },\n  data() {\n  return {\n    consoleText: '',\n    isBuilding: true,\n  }\n  },\n  mounted() {\n    this.PolingGetConsoleOutput()\n  },\n  destroyed() {\n    clearInterval(this.myInterval);\n  },\n  methods: {\n    getBuildConsole(){\n      if (this.step === 'deploy') {\n        coverageApi.getPipelineDeployConsole(this.pipelineId).then(res => {\n          this.consoleText = res.data.text\n          this.isBuilding = res.data.isBuilding\n        })\n      } else {\n        coverageApi.getPipelineCoverageConsole(this.pipelineId).then(res => {\n          this.consoleText = res.data.text\n          this.isBuilding = res.data.isBuilding\n        })\n      }\n      if (this.isBuilding === false){\n        clearInterval(this.myInterval);\n      }\n    },\n    PolingGetConsoleOutput() {\n      this.getBuildConsole();\n      // 每3秒轮询获取日志\n      this.myInterval = window.setInterval(() => {\n        setTimeout(() => {\n          this.getBuildConsole()\n        }, 1)\n      }, 3000)\n    },\n  },\n}\n</script>\n\n<style scoped>\n.console-text {\n  text-align: left;\n  background-color: #2b2b2b;\n  color: #e9eded;\n  padding: 10px 20px;\n  white-space: pre-wrap;\n}\n\n</style>\n"],"sourceRoot":"src/pages/coverage/components"}]}
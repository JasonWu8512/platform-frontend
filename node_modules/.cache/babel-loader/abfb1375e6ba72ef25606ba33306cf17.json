{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/thread-loader/dist/cjs.js!/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js!/Users/jlglqa/Documents/QA/noa/node_modules/eslint-loader/index.js??ref--13-0!/Users/jlglqa/Documents/QA/noa/src/store/modules/login.js","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/store/modules/login.js","mtime":1657681682070},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/thread-loader/dist/cjs.js","mtime":1644298102066},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js","mtime":1644314985388},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/eslint-loader/index.js","mtime":1644298104993}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvamxnbHFhL0RvY3VtZW50cy9RQS9ub2Evbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKCnZhciBfbXV0YXRpb25zOwoKaW1wb3J0IGp3dERlY29kZSBmcm9tICdqd3QtZGVjb2RlJzsKaW1wb3J0IENvb2tpZXMgZnJvbSAnanMtY29va2llJzsKdmFyIFNFVF9UT0tFTiA9ICdTRVRfVE9LRU4nOwp2YXIgQ0xFQVJfVE9LRU4gPSAnQ0xFQVJfVE9LRU4nOwp2YXIgRkxBU0hfVE9LRU4gPSAnRkxBU0hfVE9LRU4nOwp2YXIgU0VUX1JPTEUgPSAnU0VUX1JPTEUnOyAvLyBjb25zdCBTRVRfUElDVFVSRSA9ICdTRVRfUElDVFVSRScKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCgp2YXIgQ09PS0lFX0VYUElSRUQgPSBwcm9jZXNzLmVudi5WVUVfQVBQX0NPT0tJRV9FWFBJUkVEOwp2YXIgQ09PS0lFX0RPTUFJTiA9IHByb2Nlc3MuZW52LlZVRV9BUFBfQ09PS0lFX0RPTUFJTjsKdmFyIENPT0tJRV9TVUZGSVggPSBwcm9jZXNzLmVudi5WVUVfQVBQX0NPT0tJRV9TVUZGSVg7IC8vIGNvbnNvbGUubG9nKCJDT09LSUVfRE9NQUlOIiwgQ09PS0lFX0RPTUFJTikKCnZhciBKV1RfVE9LRU4gPSAiSldUX1RPS0VOIi5jb25jYXQoQ09PS0lFX1NVRkZJWCk7CmV4cG9ydCBkZWZhdWx0IHsKICBzdGF0ZTogewogICAgdWlkOiAwLAogICAgdXNlcmlkOiAwLAogICAgdXNlcm5hbWU6ICcnLAogICAgZW1haWw6ICcnLAogICAgcGljdHVyZTogJycsCiAgICBleHA6IDAsCiAgICByb2xlOiBbXSwKICAgIHBlcm1pc3Npb25zOiBbXSwKICAgIEpXVF9UT0tFTjogJycKICB9LAogIGdldHRlcnM6IHsKICAgIGlzTG9naW46IGZ1bmN0aW9uIGlzTG9naW4oc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLkpXVF9UT0tFTiAhPT0gJyc7CiAgICB9LAogICAgLy8gaXNBZG1pbjogc3RhdGUgPT4gewogICAgLy8gICAgIGNvbnNvbGUubG9nKCd1c2Vyc3RhdGUnLHN0YXRlLnJvbGUpCiAgICAvLyAgICAgbGV0IGFkbWluID0gZmFsc2UKICAgIC8vICAgICBzdGF0ZS5yb2xlLmZvckVhY2goaXRlbSA9PiB7CiAgICAvLyAgICAgICAgIGlmKGl0ZW0uaWQgPT0gMSl7CiAgICAvLyAgICAgICAgICAgICBhZG1pbiA9IHRydWUKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgIH0pCiAgICAvLyAgICAgY29uc29sZS5sb2coJ2FkbWluJyxhZG1pbikKICAgIC8vICAgICByZXR1cm4gYWRtaW4KICAgIC8vIH0sCiAgICB1aWQ6IGZ1bmN0aW9uIHVpZChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudWlkOwogICAgfSwKICAgIHVzZXJOYW1lOiBmdW5jdGlvbiB1c2VyTmFtZShzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudXNlcm5hbWU7CiAgICB9LAogICAgdXNlcmlkOiBmdW5jdGlvbiB1c2VyaWQoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnVzZXJpZDsKICAgIH0sCiAgICB1c2VyUGVyczogZnVuY3Rpb24gdXNlclBlcnMoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnBlcm1pc3Npb25zOwogICAgfQogIH0sCiAgbXV0YXRpb25zOiAoX211dGF0aW9ucyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX211dGF0aW9ucywgU0VUX1RPS0VOLCBmdW5jdGlvbiAoc3RhdGUsIHRva2VuKSB7CiAgICB2YXIgZGVjb2RlZCA9IGp3dERlY29kZSh0b2tlbik7IC8vIGNvbnNvbGUubG9nKCJkZWNvZGVkLmV4cCIsIGRlY29kZWQuZXhwKQogICAgLy8gY29uc29sZS5sb2coImV4cCIsIGRlY29kZWQuZXhwIHx8IDApCgogICAgdmFyIGV4cCA9IGRlY29kZWQuZXhwIHx8IDA7CiAgICB2YXIgRVhQSVJFRCA9IG5ldyBEYXRlKG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgZXhwKTsKICAgIENvb2tpZXMuc2V0KEpXVF9UT0tFTiwgdG9rZW4sIHsKICAgICAgZXhwaXJlczogRVhQSVJFRCwKICAgICAgZG9tYWluOiBDT09LSUVfRE9NQUlOCiAgICB9KTsKICAgIGxvY2FsU3RvcmFnZS50b2tlbiA9IHRva2VuOwogICAgc3RhdGUudWlkID0gZGVjb2RlZC51aWQ7CiAgICBzdGF0ZS51c2VyaWQgPSBkZWNvZGVkLnVzZXJfaWQgfHwgMDsKICAgIHN0YXRlLnVzZXJuYW1lID0gZGVjb2RlZC51c2VybmFtZSB8fCAnJzsKICAgIHN0YXRlLmVtYWlsID0gZGVjb2RlZC5lbWFpbDsKICAgIHN0YXRlLnBpY3R1cmUgPSBkZWNvZGVkLnBpY3R1cmUgfHwgJyc7CiAgICBzdGF0ZS5leHAgPSBkZWNvZGVkLmV4cCB8fCAwOwogICAgc3RhdGUucm9sZSA9IGRlY29kZWQucm9sZSB8fCBbXTsKICAgIHN0YXRlLkpXVF9UT0tFTiA9IHRva2VuOwogIH0pLCBfZGVmaW5lUHJvcGVydHkoX211dGF0aW9ucywgQ0xFQVJfVE9LRU4sIGZ1bmN0aW9uIChzdGF0ZSkgewogICAgc3RhdGUudWlkID0gMDsKICAgIHN0YXRlLnVzZXJpZCA9IDA7CiAgICBzdGF0ZS51c2VybmFtZSA9ICcnOwogICAgc3RhdGUucGljdHVyZSA9ICcnOwogICAgc3RhdGUuZXhwID0gMDsKICAgIHN0YXRlLnJvbGUgPSBbXTsKICAgIHN0YXRlLmVtYWlsID0gJyc7CiAgICBzdGF0ZS5KV1RfVE9LRU4gPSAnJzsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgQ29va2llcy5yZW1vdmUoSldUX1RPS0VOLCBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IHt9IDogewogICAgICBkb21haW46IENPT0tJRV9ET01BSU4KICAgIH0pOyAvL+a4hemZpOWtmOWCqAogIH0pLCBfZGVmaW5lUHJvcGVydHkoX211dGF0aW9ucywgRkxBU0hfVE9LRU4sIGZ1bmN0aW9uIChzdGF0ZSkgewogICAgdmFyIHRva2VuID0gQ29va2llcy5nZXQoSldUX1RPS0VOKTsKICAgIHN0YXRlLkpXVF9UT0tFTiA9IHRva2VuIHx8ICcnOwoKICAgIGlmICh0b2tlbikgewogICAgICB2YXIgZGVjb2RlZCA9IGp3dERlY29kZSh0b2tlbik7CiAgICAgIHN0YXRlLnVzZXJpZCA9IGRlY29kZWQudXNlcl9pZCB8fCAwOwogICAgICBzdGF0ZS51aWQgPSBkZWNvZGVkLnVpZDsKICAgICAgc3RhdGUudXNlcm5hbWUgPSBkZWNvZGVkLnVzZXJuYW1lIHx8ICcnOwogICAgICBzdGF0ZS5lbWFpbCA9IGRlY29kZWQuZW1haWwgfHwgJyc7CiAgICAgIHN0YXRlLnBpY3R1cmUgPSBkZWNvZGVkLnBpY3R1cmUgfHwgJyc7CiAgICAgIHN0YXRlLmV4cCA9IGRlY29kZWQuZXhwIHx8IDA7CiAgICB9CiAgfSksIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCBTRVRfUk9MRSwgZnVuY3Rpb24gKHN0YXRlLCBwZXJtcykgewogICAgY29uc29sZS5sb2coJ3Blcm1zJywgcGVybXMpOwogICAgc3RhdGUucGVybWlzc2lvbnMgPSBwZXJtcyB8fCBbXTsKICB9KSwgX211dGF0aW9ucyksCiAgYWN0aW9uczoge30KfTs="},{"version":3,"sources":["/Users/jlglqa/Documents/QA/noa/src/store/modules/login.js"],"names":["jwtDecode","Cookies","SET_TOKEN","CLEAR_TOKEN","FLASH_TOKEN","SET_ROLE","COOKIE_EXPIRED","process","env","VUE_APP_COOKIE_EXPIRED","COOKIE_DOMAIN","VUE_APP_COOKIE_DOMAIN","COOKIE_SUFFIX","VUE_APP_COOKIE_SUFFIX","JWT_TOKEN","state","uid","userid","username","email","picture","exp","role","permissions","getters","isLogin","userName","userPers","mutations","token","decoded","EXPIRED","Date","getTime","set","expires","domain","localStorage","user_id","removeItem","remove","NODE_ENV","get","perms","console","log","actions"],"mappings":"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","sourcesContent":["import jwtDecode from 'jwt-decode'\nimport Cookies from 'js-cookie'\n\nconst SET_TOKEN = 'SET_TOKEN'\nconst CLEAR_TOKEN = 'CLEAR_TOKEN'\nconst FLASH_TOKEN = 'FLASH_TOKEN'\nconst SET_ROLE = 'SET_ROLE'\n// const SET_PICTURE = 'SET_PICTURE'\n\n// eslint-disable-next-line no-unused-vars\nconst COOKIE_EXPIRED = process.env.VUE_APP_COOKIE_EXPIRED\nconst COOKIE_DOMAIN = process.env.VUE_APP_COOKIE_DOMAIN\nconst COOKIE_SUFFIX = process.env.VUE_APP_COOKIE_SUFFIX\n\n// console.log(\"COOKIE_DOMAIN\", COOKIE_DOMAIN)\n\nconst JWT_TOKEN = `JWT_TOKEN${COOKIE_SUFFIX}`\n\nexport default {\n    state: {\n        uid: 0,\n        userid: 0,\n        username: '',\n        email: '',\n        picture: '',\n        exp: 0,\n        role: [],\n        permissions: [],\n        JWT_TOKEN: ''\n    },\n    getters: {\n        isLogin: state => {\n            return state.JWT_TOKEN !== ''\n        },\n        // isAdmin: state => {\n        //     console.log('userstate',state.role)\n        //     let admin = false\n        //     state.role.forEach(item => {\n        //         if(item.id == 1){\n        //             admin = true\n        //         }\n        //     })\n        //     console.log('admin',admin)\n        //     return admin\n        // },\n        uid: state => {\n          return state.uid\n        },\n        userName: state => {\n            return state.username\n        },\n        userid: state => {\n            return state.userid\n        },\n        userPers: state => {\n            return state.permissions\n        }\n    },\n    mutations: {\n        [SET_TOKEN](state, token) {\n            let decoded = jwtDecode(token)\n            // console.log(\"decoded.exp\", decoded.exp)\n            // console.log(\"exp\", decoded.exp || 0)\n            let exp = decoded.exp || 0\n            let EXPIRED = new Date(new Date().getTime() + exp)\n            Cookies.set(JWT_TOKEN, token, {\n                expires: EXPIRED,\n                domain: COOKIE_DOMAIN\n            })\n            localStorage.token = token\n            state.uid = decoded.uid\n            state.userid = decoded.user_id || 0\n            state.username = decoded.username || ''\n            state.email = decoded.email\n            state.picture = decoded.picture || ''\n            state.exp = decoded.exp || 0\n            state.role = decoded.role || []\n            state.JWT_TOKEN = token\n        },\n        [CLEAR_TOKEN](state) {\n            state.uid = 0\n            state.userid = 0\n            state.username = ''\n            state.picture = ''\n            state.exp = 0\n            state.role = []\n            state.email = ''\n            state.JWT_TOKEN = ''\n            localStorage.removeItem('token')\n            Cookies.remove(JWT_TOKEN, process.env.NODE_ENV === 'development' ? {} : {domain: COOKIE_DOMAIN})\n            //清除存储\n        },\n        [FLASH_TOKEN](state) {\n            let token = Cookies.get(JWT_TOKEN)\n            state.JWT_TOKEN = token || ''\n            if (token) {\n                let decoded = jwtDecode(token)\n                state.userid = decoded.user_id || 0\n                state.uid = decoded.uid\n                state.username = decoded.username || ''\n                state.email = decoded.email || ''\n                state.picture = decoded.picture || ''\n                state.exp = decoded.exp || 0\n            }\n        },\n        [SET_ROLE](state, perms){\n          console.log('perms', perms)\n          state.permissions = perms || []\n        },\n        // [SET_PICTURE](state,picture){\n        //     state.picture = picture\n        // }\n    },\n    actions: {}\n}\n"]}]}
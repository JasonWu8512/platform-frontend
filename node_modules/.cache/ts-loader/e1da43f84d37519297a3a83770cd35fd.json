{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js!/Users/jlglqa/Documents/QA/noa/node_modules/ts-loader/index.js??ref--14-2!/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/track/common/NodeTree.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/track/common/NodeTree.vue","mtime":1655949681782},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js","mtime":1644314985388},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/ts-loader/index.js","mtime":1644314987889},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiKTsKCnZhciBfX2ltcG9ydERlZmF1bHQgPSB0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0IHx8IGZ1bmN0aW9uIChtb2QpIHsKICByZXR1cm4gbW9kICYmIG1vZC5fX2VzTW9kdWxlID8gbW9kIDogewogICAgImRlZmF1bHQiOiBtb2QKICB9Owp9OwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIGFwaV8xID0gcmVxdWlyZSgiQC9hcGkiKTsKCnZhciByb3V0ZURhdGFfMSA9IHJlcXVpcmUoIkAvY29uc3RhbnQvcm91dGVEYXRhIik7Cgp2YXIgVGVzdENhc2VfMSA9IHJlcXVpcmUoIkAvY29uc3RhbnQvVGVzdENhc2UiKTsKCnZhciBOb2RlRWRpdF92dWVfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKCJAL3BhZ2VzL3RyYWNrL2NvbW1vbi9Ob2RlRWRpdC52dWUiKSk7CgpleHBvcnRzLmRlZmF1bHQgPSB7CiAgbmFtZTogIk5vZGVUcmVlIiwKICBjb21wb25lbnRzOiB7CiAgICBOb2RlRWRpdDogTm9kZUVkaXRfdnVlXzEuZGVmYXVsdAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG9wZXJhdGlvbkVudW06IFRlc3RDYXNlXzEub3BlcmF0aW9uRW51bSwKICAgICAgZXhwYW5kZWROb2RlOiBbXSwKICAgICAgZmlsdGVyVGV4dDogIiIKICAgIH07CiAgfSwKICBwcm9wczogewogICAgdHJlZU5vZGVzOiBBcnJheSwKICAgIGN1cnJlbnROb2RlOiBPYmplY3QsCiAgICBjdXJyZW50UHJvamVjdDogT2JqZWN0LAogICAgdHlwZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IFRlc3RDYXNlXzEub3BlcmF0aW9uRW51bS5WSUVXCiAgICB9LAogICAgZHJhZ2dhYmxlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBkaXNhYmxlZDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGZpbHRlclRleHQ6IGZ1bmN0aW9uIGZpbHRlclRleHQodmFsKSB7CiAgICAgIHRoaXMuJHJlZnMudHJlZS5maWx0ZXIodmFsKTsKICAgIH0sCiAgICB0cmVlTm9kZXM6IGZ1bmN0aW9uIHRyZWVOb2RlcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmN1cnJlbnROb2RlLmlkKSB7CiAgICAgICAgLy8gRE9N5Yqg6L295a6M5oiQ5YaN5omn6KGM5LiL5LiA5q2l5pON5L2cCiAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMuaGFuZGxlTm9kZVNlbGVjdChfdGhpcy4kcmVmcy50cmVlLmdldE5vZGUoX3RoaXMuY3VycmVudE5vZGUuaWQpLCBfdGhpcy5jdXJyZW50Tm9kZSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGRhdGEpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLiRhbGVydCgiXHU3ODZFXHU4QkE0XHU1MjIwXHU5NjY0XHU2QTIxXHU1NzU3OiAiLmNvbmNhdChkYXRhLm5hbWUsICJcdUZGMENcdTRFRTVcdTUzQ0FcdTZBMjFcdTU3NTdcdTRFMEJcdTYyNDBcdTY3MDlcdTVCNTBcdTZBMjFcdTU3NTdcdTU0OENcdTZENEJcdThCRDVcdTc1MjhcdTRGOEJcdUZGMENcdThCQzRcdTVCQTFcdTUzQ0FcdTZENEJcdThCRDVcdThCQTFcdTUyMTJcdTUxNzNcdTgwNTRcdTc2ODRcdTc1MjhcdTRGOEJcdUZGMUYiKSwgIiIsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gY2FsbGJhY2soYWN0aW9uKSB7CiAgICAgICAgICBpZiAoYWN0aW9uID09PSAiY29uZmlybSIpIHsKICAgICAgICAgICAgYXBpXzEudGVzdENhc2VBcGkuZGVsZXRlVGVzdENhc2VNb2R1bGVzKGRhdGEuaWQpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIF90aGlzMi4kZW1pdCgicmVmcmVzaE5vZGUiKTsgLy8g5riF6Zmk5b2T5YmN6YCJ5oup6IqC54K5CgoKICAgICAgICAgICAgICBfdGhpczIuJGVtaXQoInVwZGF0ZTpjdXJyZW50Tm9kZSIsIHt9KTsKCiAgICAgICAgICAgICAgX3RoaXMyLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICBuYW1lOiByb3V0ZURhdGFfMS5QYXRoTmFtZS5UZXN0VHJhY2tUZXN0Y2FzZVByb2plY3QsCiAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgcHJvamVjdElkOiBfdGhpczIuY3VycmVudFByb2plY3QuaWQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVOb2RlU2VsZWN0OiBmdW5jdGlvbiBoYW5kbGVOb2RlU2VsZWN0KG5vZGUsIGRhdGEpIHsKICAgICAgaWYgKG5vZGUpIHsKICAgICAgICB2YXIgcE5vZGVzID0gW107CiAgICAgICAgdGhpcy5nZXRQYXJlbnROb2Rlcyhub2RlLCBwTm9kZXMpOwogICAgICAgIHRoaXMuZXhwYW5kZWROb2RlLnB1c2goZGF0YS5pZCk7CiAgICAgICAgdGhpcy4kcmVmcy50cmVlLnNldEN1cnJlbnRLZXkoZGF0YS5pZCk7CiAgICAgICAgdGhpcy4kZW1pdCgibm9kZVNlbGVjdEV2ZW50IiwgZGF0YSwgcE5vZGVzLCBub2RlKTsKICAgICAgfQogICAgfSwKICAgIGdldFBhcmVudE5vZGVzOiBmdW5jdGlvbiBnZXRQYXJlbnROb2RlcyhjdXJyZW50Tm9kZSwgcE5vZGVzKSB7CiAgICAgIGlmIChjdXJyZW50Tm9kZS5sZXZlbCAmJiBjdXJyZW50Tm9kZS5sZXZlbCAhPT0gMSkgewogICAgICAgIHRoaXMuZ2V0UGFyZW50Tm9kZXMoY3VycmVudE5vZGUucGFyZW50LCBwTm9kZXMpOwogICAgICB9CgogICAgICBpZiAoY3VycmVudE5vZGUuZGF0YSAmJiBjdXJyZW50Tm9kZS5kYXRhLmlkICE9PSAiIikgewogICAgICAgIHBOb2Rlcy5wdXNoKGN1cnJlbnROb2RlLmRhdGEpOwogICAgICB9CiAgICB9LAogICAgZmlsdGVyTm9kZTogZnVuY3Rpb24gZmlsdGVyTm9kZSh2YWx1ZSwgZGF0YSkgewogICAgICBpZiAoIXZhbHVlKSByZXR1cm4gdHJ1ZTsKICAgICAgcmV0dXJuIGRhdGEubmFtZS5pbmRleE9mKHZhbHVlKSAhPT0gLTE7CiAgICB9LAogICAgb3BlbkVkaXROb2RlRGlhbG9nOiBmdW5jdGlvbiBvcGVuRWRpdE5vZGVEaWFsb2codHlwZSwgZGF0YSkgewogICAgICB0aGlzLiRyZWZzLm5vZGVFZGl0Lm9wZW4odHlwZSwgZGF0YSk7CiAgICB9LAogICAgcmVmcmVzaE5vZGU6IGZ1bmN0aW9uIHJlZnJlc2hOb2RlKCkgewogICAgICB0aGlzLiRlbWl0KCJyZWZyZXNoTm9kZSIpOwogICAgICB0aGlzLiRlbWl0KCJyZWZyZXNoVGFibGUiKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/track/common/NodeTree.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {testCaseApi} from \"@/api\"\nimport {typeNode} from \"@/api/types/testTrackType\"\nimport {PathName} from \"@/constant/routeData\"\nimport {operationEnum} from \"@/constant/TestCase\"\nimport NodeEdit from \"@/pages/track/common/NodeEdit.vue\"\n\nexport default {\n  name: \"NodeTree\",\n  components: {NodeEdit},\n  data() {\n    return {\n      operationEnum: operationEnum,\n      expandedNode: [],\n      filterText: \"\",\n    }\n  },\n  props: {\n    treeNodes: Array,\n    currentNode: Object,\n    currentProject: Object,\n    type: {\n      type: String,\n      default: operationEnum.VIEW\n    },\n    draggable: {\n      type: Boolean,\n      default: true\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    }\n  },\n  watch: {\n    filterText(val: any) {\n      this.$refs.tree.filter(val)\n    },\n    treeNodes() {\n      if (this.currentNode.id) {\n        // DOM加载完成再执行下一步操作\n        this.$nextTick(() => {\n          this.handleNodeSelect(this.$refs.tree.getNode(this.currentNode.id), this.currentNode)\n        })\n      }\n    }\n  },\n  methods: {\n    remove(data: { name: string; id: string }) {\n      this.$alert(\n        `确认删除模块: ${data.name}，以及模块下所有子模块和测试用例，评审及测试计划关联的用例？`,\n        \"\",\n        {\n          confirmButtonText: '确定',\n          showCancelButton: true,\n          cancelButtonText: '取消',\n          callback: (action: string) => {\n            if (action === \"confirm\") {\n              testCaseApi.deleteTestCaseModules(data.id)\n                .then(() => {\n                  this.$emit(\"refreshNode\")\n                  // 清除当前选择节点\n                  this.$emit(\"update:currentNode\", {})\n                  this.$router.push({\n                    name: PathName.TestTrackTestcaseProject,\n                    params: {projectId: this.currentProject.id}\n                  })\n                })\n            }\n          }\n        }\n      )\n    },\n    handleNodeSelect(node: typeNode, data: { id: string }) {\n      if (node) {\n        let pNodes: typeNode[] = []\n        this.getParentNodes(node, pNodes)\n        this.expandedNode.push(data.id)\n        this.$refs.tree.setCurrentKey(data.id)\n        this.$emit(\"nodeSelectEvent\", data, pNodes, node)\n      }\n    },\n    getParentNodes(currentNode: typeNode, pNodes: typeNode[]) {\n      if (currentNode.level && currentNode.level !== 1) {\n        this.getParentNodes(currentNode.parent, pNodes)\n      }\n      if (currentNode.data && currentNode.data.id !== \"\") {\n        pNodes.push(currentNode.data)\n      }\n    },\n    filterNode(value: string, data: { name: string }) {\n      if (!value) return true\n      return data.name.indexOf(value) !== -1\n    },\n    openEditNodeDialog(type: operationEnum, data?: typeNode) {\n      this.$refs.nodeEdit.open(type, data)\n    },\n    refreshNode() {\n      this.$emit(\"refreshNode\")\n      this.$emit(\"refreshTable\")\n    },\n  },\n}\n"],"sourceRoot":""}]}
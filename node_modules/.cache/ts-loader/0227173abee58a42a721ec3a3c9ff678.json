{"remainingRequest":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js!/Users/jlglqa/Documents/QA/noa/node_modules/ts-loader/index.js??ref--14-2!/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/track/common/NodeEdit.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/jlglqa/Documents/QA/noa/src/pages/track/common/NodeEdit.vue","mtime":1655949681782},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js","mtime":1644314985388},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/ts-loader/index.js","mtime":1644314987889},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/babel-loader/lib/index.js","mtime":1644314985388},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/ts-loader/index.js","mtime":1644314987889},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js","mtime":1644298102062},{"path":"/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js","mtime":1644314988580}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyIpOwoKdmFyIF9faW1wb3J0RGVmYXVsdCA9IHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQgfHwgZnVuY3Rpb24gKG1vZCkgewogIHJldHVybiBtb2QgJiYgbW9kLl9fZXNNb2R1bGUgPyBtb2QgOiB7CiAgICAiZGVmYXVsdCI6IG1vZAogIH07Cn07CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgYXBpXzEgPSByZXF1aXJlKCJAL2FwaSIpOwoKdmFyIERpYWxvZ0Zvb3Rlcl92dWVfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKCJAL2NvbW1vbi9jb21wb25lbnRzL0RpYWxvZ0Zvb3Rlci52dWUiKSk7Cgp2YXIgVGVzdENhc2VfMSA9IHJlcXVpcmUoIkAvY29uc3RhbnQvVGVzdENhc2UiKTsKCmV4cG9ydHMuZGVmYXVsdCA9IHsKICBjb21wb25lbnRzOiB7CiAgICBEaWFsb2dGb290ZXI6IERpYWxvZ0Zvb3Rlcl92dWVfMS5kZWZhdWx0CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgb3BlcmF0aW9uRW51bTogVGVzdENhc2VfMS5vcGVyYXRpb25FbnVtLAogICAgICBuYW1lOiAiTm9kZUVkaXQiLAogICAgICBmb3JtOiB7CiAgICAgICAgbmFtZTogJycKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICBuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5ZCN56ewJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH0sIHsKICAgICAgICAgIG1heDogMzAsCiAgICAgICAgICBtZXNzYWdlOiAn6ZW/5bqm5b+F6aG75bCP5LqOMzAnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgdHlwZTogJycsCiAgICAgIG5vZGU6IHt9LAogICAgICBkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UKICAgIH07CiAgfSwKICBwcm9wczogewogICAgdHJlZU5vZGVzOiBBcnJheSwKICAgIGN1cnJlbnRQcm9qZWN0OiBPYmplY3QKICB9LAogIG1ldGhvZHM6IHsKICAgIG9wZW46IGZ1bmN0aW9uIG9wZW4odHlwZSwgbm9kZSkgewogICAgICB0aGlzLnR5cGUgPSB0eXBlOwogICAgICB0aGlzLm5vZGUgPSBub2RlOwoKICAgICAgaWYgKHR5cGUgPT09IFRlc3RDYXNlXzEub3BlcmF0aW9uRW51bS5FRElUKSB7CiAgICAgICAgdGhpcy5mb3JtLm5hbWUgPSB0aGlzLm5vZGUubmFtZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmZvcm0ubmFtZSA9ICcnOwogICAgICB9CgogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBzYXZlTm9kZTogZnVuY3Rpb24gc2F2ZU5vZGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiRyZWZzLm5vZGVGb3JtLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgaWYgKCFfdGhpcy5jdXJyZW50UHJvamVjdC5pZCkgewogICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfmmoLml6Dpobnnm67vvIzor7flhYjliJvlu7rpobnnm64nKTsKCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoX3RoaXMuZm9ybS5uYW1lLnRyaW0oKSA9PT0gJycpIHsKICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+36L6T5YWl5ZCN56ewJyk7CgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXMuYnVpbGRQYXJhbSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBidWlsZFBhcmFtOiBmdW5jdGlvbiBidWlsZFBhcmFtKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGJvZHkgPSB7CiAgICAgICAgbmFtZTogdGhpcy5mb3JtLm5hbWUsCiAgICAgICAgcHJvaklkOiB0aGlzLmN1cnJlbnRQcm9qZWN0LmlkCiAgICAgIH07CgogICAgICBpZiAodGhpcy50eXBlID09PSBUZXN0Q2FzZV8xLm9wZXJhdGlvbkVudW0uQUREKSB7CiAgICAgICAgaWYgKHRoaXMubm9kZSkgewogICAgICAgICAgLy/moLnoioLngrnvvIzmt7vliqDpnIDopoHluKbkuIrniLboioLngrlpZAogICAgICAgICAgYm9keSA9IE9iamVjdC5hc3NpZ24oewogICAgICAgICAgICBwYXJlbnQ6IHRoaXMubm9kZS5pZAogICAgICAgICAgfSwgYm9keSk7CiAgICAgICAgfQoKICAgICAgICBhcGlfMS50ZXN0Q2FzZUFwaS5jcmVhdGVUZXN0Q2FzZU1vZHVsZXMoYm9keSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpcy4kZW1pdCgicmVmcmVzaE5vZGUiKTsKCiAgICAgICAgICBfdGhpcy5jbG9zZSgpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gVGVzdENhc2VfMS5vcGVyYXRpb25FbnVtLkVESVQpIHsKICAgICAgICBhcGlfMS50ZXN0Q2FzZUFwaS51cGRhdGVUZXN0Q2FzZU1vZHVsZXModGhpcy5ub2RlLmlkLCBib2R5KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzLiRlbWl0KCJyZWZyZXNoTm9kZSIpOwoKICAgICAgICAgIF90aGlzLmNsb3NlKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoKSB7CiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/jlglqa/Documents/QA/noa/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jlglqa/Documents/QA/noa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jlglqa/Documents/QA/noa/src/pages/track/common/NodeEdit.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {testCaseApi} from \"@/api\"\nimport {RequestCreateTestCaseModules} from \"@/api/types/testTrack\"\nimport {typeNode} from \"@/api/types/testTrackType\"\nimport DialogFooter from \"@/common/components/DialogFooter.vue\"\nimport {operationEnum} from \"@/constant/TestCase\"\n\n\nexport default {\n  components: {DialogFooter},\n  data() {\n    return {\n      operationEnum: operationEnum,\n      name: \"NodeEdit\",\n      form: {\n        name: '',\n      },\n      rules: {\n        name: [\n          {required: true, message: '请输入名称', trigger: 'blur'},\n          {max: 30, message: '长度必须小于30', trigger: 'blur'}\n        ]\n      },\n      type: '',\n      node: {},\n      dialogFormVisible: false,\n    }\n  },\n  props: {\n    treeNodes: Array,\n    currentProject: Object,\n  },\n  methods: {\n    open(type: operationEnum, node: typeNode) {\n      this.type = type\n      this.node = node\n      if (type === operationEnum.EDIT) {\n        this.form.name = this.node.name\n      } else {\n        this.form.name = ''\n      }\n      this.dialogFormVisible = true\n    },\n    saveNode() {\n      this.$refs.nodeForm.validate((valid: boolean) => {\n        if (valid) {\n          if (!this.currentProject.id) {\n            this.$message.warning('暂无项目，请先创建项目')\n            return\n          }\n          if (this.form.name.trim() === '') {\n            this.$message.warning('请输入名称')\n            return\n          }\n          this.buildParam()\n        } else {\n          return false\n        }\n      })\n    },\n    buildParam() {\n      let body: RequestCreateTestCaseModules = {\n        name: this.form.name,\n        projId: this.currentProject.id\n      }\n      if (this.type === operationEnum.ADD) {\n        if (this.node) {\n          //根节点，添加需要带上父节点id\n          body = Object.assign({parent: this.node.id}, body)\n        }\n        testCaseApi.createTestCaseModules(body)\n          .then(() => {\n            this.$emit(\"refreshNode\")\n            this.close()\n          })\n      } else if (this.type === operationEnum.EDIT) {\n        testCaseApi.updateTestCaseModules(this.node.id, body)\n          .then(() => {\n            this.$emit(\"refreshNode\")\n            this.close()\n          })\n      }\n    },\n    close() {\n      this.dialogFormVisible = false\n    }\n  }\n}\n"],"sourceRoot":""}]}